"use strict";(self.webpackChunkct_hospital=self.webpackChunkct_hospital||[]).push([[42],{5042:(Kn,D,s)=>{s.r(D),s.d(D,{PatientModule:()=>Xn});var p=s(9808),f=s(1083),k=s(655),y=s(2638),w=s(4987),O=s(1005),F=s(9300),t=s(5e3),Q=s(5113),Y=s(4594),U=s(7423),E=s(5245),S=s(4834);function V(n,o){1&n&&(t.TgZ(0,"mat-icon"),t._uU(1," menu "),t.qZA())}function H(n,o){1&n&&(t.TgZ(0,"mat-icon"),t._uU(1," close "),t.qZA())}function R(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"button",15),t.NdJ("click",function(){return t.CHM(e),t.oxw(),t.MAs(11).toggle()}),t.YNc(1,V,2,0,"mat-icon",16),t.YNc(2,H,2,0,"mat-icon",16),t.qZA()}if(2&n){t.oxw();const e=t.MAs(11);t.xp6(1),t.Q6J("ngIf",!e.opened),t.xp6(1),t.Q6J("ngIf",e.opened)}}const q=function(){return{exact:!0}};function L(n,o){1&n&&(t.TgZ(0,"a",17),t._uU(1,"Appointments"),t.qZA()),2&n&&t.Q6J("routerLinkActiveOptions",t.DdM(1,q))}function G(n,o){1&n&&(t.TgZ(0,"a",18),t._uU(1,"Visit History"),t.qZA()),2&n&&t.Q6J("routerLinkActiveOptions",t.DdM(1,q))}function $(n,o){1&n&&(t.TgZ(0,"a",19),t._uU(1,"Profile"),t.qZA()),2&n&&t.Q6J("routerLinkActiveOptions",t.DdM(1,q))}function B(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"button",20),t.NdJ("click",function(){return t.CHM(e),t.oxw().updateProfile()}),t.TgZ(1,"mat-icon"),t._uU(2,"account_circle"),t.qZA(),t.TgZ(3,"span"),t._uU(4,"Profile"),t.qZA()()}}function j(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"button",21),t.NdJ("click",function(){return t.CHM(e),t.oxw().updateProfile()}),t.TgZ(1,"mat-icon"),t._uU(2,"home"),t.qZA(),t.TgZ(3,"span"),t._uU(4,"Home"),t.qZA()()}}function z(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"button",22),t.NdJ("click",function(){return t.CHM(e),t.oxw().updateProfile()}),t.TgZ(1,"mat-icon"),t._uU(2,"history"),t.qZA(),t.TgZ(3,"span"),t._uU(4,"Visit-history"),t.qZA()()}}let v=class{constructor(o,e){this.observer=o,this.router=e,this.activeRouting="activeRouting",this.showProfile=!0,this.user=JSON.parse(sessionStorage.getItem("user"))}ngOnInit(){this.observer.observe(["(max-width: 800px)"]).pipe((0,O.g)(1),(0,w.t)(this)).subscribe(o=>{o.matches?(this.sidenav.mode="over",this.sidenav.close()):(this.sidenav.mode="side",this.sidenav.open())}),this.router.events.pipe((0,w.t)(this),(0,F.h)(o=>o instanceof f.m2)).subscribe(()=>{"over"===this.sidenav.mode&&this.sidenav.close()})}updateProfile(){this.showProfile=!this.showProfile}logout(){sessionStorage.clear(),this.router.navigate(["login"])}};v.\u0275fac=function(o){return new(o||v)(t.Y36(Q.Yg),t.Y36(f.F0))},v.\u0275cmp=t.Xpm({type:v,selectors:[["app-dashboard"]],viewQuery:function(o,e){if(1&o&&t.Gf(y.JX,5),2&o){let i;t.iGM(i=t.CRH())&&(e.sidenav=i.first)}},decls:29,vars:8,consts:[[1,"mat-elevation-z8"],["mat-icon-button","",3,"click",4,"ngIf"],["style","margin-left: 20%;text-decoration: none;","routerLink","/patient/dashboard/appointment","routerLinkActive","activeRouting",3,"routerLinkActiveOptions",4,"ngIf"],["style","margin-left: 5%;text-decoration: none;","routerLink","/patient/dashboard/visit-history","routerLinkActive","activeRouting",3,"routerLinkActiveOptions",4,"ngIf"],["style","margin-left: 20%;text-decoration: none;","routerLink","/patient/dashboard/profile","routerLinkActive","activeRouting",3,"routerLinkActiveOptions",4,"ngIf"],[1,"flexExpand"],["mat-raised-button","",1,"logout",3,"click"],["sidenav","matSidenav"],["src","assets/profileImg.png",1,"avatar","mat-elevation-z8"],[1,"name",2,"margin-bottom","0","margin-top","1em"],[1,"designation"],["mat-button","","class","menu-button","routerLink","/patient/dashboard/profile",3,"click",4,"ngIf"],["mat-button","","class","menu-button","routerLink","/patient/dashboard/appointment",3,"click",4,"ngIf"],["mat-button","","class","menu-button","routerLink","/patient/dashboard/visit-history",3,"click",4,"ngIf"],["mat-button","","routerLink","/help",1,"menu-button"],["mat-icon-button","",3,"click"],[4,"ngIf"],["routerLink","/patient/dashboard/appointment","routerLinkActive","activeRouting",2,"margin-left","20%","text-decoration","none",3,"routerLinkActiveOptions"],["routerLink","/patient/dashboard/visit-history","routerLinkActive","activeRouting",2,"margin-left","5%","text-decoration","none",3,"routerLinkActiveOptions"],["routerLink","/patient/dashboard/profile","routerLinkActive","activeRouting",2,"margin-left","20%","text-decoration","none",3,"routerLinkActiveOptions"],["mat-button","","routerLink","/patient/dashboard/profile",1,"menu-button",3,"click"],["mat-button","","routerLink","/patient/dashboard/appointment",1,"menu-button",3,"click"],["mat-button","","routerLink","/patient/dashboard/visit-history",1,"menu-button",3,"click"]],template:function(o,e){if(1&o&&(t.TgZ(0,"mat-toolbar",0),t.YNc(1,R,3,2,"button",1),t.YNc(2,L,2,2,"a",2),t.YNc(3,G,2,2,"a",3),t.YNc(4,$,2,2,"a",4),t._UZ(5,"span",5),t.TgZ(6,"div")(7,"button",6),t.NdJ("click",function(){return e.logout()}),t._uU(8,"Logout"),t.qZA()()(),t.TgZ(9,"mat-sidenav-container")(10,"mat-sidenav",0,7),t._UZ(12,"img",8),t.TgZ(13,"h4",9),t._uU(14),t.qZA(),t.TgZ(15,"p",10),t._uU(16,"(Patient)"),t.qZA(),t._UZ(17,"mat-divider"),t.YNc(18,B,5,0,"button",11),t.YNc(19,j,5,0,"button",12),t.YNc(20,z,5,0,"button",13),t._UZ(21,"mat-divider"),t.TgZ(22,"button",14)(23,"mat-icon"),t._uU(24,"help"),t.qZA(),t.TgZ(25,"span"),t._uU(26,"Help"),t.qZA()()(),t.TgZ(27,"mat-sidenav-content"),t._UZ(28,"router-outlet"),t.qZA()()),2&o){const i=t.MAs(11);t.xp6(1),t.Q6J("ngIf","over"===i.mode),t.xp6(1),t.Q6J("ngIf",e.showProfile),t.xp6(1),t.Q6J("ngIf",e.showProfile),t.xp6(1),t.Q6J("ngIf",!e.showProfile),t.xp6(10),t.Oqu(e.user.title+". "+e.user.firstName+" "+e.user.lastName),t.xp6(4),t.Q6J("ngIf",e.showProfile),t.xp6(1),t.Q6J("ngIf",!e.showProfile),t.xp6(1),t.Q6J("ngIf",!e.showProfile)}},directives:[Y.Ye,p.O5,U.lW,E.Hw,f.yS,f.Od,y.TM,y.JX,S.d,f.rH,y.Rh,f.lC],styles:["h1[_ngcontent-%COMP%]{margin:100px;text-align:center;font-family:Verdana,Geneva,Tahoma,sans-serif}mat-toolbar[_ngcontent-%COMP%]{background:#004a9f;color:#fff}table[_ngcontent-%COMP%]{width:100%}mat-sidenav[_ngcontent-%COMP%]{margin:16px;width:200px;border-right:none;background:#002b5c;color:#fff;border-radius:10px;padding:16px;text-align:center}.content[_ngcontent-%COMP%]{height:calc(100vh - 130px);border-radius:10px;margin:16px 16px 16px 32px;padding:16px;overflow:auto}mat-sidenav-container[_ngcontent-%COMP%]{height:calc(100vh - 100px)}mat-icon[_ngcontent-%COMP%]{margin-right:.5em}.menu-button[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;justify-content:flex-start;font-size:1rem}.avatar[_ngcontent-%COMP%]{margin-top:16px;width:100px;height:100px;border-radius:50%}.name[_ngcontent-%COMP%]{margin-top:8px;font-weight:400}.designation[_ngcontent-%COMP%]{margin-top:2px;font-size:.9rem;color:#d3d3d3}mat-divider[_ngcontent-%COMP%]{margin-top:16px;margin-bottom:16px;background-color:#ffffff80}.logout[_ngcontent-%COMP%]{font-size:medium}.flexExpand[_ngcontent-%COMP%]{flex:1 1 auto}.todaysAppointment[_ngcontent-%COMP%]{background-color:#f0f088}.activeRouting[_ngcontent-%COMP%]{color:azure}"]}),v=(0,k.gn)([(0,w.c)()],v);var g=s(8966),C=s(9062),P=s(4847),d=s(4999),W=s(5973),a=s(3075),_=s(706),c=s(8487),x=s(7261),T=s(349),A=s(3251),X=s(9224),K=s(9203);function tt(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"ask-reason",4),t.NdJ("reason",function(l){return t.CHM(e),t.oxw().cancelAppointment(l)}),t.qZA()}2&n&&t.Q6J("type","cancel")}function et(n,o){1&n&&(t.TgZ(0,"small",38),t._uU(1,"Meeting Title cannot be blank"),t.qZA())}function nt(n,o){if(1&n&&(t.TgZ(0,"div"),t.YNc(1,et,2,0,"small",18),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",null==e.appointmentForm.controls.meetingTitle.errors?null:e.appointmentForm.controls.meetingTitle.errors.required)}}function it(n,o){1&n&&(t.TgZ(0,"small",38),t._uU(1,"Description cannot be blank"),t.qZA())}function ot(n,o){if(1&n&&(t.TgZ(0,"div"),t.YNc(1,it,2,0,"small",18),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",null==e.appointmentForm.controls.description.errors?null:e.appointmentForm.controls.description.errors.required)}}function at(n,o){if(1&n&&(t.TgZ(0,"option",16),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.Q6J("value",e.employeeId),t.xp6(1),t.Oqu(e.name)}}function lt(n,o){1&n&&(t.TgZ(0,"small",38),t._uU(1,"Physician cannot be empty"),t.qZA())}function rt(n,o){1&n&&(t.TgZ(0,"small",38),t._uU(1,"Patient cannot be empty"),t.qZA())}function st(n,o){1&n&&(t.TgZ(0,"option",16),t._uU(1,"No Window Available"),t.qZA()),2&n&&t.Q6J("value",-1)}function pt(n,o){1&n&&(t.TgZ(0,"option",16),t._uU(1,"Select Window"),t.qZA()),2&n&&t.Q6J("value",-1)}function mt(n,o){if(1&n&&(t.TgZ(0,"option",16),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.Q6J("value",o.index),t.xp6(1),t.Oqu(e.label)}}function dt(n,o){1&n&&(t.TgZ(0,"small",38),t._uU(1," Availability window is required"),t.qZA())}function ct(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",6)(1,"label",39),t._uU(2,"Availability Window"),t.qZA(),t.TgZ(3,"select",40),t.NdJ("change",function(){return t.CHM(e),t.oxw(2).populateTimes()}),t.YNc(4,st,2,1,"option",41),t.YNc(5,pt,2,1,"option",41),t.YNc(6,mt,2,2,"option",17),t.qZA(),t.YNc(7,dt,2,0,"small",18),t.qZA()}if(2&n){const e=t.oxw(2);t.xp6(4),t.Q6J("ngIf",0==e.windows.length),t.xp6(1),t.Q6J("ngIf",e.windows.length>0),t.xp6(1),t.Q6J("ngForOf",e.windows),t.xp6(1),t.Q6J("ngIf",e.appointmentForm.controls.window.touched&&-1==e.appointmentForm.controls.window.value)}}function ut(n,o){1&n&&(t.TgZ(0,"option",16),t._uU(1,"Select Start Time"),t.qZA()),2&n&&t.Q6J("value",-1)}function ft(n,o){if(1&n&&(t.TgZ(0,"option",16),t._uU(1),t.ALo(2,"uppercase"),t.qZA()),2&n){const e=o.$implicit;t.Q6J("value",o.index),t.xp6(1),t.Oqu(t.lcZ(2,2,e))}}function gt(n,o){1&n&&(t.TgZ(0,"option",16),t._uU(1,"Select End Time"),t.qZA()),2&n&&t.Q6J("value",-1)}function _t(n,o){if(1&n&&(t.TgZ(0,"option",16),t._uU(1),t.ALo(2,"uppercase"),t.qZA()),2&n){const e=o.$implicit;t.Q6J("value",o.index),t.xp6(1),t.Oqu(t.lcZ(2,2,e))}}function ht(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",42)(1,"div",43)(2,"label",44),t._uU(3,"Start Time"),t.qZA(),t.TgZ(4,"select",45),t.NdJ("change",function(){return t.CHM(e),t.oxw(2).updateEndTimes()}),t.YNc(5,ut,2,1,"option",41),t.YNc(6,ft,3,4,"option",17),t.qZA()(),t.TgZ(7,"div",43)(8,"label",46),t._uU(9,"End Time"),t.qZA(),t.TgZ(10,"select",47),t.YNc(11,gt,2,1,"option",41),t.YNc(12,_t,3,4,"option",17),t.qZA()()()}if(2&n){const e=t.oxw(2);t.xp6(5),t.Q6J("ngIf",e.startTimes.length>0),t.xp6(1),t.Q6J("ngForOf",e.startTimes),t.xp6(5),t.Q6J("ngIf",0==e.endTimes.length),t.xp6(1),t.Q6J("ngForOf",e.endTimes)}}function vt(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"button",48),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).editAppointment()}),t._uU(1,"Update "),t.qZA()}}function Zt(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"button",49),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).cancelMode=!0}),t._uU(1,"Cancel"),t.qZA()}}const At=function(){return["ACCEPTED","PENDING"]};function bt(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"form",5)(1,"div",6)(2,"label",7),t._uU(3,"Meeting Title"),t.qZA(),t._UZ(4,"input",8),t.YNc(5,nt,2,1,"div",9),t.qZA(),t.TgZ(6,"div",6)(7,"label",10),t._uU(8,"Description"),t.qZA(),t._UZ(9,"textarea",11),t.YNc(10,ot,2,1,"div",9),t.qZA(),t.TgZ(11,"div",12)(12,"div",13)(13,"label",14),t._uU(14,"Physician Name"),t.qZA(),t.TgZ(15,"select",15),t.NdJ("change",function(){t.CHM(e);const l=t.oxw();return l.getAvailabilityWindows(),l.showPhysicianId()}),t.TgZ(16,"option",16),t._uU(17,"Select Physician"),t.qZA(),t.YNc(18,at,2,2,"option",17),t.qZA(),t.YNc(19,lt,2,0,"small",18),t.qZA(),t.TgZ(20,"div",19)(21,"label",20),t._uU(22,"Physician ID"),t.qZA(),t._UZ(23,"input",21),t.qZA()(),t.TgZ(24,"div",12)(25,"div",22)(26,"label",23),t._uU(27,"Patient Name"),t.qZA(),t.TgZ(28,"select",24)(29,"option",16),t._uU(30),t.qZA()(),t.YNc(31,rt,2,0,"small",18),t.qZA(),t.TgZ(32,"div",25)(33,"label",20),t._uU(34,"Patient ID"),t.qZA(),t._UZ(35,"input",26),t.qZA()(),t.TgZ(36,"div",6)(37,"label",27),t._uU(38,"Date of Appointment"),t.qZA(),t.TgZ(39,"input",28),t.NdJ("change",function(){return t.CHM(e),t.oxw().getAvailabilityWindows()}),t.qZA()(),t.YNc(40,ct,8,4,"div",29),t.YNc(41,ht,13,4,"div",30),t.TgZ(42,"div",6)(43,"label",31),t._uU(44,"Edit History"),t.qZA(),t._UZ(45,"input",32),t.qZA(),t.TgZ(46,"div",33)(47,"div",34),t.YNc(48,vt,2,0,"button",35),t.YNc(49,Zt,2,0,"button",36),t.TgZ(50,"button",37),t.NdJ("click",function(){return t.CHM(e),t.oxw().close()}),t._uU(51,"Close"),t.qZA()()()()}if(2&n){const e=t.oxw();t.Q6J("formGroup",e.appointmentForm),t.xp6(5),t.Q6J("ngIf",e.appointmentForm.controls.meetingTitle.touched&&e.appointmentForm.controls.meetingTitle.invalid),t.xp6(5),t.Q6J("ngIf",e.appointmentForm.controls.description.touched&&e.appointmentForm.controls.description.invalid),t.xp6(6),t.Q6J("value",""),t.xp6(2),t.Q6J("ngForOf",e.data.employeeNames),t.xp6(1),t.Q6J("ngIf",e.appointmentForm.controls.physician.touched&&e.appointmentForm.controls.physician.invalid),t.xp6(10),t.Q6J("value",e.data.appointment.patientId),t.xp6(1),t.Oqu(e.patientName),t.xp6(1),t.Q6J("ngIf",e.appointmentForm.controls.patient.touched&&e.appointmentForm.controls.patient.invalid),t.xp6(8),t.Q6J("min",e.today)("max",e.next3months),t.xp6(1),t.Q6J("ngIf",!e.editable),t.xp6(1),t.Q6J("ngIf",e.windows.length>0||e.editable),t.xp6(7),t.Q6J("ngIf","PENDING"===e.data.appointment.status),t.xp6(1),t.Q6J("ngIf",t.DdM(15,At).includes(e.data.appointment.status))}}let Tt=(()=>{class n{constructor(e,i,l,r,m,h,Z){this.snackbar=e,this.datePipe=i,this.apptService=l,this.dialogRef=r,this.data=m,this.locale=h,this.formBuilder=Z,this.windows=[],this.startTimes=[],this.endTimes=[],this.cancelMode=!1,this.date=this.datePipe.transform(new Date,"yyyy-MM-dd");let u=new Date;this.next3months=this.datePipe.transform(new Date(u.setMonth(u.getMonth()+3)),"yyyy-MM-dd"),this.patientName=this.data.user.title+". "+this.data.user.firstName+" "+this.data.user.lastName,this.editable="PENDING"!==this.data.appointment.status,this.appointmentForm=this.formBuilder.group({meetingTitle:[{value:m.appointment.title,disabled:this.editable},[a.kI.required,c.O]],description:[{value:m.appointment.description,disabled:this.editable},[a.kI.required,c.O]],aptDate:[{value:m.appointment.date,disabled:this.editable},[a.kI.required]],physician:[{value:m.appointment.employeeId,disabled:this.editable},[a.kI.required]],employeeId:[{value:m.appointment.employeeId,disabled:!0}],patient:[{value:m.user.patientId,disabled:!0}],patientId:[{value:m.user.patientId,disabled:!0}],window:[{value:-1,disabled:!0},[a.kI.required,_.q]],startsAt:[{value:-1,disabled:this.editable},[a.kI.required,_.q]],endsAt:[{value:-1,disabled:!0},[a.kI.required,_.q]],editHistory:[m.appointment.editHistory||"Not Applicable"]})}ngOnInit(){if(this.editable){let e=this.data.appointment.time.split(" to ");this.startTimes=[e[0]],this.appointmentForm.controls.startsAt.setValue(0),this.endTimes=[e[1]],this.appointmentForm.controls.endsAt.setValue(0)}else this.getAvailabilityWindows(this.data.appointment)}get today(){return(0,p.p6)(new Date,"yyyy-MM-dd",this.locale)}getAvailabilityWindows(e){const i={};if(e)i.date=e.date,i.employeeId=e.employeeId,i.patientId=e.patientId,i.skip=e.appointmentId;else{let l=this.appointmentForm.getRawValue();i.date=l.aptDate,i.employeeId=l.employeeId,i.patientId=l.patientId,i.skip=this.data.appointment.appointmentId}this.apptService.getAvailabilityWindows(i).subscribe(l=>{this.windows=l,this.windows.length>0&&!this.editable&&this.appointmentForm.controls.window.enable();let r=this.data.appointment.time.split(" to "),m=this.windows.indexOf(this.windows.find(u=>u.startTimes.includes(r[0].trim())));this.appointmentForm.controls.window.setValue(m),this.populateTimes();let h=this.startTimes.indexOf(this.startTimes.find(u=>u==r[0].trim()));this.appointmentForm.controls.startsAt.setValue(h);let Z=this.endTimes.indexOf(this.endTimes.find(u=>u==r[1].trim()));this.appointmentForm.controls.endsAt.setValue(Z)})}showPhysicianId(){this.appointmentForm.controls.employeeId.setValue(this.appointmentForm.value.physician)}populateTimes(){let e=this.appointmentForm.controls.window.value;e>=0?(this.startTimes=this.windows[e].startTimes,this.endTimes=this.windows[e].endTimes):(this.startTimes=[],this.endTimes=[])}updateEndTimes(){let e=this.appointmentForm.controls.window.value,i=this.appointmentForm.controls.startsAt.value;e>=0&&i>=0?(this.appointmentForm.controls.endsAt.enable(),this.endTimes=this.windows[e].endTimes.slice(i),this.appointmentForm.controls.endsAt.setValue(0)):(this.endTimes=[],this.appointmentForm.controls.endsAt.setValue(-1),this.appointmentForm.controls.endsAt.disable())}getAppointmentReady(){const e=this.appointmentForm.getRawValue();let i={appointmentId:this.data.appointment.appointmentId,time:this.startTimes[e.startsAt]+" to "+this.endTimes[e.endsAt]};for(let l of"title=meetingTitle patientId=patientId description=description employeeId=physician date=aptDate editedBy=patientId".split(" ")){let r=l.split("=");i[r[0]]=e[r[1]]}return i}editAppointment(){let e=this.getAppointmentReady();e.editHistory="Edited by "+this.patientName+" (Patient) on "+this.appointmentForm.getRawValue().aptDate,e.status="PENDING",this.apptService.updateAppointment(e).subscribe(i=>{this.snackbar.open("Appointment Successfully Updated !","",{duration:3e3}),this.dialogRef.close()})}cancelAppointment(e){if(this.cancelMode=!1,""==e)return;let i=this.data.appointment;i.editHistory="Cancelled by "+this.patientName+" (Patient) on "+this.appointmentForm.getRawValue().aptDate+" for reason '"+e+"'",i.status="CANCELLED",this.apptService.updateAppointment(i).subscribe(l=>{this.snackbar.open("Appointment Successfully Cancelled !","",{duration:3e3}),this.dialogRef.close()})}close(){this.dialogRef.close()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(x.ux),t.Y36(p.uU),t.Y36(T.H),t.Y36(g.so),t.Y36(g.WI),t.Y36(t.soG),t.Y36(a.qu))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-appointment-details"]],decls:5,vars:2,consts:[["label","Appointment Details"],[1,"example-card"],[3,"type","reason",4,"ngIf"],[3,"formGroup",4,"ngIf"],[3,"type","reason"],[3,"formGroup"],[1,"mb-4"],["for","meetingTitle",1,"form-label"],["type","text","formControlName","meetingTitle","id","meetingTitle",1,"form-control"],[4,"ngIf"],["for","description",1,"form-label"],["type","text","formControlName","description","id","description",1,"form-control"],[1,"row","mb-4"],[1,"col","col-md-8"],["for","physician",1,"form-label"],["formControlName","physician",1,"form-control",3,"change"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["class","text-danger",4,"ngIf"],[1,"col","col-md-4"],["for","employeeId",1,"form-label"],["type","text","formControlName","employeeId",1,"form-control"],[1,"col","col-md-8","col-sm-12"],["for","patient",1,"form-label"],["formControlName","patient","readonly","readonly",1,"form-control"],[1,"col","col-md-4","col-sm-12"],["type","text","formControlName","patientId",1,"form-control"],["for","aptDate",1,"form-label"],["type","date","formControlName","aptDate",1,"form-control",3,"min","max","change"],["class","mb-4",4,"ngIf"],["class","row mb-4 form-group",4,"ngIf"],["for","editHistory",1,"form-label"],["type","text","formControlName","editHistory","id","editHistory","readonly","readonly",1,"form-control"],[1,"row","text-center","form-group","mt-4"],[1,"col","col-md-12","col-sm-12"],["class","btn btn-success mb-2 me-3",3,"click",4,"ngIf"],["class","btn btn-danger mb-2 ms-3 me-3",3,"click",4,"ngIf"],[1,"btn","btn-warning","mb-2","ms-3",3,"click"],[1,"text-danger"],["for","window",1,"form-label"],["formControlName","window",1,"form-control",3,"change"],[3,"value",4,"ngIf"],[1,"row","mb-4","form-group"],[1,"col","col-md-6","col-sm-12"],["for","startsAt",1,"form-label"],["formControlName","startsAt",1,"form-control",3,"change"],["for","endsAt",1,"form-label"],["formControlName","endsAt",1,"form-control"],[1,"btn","btn-success","mb-2","me-3",3,"click"],[1,"btn","btn-danger","mb-2","ms-3","me-3",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"mat-tab-group")(1,"mat-tab",0)(2,"mat-card",1),t.YNc(3,tt,1,1,"ask-reason",2),t.YNc(4,bt,52,16,"form",3),t.qZA()()()),2&e&&(t.xp6(3),t.Q6J("ngIf",i.cancelMode),t.xp6(1),t.Q6J("ngIf",!i.cancelMode))},directives:[A.SP,A.uX,X.a8,p.O5,K.p,a._Y,a.JL,a.sg,a.Fj,a.JJ,a.u,a.EJ,a.YN,a.Kr,p.sg],pipes:[p.gd],styles:[""]}),n})();function yt(n,o){1&n&&(t.TgZ(0,"option",16),t._uU(1,"No Meeting Titles Available"),t.qZA())}function Ct(n,o){1&n&&(t.TgZ(0,"option",16),t._uU(1,"Select Meeting Title"),t.qZA())}function xt(n,o){if(1&n&&(t.TgZ(0,"option",23),t._uU(1),t.ALo(2,"titlecase"),t.qZA()),2&n){const e=o.$implicit;t.Q6J("value",e),t.xp6(1),t.Oqu(t.lcZ(2,2,e))}}function Nt(n,o){1&n&&(t.TgZ(0,"small",37),t._uU(1,"Meeting Title cannot be blank"),t.qZA())}function wt(n,o){if(1&n&&(t.TgZ(0,"div"),t.YNc(1,Nt,2,0,"small",17),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",null==e.f("meetingTitle").errors?null:e.f("meetingTitle").errors.required)}}function qt(n,o){1&n&&(t.TgZ(0,"small",37),t._uU(1,"Description cannot be blank"),t.qZA())}function It(n,o){if(1&n&&(t.TgZ(0,"div"),t.YNc(1,qt,2,0,"small",17),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",null==e.f("description").errors?null:e.f("description").errors.required)}}function Dt(n,o){if(1&n&&(t.TgZ(0,"option",23),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.Q6J("value",e.employeeId),t.xp6(1),t.Oqu(e.name)}}function Ut(n,o){1&n&&(t.TgZ(0,"small",37),t._uU(1,"Physician cannot be empty"),t.qZA())}function Pt(n,o){1&n&&(t.TgZ(0,"small",37),t._uU(1,"Patient cannot be empty"),t.qZA())}function Jt(n,o){1&n&&(t.TgZ(0,"option",23),t._uU(1,"No Window Available"),t.qZA()),2&n&&t.Q6J("value",-1)}function Mt(n,o){1&n&&(t.TgZ(0,"option",23),t._uU(1,"Select Window"),t.qZA()),2&n&&t.Q6J("value",-1)}function kt(n,o){if(1&n&&(t.TgZ(0,"option",23),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.Q6J("value",o.index),t.xp6(1),t.Oqu(e.label)}}function Ot(n,o){1&n&&(t.TgZ(0,"small",37),t._uU(1," Please select availability window"),t.qZA())}function Ft(n,o){1&n&&(t.TgZ(0,"option",23),t._uU(1,"Select Start Time"),t.qZA()),2&n&&t.Q6J("value",-1)}function Qt(n,o){if(1&n&&(t.TgZ(0,"option",23),t._uU(1),t.ALo(2,"uppercase"),t.qZA()),2&n){const e=o.$implicit;t.Q6J("value",o.index),t.xp6(1),t.Oqu(t.lcZ(2,2,e))}}function Yt(n,o){1&n&&(t.TgZ(0,"option",23),t._uU(1,"Select End Time"),t.qZA()),2&n&&t.Q6J("value",-1)}function Et(n,o){if(1&n&&(t.TgZ(0,"option",23),t._uU(1),t.ALo(2,"uppercase"),t.qZA()),2&n){const e=o.$implicit;t.Q6J("value",o.index),t.xp6(1),t.Oqu(t.lcZ(2,2,e))}}function St(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",12)(1,"div",38)(2,"label",39),t._uU(3,"Start Time"),t.qZA(),t.TgZ(4,"select",40),t.NdJ("change",function(){return t.CHM(e),t.oxw().updateEndTimes()}),t.YNc(5,Ft,2,1,"option",29),t.YNc(6,Qt,3,4,"option",8),t.qZA()(),t.TgZ(7,"div",38)(8,"label",41),t._uU(9,"End Time"),t.qZA(),t.TgZ(10,"select",42),t.YNc(11,Yt,2,1,"option",29),t.YNc(12,Et,3,4,"option",8),t.qZA()()()}if(2&n){const e=t.oxw();t.xp6(5),t.Q6J("ngIf",e.startTimes.length>0),t.xp6(1),t.Q6J("ngForOf",e.startTimes),t.xp6(5),t.Q6J("ngIf",0==e.endTimes.length),t.xp6(1),t.Q6J("ngForOf",e.endTimes)}}let Vt=(()=>{class n{constructor(e,i,l,r,m,h,Z){this.snackbar=e,this.datePipe=i,this.apptService=l,this.dialogRef=r,this.data=m,this.locale=h,this.formBuilder=Z,this.meetingTitles=[],this.windows=[],this.startTimes=[],this.endTimes=[],this.date=this.datePipe.transform(new Date,"yyyy-MM-dd");let u=new Date;this.next3months=this.datePipe.transform(new Date(u.setMonth(u.getMonth()+3)),"yyyy-MM-dd"),this.patientName=this.data.user.title+". "+this.data.user.firstName+" "+this.data.user.lastName,this.appointmentForm=this.formBuilder.group({meetingTitle:["",[a.kI.required]],description:["",[a.kI.required,c.O]],aptDate:[this.date,[a.kI.required]],physician:["",[a.kI.required]],employeeId:[{value:"",disabled:!0}],patient:[{value:m.user.patientId,disabled:!0}],patientId:[{value:m.user.patientId,disabled:!0}],window:[{value:-1,disabled:!0},[a.kI.required,_.q]],startsAt:[-1,[a.kI.required,_.q]],endsAt:[{value:-1,disabled:!0},[a.kI.required,_.q]],editHistory:["Not Applicable"]})}get today(){return(0,p.p6)(new Date,"yyyy-MM-dd",this.locale)}ngOnInit(){this.getMeetingTitlesByPatientId(),this.getAvailabilityWindows()}f(e){return this.appointmentForm.controls[e]}getMeetingTitlesByPatientId(){this.apptService.getMeetingTitlesByPatientId(this.data.user.patientId).subscribe(e=>{this.meetingTitles=e})}getAvailabilityWindows(){let e=this.appointmentForm.getRawValue();const i={date:e.aptDate,employeeId:e.physician,patientId:this.data.user.patientId};""===i.employeeId?(this.windows=[],this.appointmentForm.controls.window.setValue(-1),this.appointmentForm.controls.window.disable()):this.apptService.getAvailabilityWindows(i).subscribe(l=>{this.appointmentForm.controls.window.enable(),this.windows=l}),this.populateTimes()}showPhysicianId(){this.appointmentForm.controls.employeeId.setValue(this.appointmentForm.value.physician)}populateTimes(){let e=this.appointmentForm.controls.window.value;e>=0?(this.startTimes=this.windows[e].startTimes,this.endTimes=this.windows[e].endTimes):(this.startTimes=[],this.endTimes=[])}updateEndTimes(){let e=this.appointmentForm.controls.window.value,i=this.appointmentForm.controls.startsAt.value;e>=0&&i>=0?(this.appointmentForm.controls.endsAt.enable(),this.endTimes=this.windows[e].endTimes.slice(i),this.appointmentForm.controls.endsAt.setValue(0)):(this.endTimes=[],this.appointmentForm.controls.endsAt.setValue(-1),this.appointmentForm.controls.endsAt.disable())}getAppointmentReady(){const e=this.appointmentForm.getRawValue();let i={time:this.startTimes[e.startsAt]+" to "+this.endTimes[e.endsAt],isDataCollectionAppt:!0};for(let l of"title=meetingTitle patientId=patientId description=description employeeId=physician date=aptDate editedBy=patientId".split(" ")){let r=l.split("=");i[r[0]]=e[r[1]]}return i}bookAppointment(){let e=this.getAppointmentReady();e.editHistory="Requested by "+this.patientName+" (Patient) on "+this.appointmentForm.getRawValue().aptDate,e.status="PENDING",this.apptService.addAppointment(e).subscribe(i=>{this.snackbar.open("Appointment Successfully Requested !","",{duration:3e3}),this.dialogRef.close()})}close(){this.dialogRef.close()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(x.ux),t.Y36(p.uU),t.Y36(T.H),t.Y36(g.so),t.Y36(g.WI),t.Y36(t.soG),t.Y36(a.qu))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-data-collection-appointment"]],decls:66,vars:19,consts:[[1,"card","mb-4",2,"padding","1em","border","none"],[1,"text-center"],[1,"text-dark","text-muted","mb-4"],["autofocus","off",3,"formGroup"],[1,"mb-4"],["for","meetingTitle",1,"form-label"],["formControlName","meetingTitle","id","meetingTitle",1,"form-control"],["value","",4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["for","description",1,"form-label"],["type","text","formControlName","description","id","description",1,"form-control"],[1,"row","mb-4"],[1,"col","col-md-8"],["for","physician",1,"form-label"],["formControlName","physician",1,"form-control",3,"change"],["value",""],["class","text-danger",4,"ngIf"],[1,"col","col-md-4"],["for","employeeId",1,"form-label"],["type","text","formControlName","employeeId","readonly","",1,"form-control"],["for","patient",1,"form-label"],["formControlName","patient",1,"form-control"],[3,"value"],["type","text","formControlName","patientId","readonly","",1,"form-control"],["for","aptDate",1,"form-label"],["type","date","formControlName","aptDate",1,"form-control",3,"min","max","change"],["for","window",1,"form-label"],["formControlName","window",1,"form-control",3,"change"],[3,"value",4,"ngIf"],["class","row mb-4",4,"ngIf"],["for","editHistory",1,"form-label"],["type","text","id","editHistory","readonly","readonly","value","Not Applicable",1,"form-control"],[1,"row","mt-4","mb-2"],[1,"col","col-md-12","text-center"],[1,"btn","btn-success","me-3",3,"disabled","click"],[1,"btn","btn-warning","ms-3",3,"click"],[1,"text-danger"],[1,"col","col-md-6"],["for","startsAt",1,"form-label"],["formControlName","startsAt",1,"form-control",3,"change"],["for","endsAt",1,"form-label"],["formControlName","endsAt",1,"form-control"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h1",2),t._uU(3,"Data Collection Appointment"),t.qZA()(),t.TgZ(4,"form",3)(5,"div",4)(6,"label",5),t._uU(7,"Meeting Title"),t.qZA(),t.TgZ(8,"select",6),t.YNc(9,yt,2,0,"option",7),t.YNc(10,Ct,2,0,"option",7),t.YNc(11,xt,3,4,"option",8),t.qZA(),t.YNc(12,wt,2,1,"div",9),t.qZA(),t.TgZ(13,"div",4)(14,"label",10),t._uU(15,"Description"),t.qZA(),t._UZ(16,"textarea",11),t.YNc(17,It,2,1,"div",9),t.qZA(),t.TgZ(18,"div",12)(19,"div",13)(20,"label",14),t._uU(21,"Physician Name"),t.qZA(),t.TgZ(22,"select",15),t.NdJ("change",function(){return i.getAvailabilityWindows(),i.showPhysicianId()}),t.TgZ(23,"option",16),t._uU(24,"Select Physician"),t.qZA(),t.YNc(25,Dt,2,2,"option",8),t.qZA(),t.YNc(26,Ut,2,0,"small",17),t.qZA(),t.TgZ(27,"div",18)(28,"label",19),t._uU(29,"Physician ID"),t.qZA(),t._UZ(30,"input",20),t.qZA()(),t.TgZ(31,"div",12)(32,"div",13)(33,"label",21),t._uU(34,"Patient Name"),t.qZA(),t.TgZ(35,"select",22)(36,"option",23),t._uU(37),t.qZA()(),t.YNc(38,Pt,2,0,"small",17),t.qZA(),t.TgZ(39,"div",18)(40,"label",19),t._uU(41,"Patient ID"),t.qZA(),t._UZ(42,"input",24),t.qZA()(),t.TgZ(43,"div",4)(44,"label",25),t._uU(45,"Date of Appointment"),t.qZA(),t.TgZ(46,"input",26),t.NdJ("change",function(){return i.getAvailabilityWindows()}),t.qZA()(),t.TgZ(47,"div",4)(48,"label",27),t._uU(49,"Availability Window"),t.qZA(),t.TgZ(50,"select",28),t.NdJ("change",function(){return i.populateTimes()}),t.YNc(51,Jt,2,1,"option",29),t.YNc(52,Mt,2,1,"option",29),t.YNc(53,kt,2,2,"option",8),t.qZA(),t.YNc(54,Ot,2,0,"small",17),t.qZA(),t.YNc(55,St,13,4,"div",30),t.TgZ(56,"div",4)(57,"label",31),t._uU(58,"Edit History"),t.qZA(),t._UZ(59,"input",32),t.qZA(),t.TgZ(60,"div",33)(61,"div",34)(62,"button",35),t.NdJ("click",function(){return i.bookAppointment()}),t._uU(63,"Book"),t.qZA(),t.TgZ(64,"button",36),t.NdJ("click",function(){return i.close()}),t._uU(65,"Close"),t.qZA()()()()()),2&e&&(t.xp6(4),t.Q6J("formGroup",i.appointmentForm),t.xp6(5),t.Q6J("ngIf",0==i.meetingTitles.length),t.xp6(1),t.Q6J("ngIf",i.meetingTitles.length>0),t.xp6(1),t.Q6J("ngForOf",i.meetingTitles),t.xp6(1),t.Q6J("ngIf",i.f("meetingTitle").touched&&i.f("meetingTitle").invalid),t.xp6(5),t.Q6J("ngIf",i.f("description").touched&&i.f("description").invalid),t.xp6(8),t.Q6J("ngForOf",i.data.employeeNames),t.xp6(1),t.Q6J("ngIf",i.f("physician").touched&&i.f("physician").invalid),t.xp6(10),t.Q6J("value",i.data.user.patientId),t.xp6(1),t.Oqu(i.patientName),t.xp6(1),t.Q6J("ngIf",i.f("patient").touched&&i.f("patient").invalid),t.xp6(8),t.Q6J("min",i.today)("max",i.next3months),t.xp6(5),t.Q6J("ngIf",0==i.windows.length),t.xp6(1),t.Q6J("ngIf",i.windows.length>0),t.xp6(1),t.Q6J("ngForOf",i.windows),t.xp6(1),t.Q6J("ngIf",i.f("window").touched&&-1==i.f("window").value),t.xp6(1),t.Q6J("ngIf",i.windows.length>0&&-1!=i.f("window").value),t.xp6(7),t.Q6J("disabled",i.appointmentForm.invalid))},directives:[a._Y,a.JL,a.sg,a.EJ,a.JJ,a.u,p.O5,a.YN,a.Kr,p.sg,a.Fj],pipes:[p.rS,p.gd],styles:[""]}),n})();function Ht(n,o){1&n&&(t.TgZ(0,"small",36),t._uU(1,"Meeting Title cannot be blank"),t.qZA())}function Rt(n,o){if(1&n&&(t.TgZ(0,"div"),t.YNc(1,Ht,2,0,"small",16),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",null==e.f("meetingTitle").errors?null:e.f("meetingTitle").errors.required)}}function Lt(n,o){1&n&&(t.TgZ(0,"small",36),t._uU(1,"Description cannot be blank"),t.qZA())}function Gt(n,o){if(1&n&&(t.TgZ(0,"div"),t.YNc(1,Lt,2,0,"small",16),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",null==e.f("description").errors?null:e.f("description").errors.required)}}function $t(n,o){if(1&n&&(t.TgZ(0,"option",22),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.Q6J("value",e.employeeId),t.xp6(1),t.Oqu(e.name)}}function Bt(n,o){1&n&&(t.TgZ(0,"small",36),t._uU(1,"Physician cannot be empty"),t.qZA())}function jt(n,o){1&n&&(t.TgZ(0,"small",36),t._uU(1,"Patient cannot be empty"),t.qZA())}function zt(n,o){1&n&&(t.TgZ(0,"option",22),t._uU(1,"No Window Available"),t.qZA()),2&n&&t.Q6J("value",-1)}function Wt(n,o){1&n&&(t.TgZ(0,"option",22),t._uU(1,"Select Window"),t.qZA()),2&n&&t.Q6J("value",-1)}function Xt(n,o){if(1&n&&(t.TgZ(0,"option",22),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.Q6J("value",o.index),t.xp6(1),t.Oqu(e.label)}}function Kt(n,o){1&n&&(t.TgZ(0,"small",36),t._uU(1," Please select availability window"),t.qZA())}function te(n,o){1&n&&(t.TgZ(0,"option",22),t._uU(1,"Select Start Time"),t.qZA()),2&n&&t.Q6J("value",-1)}function ee(n,o){if(1&n&&(t.TgZ(0,"option",22),t._uU(1),t.ALo(2,"uppercase"),t.qZA()),2&n){const e=o.$implicit;t.Q6J("value",o.index),t.xp6(1),t.Oqu(t.lcZ(2,2,e))}}function ne(n,o){1&n&&(t.TgZ(0,"option",22),t._uU(1,"Select End Time"),t.qZA()),2&n&&t.Q6J("value",-1)}function ie(n,o){if(1&n&&(t.TgZ(0,"option",22),t._uU(1),t.ALo(2,"uppercase"),t.qZA()),2&n){const e=o.$implicit;t.Q6J("value",o.index),t.xp6(1),t.Oqu(t.lcZ(2,2,e))}}function oe(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",10)(1,"div",37)(2,"label",38),t._uU(3,"Start Time"),t.qZA(),t.TgZ(4,"select",39),t.NdJ("change",function(){return t.CHM(e),t.oxw().updateEndTimes()}),t.YNc(5,te,2,1,"option",28),t.YNc(6,ee,3,4,"option",15),t.qZA()(),t.TgZ(7,"div",37)(8,"label",40),t._uU(9,"End Time"),t.qZA(),t.TgZ(10,"select",41),t.YNc(11,ne,2,1,"option",28),t.YNc(12,ie,3,4,"option",15),t.qZA()()()}if(2&n){const e=t.oxw();t.xp6(5),t.Q6J("ngIf",e.startTimes.length>0),t.xp6(1),t.Q6J("ngForOf",e.startTimes),t.xp6(5),t.Q6J("ngIf",0==e.endTimes.length),t.xp6(1),t.Q6J("ngForOf",e.endTimes)}}let ae=(()=>{class n{constructor(e,i,l,r,m,h,Z){this.snackbar=e,this.datePipe=i,this.apptService=l,this.dialogRef=r,this.data=m,this.locale=h,this.formBuilder=Z,this.windows=[],this.startTimes=[],this.endTimes=[],this.date=this.datePipe.transform(new Date,"yyyy-MM-dd");let u=new Date;this.next3months=this.datePipe.transform(new Date(u.setMonth(u.getMonth()+3)),"yyyy-MM-dd"),this.patientName=this.data.user.title+". "+this.data.user.firstName+" "+this.data.user.lastName,this.appointmentForm=this.formBuilder.group({meetingTitle:["",[a.kI.required,c.O]],description:["",[a.kI.required,c.O]],aptDate:[this.date,[a.kI.required]],physician:["",[a.kI.required]],employeeId:[{value:"",disabled:!0}],patient:[{value:m.user.patientId,disabled:!0}],patientId:[{value:m.user.patientId,disabled:!0}],window:[{value:-1,disabled:!0},[a.kI.required,_.q]],startsAt:[-1,[a.kI.required,_.q]],endsAt:[{value:-1,disabled:!0},[a.kI.required,_.q]],editHistory:["Not Applicable"]})}get today(){return(0,p.p6)(new Date,"yyyy-MM-dd",this.locale)}ngOnInit(){this.getAvailabilityWindows()}f(e){return this.appointmentForm.controls[e]}getAvailabilityWindows(){let e=this.appointmentForm.getRawValue();const i={date:e.aptDate,employeeId:e.physician,patientId:this.data.user.patientId};""===i.employeeId?(this.windows=[],this.appointmentForm.controls.window.setValue(-1),this.appointmentForm.controls.window.disable()):this.apptService.getAvailabilityWindows(i).subscribe(l=>{this.appointmentForm.controls.window.enable(),this.windows=l}),this.populateTimes()}showPhysicianId(){this.appointmentForm.controls.employeeId.setValue(this.appointmentForm.value.physician)}populateTimes(){let e=this.appointmentForm.controls.window.value;e>=0?(this.startTimes=this.windows[e].startTimes,this.endTimes=this.windows[e].endTimes):(this.startTimes=[],this.endTimes=[])}updateEndTimes(){let e=this.appointmentForm.controls.window.value,i=this.appointmentForm.controls.startsAt.value;e>=0&&i>=0?(this.appointmentForm.controls.endsAt.enable(),this.endTimes=this.windows[e].endTimes.slice(i),this.appointmentForm.controls.endsAt.setValue(0)):(this.endTimes=[],this.appointmentForm.controls.endsAt.setValue(-1),this.appointmentForm.controls.endsAt.disable())}getAppointmentReady(){const e=this.appointmentForm.getRawValue();let i={time:this.startTimes[e.startsAt]+" to "+this.endTimes[e.endsAt]};for(let l of"title=meetingTitle patientId=patientId description=description employeeId=physician date=aptDate editedBy=patientId".split(" ")){let r=l.split("=");i[r[0]]=e[r[1]]}return i}bookAppointment(){let e=this.getAppointmentReady();e.editHistory="Requested by "+this.patientName+" (Patient) on "+this.appointmentForm.getRawValue().aptDate,e.status="PENDING",this.apptService.addAppointment(e).subscribe(i=>{this.snackbar.open("Appointment Successfully Requested !","",{duration:3e3}),this.dialogRef.close()})}close(){this.dialogRef.close()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(x.ux),t.Y36(p.uU),t.Y36(T.H),t.Y36(g.so),t.Y36(g.WI),t.Y36(t.soG),t.Y36(a.qu))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-appointment-dialog"]],decls:63,vars:16,consts:[[1,"card","mb-4",2,"padding","1em","border","none"],[1,"text-center"],[1,"text-dark","text-muted","mb-4"],["autofocus","off",3,"formGroup"],[1,"mb-4"],["for","meetingTitle",1,"form-label"],["type","text","formControlName","meetingTitle","id","meetingTitle",1,"form-control"],[4,"ngIf"],["for","description",1,"form-label"],["type","text","formControlName","description","id","description",1,"form-control"],[1,"row","mb-4"],[1,"col","col-md-8"],["for","physician",1,"form-label"],["formControlName","physician",1,"form-control",3,"change"],["value",""],[3,"value",4,"ngFor","ngForOf"],["class","text-danger",4,"ngIf"],[1,"col","col-md-4"],["for","employeeId",1,"form-label"],["type","text","formControlName","employeeId","readonly","",1,"form-control"],["for","patient",1,"form-label"],["formControlName","patient",1,"form-control"],[3,"value"],["type","text","formControlName","patientId","readonly","",1,"form-control"],["for","aptDate",1,"form-label"],["type","date","formControlName","aptDate",1,"form-control",3,"min","max","change"],["for","window",1,"form-label"],["formControlName","window",1,"form-control",3,"change"],[3,"value",4,"ngIf"],["class","row mb-4",4,"ngIf"],["for","editHistory",1,"form-label"],["type","text","id","editHistory","readonly","readonly","value","Not Applicable",1,"form-control"],[1,"row","mt-4","mb-2"],[1,"col","col-md-12","text-center"],[1,"btn","btn-success","me-3",3,"disabled","click"],[1,"btn","btn-warning","ms-3",3,"click"],[1,"text-danger"],[1,"col","col-md-6"],["for","startsAt",1,"form-label"],["formControlName","startsAt",1,"form-control",3,"change"],["for","endsAt",1,"form-label"],["formControlName","endsAt",1,"form-control"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h1",2),t._uU(3,"Book Appointment"),t.qZA()(),t.TgZ(4,"form",3)(5,"div",4)(6,"label",5),t._uU(7,"Meeting Title"),t.qZA(),t._UZ(8,"input",6),t.YNc(9,Rt,2,1,"div",7),t.qZA(),t.TgZ(10,"div",4)(11,"label",8),t._uU(12,"Description"),t.qZA(),t._UZ(13,"textarea",9),t.YNc(14,Gt,2,1,"div",7),t.qZA(),t.TgZ(15,"div",10)(16,"div",11)(17,"label",12),t._uU(18,"Physician Name"),t.qZA(),t.TgZ(19,"select",13),t.NdJ("change",function(){return i.getAvailabilityWindows(),i.showPhysicianId()}),t.TgZ(20,"option",14),t._uU(21,"Select Physician"),t.qZA(),t.YNc(22,$t,2,2,"option",15),t.qZA(),t.YNc(23,Bt,2,0,"small",16),t.qZA(),t.TgZ(24,"div",17)(25,"label",18),t._uU(26,"Physician ID"),t.qZA(),t._UZ(27,"input",19),t.qZA()(),t.TgZ(28,"div",10)(29,"div",11)(30,"label",20),t._uU(31,"Patient Name"),t.qZA(),t.TgZ(32,"select",21)(33,"option",22),t._uU(34),t.qZA()(),t.YNc(35,jt,2,0,"small",16),t.qZA(),t.TgZ(36,"div",17)(37,"label",18),t._uU(38,"Patient ID"),t.qZA(),t._UZ(39,"input",23),t.qZA()(),t.TgZ(40,"div",4)(41,"label",24),t._uU(42,"Date of Appointment"),t.qZA(),t.TgZ(43,"input",25),t.NdJ("change",function(){return i.getAvailabilityWindows()}),t.qZA()(),t.TgZ(44,"div",4)(45,"label",26),t._uU(46,"Availability Window"),t.qZA(),t.TgZ(47,"select",27),t.NdJ("change",function(){return i.populateTimes()}),t.YNc(48,zt,2,1,"option",28),t.YNc(49,Wt,2,1,"option",28),t.YNc(50,Xt,2,2,"option",15),t.qZA(),t.YNc(51,Kt,2,0,"small",16),t.qZA(),t.YNc(52,oe,13,4,"div",29),t.TgZ(53,"div",4)(54,"label",30),t._uU(55,"Edit History"),t.qZA(),t._UZ(56,"input",31),t.qZA(),t.TgZ(57,"div",32)(58,"div",33)(59,"button",34),t.NdJ("click",function(){return i.bookAppointment()}),t._uU(60,"Book"),t.qZA(),t.TgZ(61,"button",35),t.NdJ("click",function(){return i.close()}),t._uU(62,"Close"),t.qZA()()()()()),2&e&&(t.xp6(4),t.Q6J("formGroup",i.appointmentForm),t.xp6(5),t.Q6J("ngIf",i.f("meetingTitle").touched&&i.f("meetingTitle").invalid),t.xp6(5),t.Q6J("ngIf",i.f("description").touched&&i.f("description").invalid),t.xp6(8),t.Q6J("ngForOf",i.data.employeeNames),t.xp6(1),t.Q6J("ngIf",i.f("physician").touched&&i.f("physician").invalid),t.xp6(10),t.Q6J("value",i.data.user.patientId),t.xp6(1),t.Oqu(i.patientName),t.xp6(1),t.Q6J("ngIf",i.f("patient").touched&&i.f("patient").invalid),t.xp6(8),t.Q6J("min",i.today)("max",i.next3months),t.xp6(5),t.Q6J("ngIf",0==i.windows.length),t.xp6(1),t.Q6J("ngIf",i.windows.length>0),t.xp6(1),t.Q6J("ngForOf",i.windows),t.xp6(1),t.Q6J("ngIf",i.f("window").touched&&-1==i.f("window").value),t.xp6(1),t.Q6J("ngIf",i.windows.length>0&&-1!=i.f("window").value),t.xp6(7),t.Q6J("disabled",i.appointmentForm.invalid))},directives:[a._Y,a.JL,a.sg,a.Fj,a.JJ,a.u,p.O5,a.EJ,a.YN,a.Kr,p.sg],pipes:[p.gd],styles:[""]}),n})();var b=s(7278),I=s(4566),N=s(7322),J=s(7531);function le(n,o){if(1&n&&t._UZ(0,"full-calendar",28),2&n){const e=t.oxw();t.Q6J("options",e.calendarOptions)}}function re(n,o){1&n&&(t.TgZ(0,"th",29),t._uU(1," Title "),t.qZA())}function se(n,o){if(1&n&&(t.TgZ(0,"td",30),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.hij(" ",e.title," ")}}function pe(n,o){1&n&&(t.TgZ(0,"th",29),t._uU(1," Physician "),t.qZA())}function me(n,o){if(1&n&&(t.TgZ(0,"td",30),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.hij(" ",e.employeeName," ")}}function de(n,o){1&n&&(t.TgZ(0,"th",29),t._uU(1," Date "),t.qZA())}function ce(n,o){if(1&n&&(t.TgZ(0,"td",30),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.hij("",e.date," ")}}function ue(n,o){1&n&&(t.TgZ(0,"th",29),t._uU(1," Time "),t.qZA())}function fe(n,o){if(1&n&&(t.TgZ(0,"td",30),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.hij("",e.time," ")}}function ge(n,o){1&n&&(t.TgZ(0,"th",29),t._uU(1," Status "),t.qZA())}function _e(n,o){if(1&n&&(t.TgZ(0,"td",31),t._uU(1),t.ALo(2,"titlecase"),t.qZA()),2&n){const e=o.$implicit,i=t.oxw();t.Q6J("ngClass",i.getColor(e.status)),t.xp6(1),t.hij(" ",t.lcZ(2,2,e.status.replace("_"," "))," ")}}function he(n,o){1&n&&(t.TgZ(0,"th",29),t._uU(1," Action "),t.qZA())}function ve(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"td",30)(1,"button",32),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.oxw().viewDetails(r)}),t._uU(2,"View"),t.qZA()()}}function Ze(n,o){1&n&&t._UZ(0,"tr",33)}const Ae=function(n){return{todaysAppointment:n}};function be(n,o){if(1&n&&t._UZ(0,"tr",34),2&n){const e=o.$implicit,i=t.oxw();t.Q6J("ngClass",t.VKq(1,Ae,e.date==i.today))}}function Te(n,o){if(1&n&&(t.TgZ(0,"tr",35)(1,"td",36),t._uU(2),t.qZA()()),2&n){t.oxw();const e=t.MAs(20);t.xp6(2),t.hij('No data matching the filter "',e.value,'" ')}}const ye=function(){return[5,10,25,100]};let Ce=(()=>{class n{constructor(e,i,l,r,m,h){this.datePipe=e,this.appointmentService=i,this.utilityService=l,this.router=r,this.dialog=m,this.snackbar=h,this.displayedColumns=["title","employeeName","date","time","status","action"],this.todaysAppointment="todaysAppointment",this.appointment=new W.u,this.appointments=[],this.calendarAppointments=[],this.allEmployeeNames=[],this.user=JSON.parse(sessionStorage.getItem("user")),this.today=this.datePipe.transform(new Date,"yyyy-MM-dd")}ngOnInit(){(null==this.user.demographics||null==this.user.nominee)&&setTimeout(()=>{alert("Please complete your Profile !"),this.router.navigate(["patient","dashboard","profile"])},500),this.getCalendarAppointments(),this.getAppointmentsByPatientId()}createCalender(){this.calendarOptions={headerToolbar:{left:"prev,next today",center:"title",right:"dayGrid,dayGridMonth,timeGridWeek"},height:1100,initialView:"timeGridWeek",hiddenDays:[0],allDaySlot:!1,eventTimeFormat:{hour:"2-digit",minute:"2-digit",hour12:!1},eventSources:[{events:[],color:"indigo",textColor:"white",borderColor:"black"}]}}getCalendarAppointments(){this.appointmentService.getCalendarAppointmentsById(this.user.patientId).subscribe(e=>{this.calendarAppointments=e||[],this.createCalender(),this.calendarOptions.eventSources[0].events=this.calendarAppointments,this.initialise=!0})}getAppointmentsByPatientId(){this.appointmentService.getAppointmentsById(this.user.patientId).subscribe(e=>{this.utilityService.getAllPhysicians().subscribe(i=>{this.allEmployeeNames=i;for(let l of e)l.employeeName=this.allEmployeeNames.find(r=>r.employeeId==l.employeeId).name;this.dataSource=new d.by(e),null!=this.dataSource&&(this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort)})})}viewDetails(e){const i=new g.vA;i.disableClose=!0,i.autoFocus=!0,this.dialog.open(Tt,{minWidth:"60vw",minHeight:"70vh",data:{appointment:e,user:this.user,employeeNames:this.allEmployeeNames}}).afterClosed().subscribe(r=>{this.getAppointmentsByPatientId(),this.getCalendarAppointments()})}applyFilter(e){this.dataSource.filter=(e.target.value||"").trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}bookAppointment(){const e=new g.vA;e.disableClose=!0,e.autoFocus=!0,this.dialog.open(ae,{minWidth:"60vw",minHeight:"70vh",data:{user:this.user,employeeNames:this.allEmployeeNames}}).afterClosed().subscribe(l=>{this.appointment=l,this.getAppointmentsByPatientId(),this.getCalendarAppointments()})}bookDataCollectionAppointment(){const e=new g.vA;e.disableClose=!0,e.autoFocus=!0,this.dialog.open(Vt,{minWidth:"60vw",minHeight:"70vh",data:{user:this.user,employeeNames:this.allEmployeeNames}}).afterClosed().subscribe(l=>{this.appointment=l,this.getAppointmentsByPatientId(),this.getCalendarAppointments()})}getColor(e){return{"text-warning":"PENDING"===e,"text-danger":"CANCELLED"===e,"text-success":"ACCEPTED"===e,"text-primary":"ATTENDED"===e,"text-secondary":"EXPIRED"===e||"NOT_ATTENDED"===e}}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(p.uU),t.Y36(T.H),t.Y36(b.t),t.Y36(f.F0),t.Y36(g.uw),t.Y36(x.ux))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-appointment"]],viewQuery:function(e,i){if(1&e&&(t.Gf(C.NW,5),t.Gf(P.YE,5)),2&e){let l;t.iGM(l=t.CRH())&&(i.paginator=l.first),t.iGM(l=t.CRH())&&(i.sort=l.first)}},decls:45,vars:6,consts:[[1,"content","mat-elevation-z8"],[1,"card-wrapper"],[1,"row"],[2,"display","flex","margin","0.5em 0em","align-items","center","justify-items","flex-start","gap","1em"],[1,"text-dark","d-inline-block",2,"flex","8","margin","0","padding","0","font-size","20px"],[2,"flex","1","margin","0","padding","0em 0.5em"],["mat-raised-button","","color","primary",3,"click"],["label","Calender"],["style","padding: 1em 0.5em;",3,"options",4,"ngIf"],["label","Appointments"],["appearance","standard"],["matInput","","placeholder","Ex. Patient Name",3,"keyup"],["input",""],[1,"mat-elevation-z8"],["mat-table","","matSort","",1,"table",3,"dataSource"],["matColumnDef","title"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","employeeName"],["matColumnDef","date"],["matColumnDef","time"],["matColumnDef","status"],["mat-cell","",3,"ngClass",4,"matCellDef"],["matColumnDef","action"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"ngClass",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["aria-label","Select page of users",3,"pageSizeOptions"],[2,"padding","1em 0.5em",3,"options"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-cell","",3,"ngClass"],[1,"btn","btn-success",3,"click"],["mat-header-row",""],["mat-row","",3,"ngClass"],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),t._uU(5," Appointments "),t.qZA(),t.TgZ(6,"div",5)(7,"button",6),t.NdJ("click",function(){return i.bookAppointment()}),t._uU(8,"Book an Appointment"),t.qZA()(),t.TgZ(9,"div",5)(10,"button",6),t.NdJ("click",function(){return i.bookDataCollectionAppointment()}),t._uU(11,"Data Collection Appointment"),t.qZA()()(),t.TgZ(12,"mat-tab-group")(13,"mat-tab",7),t.YNc(14,le,1,1,"full-calendar",8),t.qZA(),t.TgZ(15,"mat-tab",9)(16,"mat-form-field",10)(17,"mat-label"),t._uU(18,"Search"),t.qZA(),t.TgZ(19,"input",11,12),t.NdJ("keyup",function(r){return i.applyFilter(r)}),t.qZA()(),t.TgZ(21,"div",13)(22,"table",14),t.ynx(23,15),t.YNc(24,re,2,0,"th",16),t.YNc(25,se,2,1,"td",17),t.BQk(),t.ynx(26,18),t.YNc(27,pe,2,0,"th",16),t.YNc(28,me,2,1,"td",17),t.BQk(),t.ynx(29,19),t.YNc(30,de,2,0,"th",16),t.YNc(31,ce,2,1,"td",17),t.BQk(),t.ynx(32,20),t.YNc(33,ue,2,0,"th",16),t.YNc(34,fe,2,1,"td",17),t.BQk(),t.ynx(35,21),t.YNc(36,ge,2,0,"th",16),t.YNc(37,_e,3,4,"td",22),t.BQk(),t.ynx(38,23),t.YNc(39,he,2,0,"th",16),t.YNc(40,ve,3,0,"td",17),t.BQk(),t.YNc(41,Ze,1,0,"tr",24),t.YNc(42,be,1,3,"tr",25),t.YNc(43,Te,3,1,"tr",26),t.qZA(),t._UZ(44,"mat-paginator",27),t.qZA()()()()()()),2&e&&(t.xp6(14),t.Q6J("ngIf",i.initialise),t.xp6(8),t.Q6J("dataSource",i.dataSource),t.xp6(19),t.Q6J("matHeaderRowDef",i.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",i.displayedColumns),t.xp6(2),t.Q6J("pageSizeOptions",t.DdM(5,ye)))},directives:[U.lW,A.SP,A.uX,p.O5,I.woE,N.KE,N.hX,J.Nt,d.BZ,d.w1,d.fO,d.ge,d.Dz,d.ev,p.mk,d.as,d.XQ,d.nj,d.Gk,d.Ee,C.NW],pipes:[p.rS],styles:["mat-toolbar[_ngcontent-%COMP%]{background:#004a9f;color:#fff}table[_ngcontent-%COMP%]{width:98%;margin:1%;padding:0}mat-paginator[_ngcontent-%COMP%]{font-size:11.5pt}mat-sidenav[_ngcontent-%COMP%]{margin:16px;width:200px;border-right:none;background:#002b5c;color:#fff;border-radius:10px;padding:16px;text-align:center}.content[_ngcontent-%COMP%]{height:calc(100vh - 130px);border-radius:10px;margin:16px 16px 16px 32px;padding:16px;overflow:auto}mat-sidenav-container[_ngcontent-%COMP%]{height:calc(100vh - 100px)}.menu-button[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;justify-content:flex-start;font-size:1rem}.avatar[_ngcontent-%COMP%]{margin-top:16px;width:100px;height:100px;border-radius:50%}.name[_ngcontent-%COMP%]{margin-top:8px;font-weight:400}.designation[_ngcontent-%COMP%]{margin-top:2px;font-size:.9rem;color:#d3d3d3}mat-divider[_ngcontent-%COMP%]{margin-top:16px;margin-bottom:16px;background-color:#ffffff80}.logout[_ngcontent-%COMP%]{font-size:medium}.flexExpand[_ngcontent-%COMP%]{flex:1 1 auto}.todaysAppointment[_ngcontent-%COMP%]{background-color:#fafad2}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{font-size:11pt;vertical-align:middle;-webkit-user-select:none;user-select:none}th[_ngcontent-%COMP%]{font-weight:700}  .mat-tab-label .mat-tab-label-content{font-size:medium}"]}),n})();function xe(n,o){1&n&&(t.TgZ(0,"small",15),t._uU(1,"height is Required"),t.qZA())}function Ne(n,o){1&n&&(t.TgZ(0,"small",15),t._uU(1,"weight is Required"),t.qZA())}function we(n,o){1&n&&(t.TgZ(0,"small",15),t._uU(1,"blood pressure is Required"),t.qZA())}function qe(n,o){1&n&&(t.TgZ(0,"small",15),t._uU(1,"body temperature is Required"),t.qZA())}function Ie(n,o){1&n&&(t.TgZ(0,"small",15),t._uU(1,"body temperature is Required"),t.qZA())}let De=(()=>{class n{constructor(e,i){this.formBuilder=e,this.router=i,this.user=JSON.parse(sessionStorage.getItem("user"))}ngOnInit(){(null==this.user.demographics||null==this.user.nominee||null==this.user.allergy)&&setTimeout(()=>{alert("Please complete your profile first !"),this.router.navigate(["patient","dashboard","profile"])},500),this.patientVisitForm=this.formBuilder.group({height:new a.NI("",[a.kI.required]),weight:new a.NI("",[a.kI.required]),blood_pressure:new a.NI("",[a.kI.required]),body_temperature:new a.NI("",[a.kI.required]),respiration_rate:new a.NI("",[a.kI.required])})}get height(){return this.patientVisitForm.get("height")}get weight(){return this.patientVisitForm.get("weight")}get blood_pressure(){return this.patientVisitForm.get("blood_pressure")}get body_temperature(){return this.patientVisitForm.get("body_temperature")}get respiration_rate(){return this.patientVisitForm.get("respiration_rate")}cancel(){this.patientVisitForm.reset()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(a.qu),t.Y36(f.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-patient-visit-details"]],decls:41,vars:10,consts:[[1,"container","pt-5"],[1,"row","justify-content-sm-center","pt-5"],[1,"col-sm-6","shadow","round","pb-3"],[1,"text-center","pt-3","text-secondary"],[3,"formGroup"],[1,"form-group"],[1,"col-form-label"],["formControlName","height","type","number",1,"form-control"],["class","text-danger",4,"ngIf"],["formControlName","weight","type","number",1,"form-control"],["formControlName","blood_pressure","type","number",1,"form-control"],["formControlName","body_temperature","type","number",1,"form-control"],["formControlName","respiration_rate","type","number",1,"form-control"],["type","button",1,"btn","btn-success",3,"click"],["type","button",1,"btn","btn-primary",3,"disabled"],[1,"text-danger"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),t._uU(4,"Patient visit details Form"),t.qZA(),t.TgZ(5,"form",4)(6,"div",5)(7,"label",6),t._uU(8,"Height:"),t.qZA(),t._UZ(9,"input",7),t.YNc(10,xe,2,0,"small",8),t.qZA(),t.TgZ(11,"div",5)(12,"label",6),t._uU(13,"Weight:"),t.qZA(),t._UZ(14,"input",9),t.YNc(15,Ne,2,0,"small",8),t.qZA(),t.TgZ(16,"div",5)(17,"label",6),t._uU(18,"Blood Pressure:"),t.qZA(),t._UZ(19,"input",10),t.YNc(20,we,2,0,"small",8),t.qZA(),t.TgZ(21,"div",5)(22,"label",6),t._uU(23,"Body Temperature:"),t.qZA(),t._UZ(24,"input",11),t.YNc(25,qe,2,0,"small",8),t.qZA(),t.TgZ(26,"div",5)(27,"label",6),t._uU(28,"Respiration rate:"),t.qZA(),t._UZ(29,"input",12),t.YNc(30,Ie,2,0,"small",8),t.qZA(),t._UZ(31,"br"),t.TgZ(32,"div")(33,"button",13),t.NdJ("click",function(){return i.cancel()}),t._uU(34,"cancel"),t.qZA(),t._uU(35,"\xa0\xa0 "),t.TgZ(36,"button",14),t._uU(37,"submit"),t.qZA()()()()()(),t.TgZ(38,"div"),t._uU(39),t.ALo(40,"json"),t.qZA()),2&e&&(t.xp6(5),t.Q6J("formGroup",i.patientVisitForm),t.xp6(5),t.Q6J("ngIf",(null==i.height?null:i.height.invalid)&&(null==i.height?null:i.height.touched)),t.xp6(5),t.Q6J("ngIf",(null==i.weight?null:i.weight.invalid)&&(null==i.weight?null:i.weight.touched)),t.xp6(5),t.Q6J("ngIf",(null==i.blood_pressure?null:i.blood_pressure.invalid)&&(null==i.blood_pressure?null:i.blood_pressure.touched)),t.xp6(5),t.Q6J("ngIf",(null==i.body_temperature?null:i.body_temperature.invalid)&&(null==i.body_temperature?null:i.body_temperature.touched)),t.xp6(5),t.Q6J("ngIf",(null==i.respiration_rate?null:i.respiration_rate.invalid)&&(null==i.respiration_rate?null:i.respiration_rate.touched)),t.xp6(6),t.Q6J("disabled",i.patientVisitForm.invalid),t.xp6(3),t.hij(" ",t.lcZ(40,8,i.patientVisitForm.value),"\n"))},directives:[a._Y,a.JL,a.sg,a.Fj,a.wV,a.JJ,a.u,p.O5],pipes:[p.Ts],styles:[""]}),n})();var Ue=s(2222),Pe=s(341),Je=s(3737);function Me(n,o){1&n&&(t.TgZ(0,"th",22),t._uU(1," Title "),t.qZA())}function ke(n,o){if(1&n&&(t.TgZ(0,"td",23),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.hij(" ",e.title," ")}}function Oe(n,o){1&n&&(t.TgZ(0,"th",22),t._uU(1," Physician "),t.qZA())}function Fe(n,o){if(1&n&&(t.TgZ(0,"td",23),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.hij(" ",e.employeeName," ")}}function Qe(n,o){1&n&&(t.TgZ(0,"th",22),t._uU(1," Date "),t.qZA())}function Ye(n,o){if(1&n&&(t.TgZ(0,"td",23),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.hij("",e.date," ")}}function Ee(n,o){1&n&&(t.TgZ(0,"th",22),t._uU(1," Time "),t.qZA())}function Se(n,o){if(1&n&&(t.TgZ(0,"td",23),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.hij("",e.time," ")}}function Ve(n,o){1&n&&(t.TgZ(0,"th",22),t._uU(1," Action "),t.qZA())}function He(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"td",23)(1,"button",24),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.oxw(2).viewDetails(r.appointment)}),t._uU(2,"View"),t.qZA()()}}function Re(n,o){1&n&&t._UZ(0,"tr",25)}const Le=function(n){return{todaysAppointment:n}};function Ge(n,o){if(1&n&&t._UZ(0,"tr",26),2&n){const e=o.$implicit,i=t.oxw(2);t.Q6J("ngClass",t.VKq(1,Le,e.date==i.date))}}function $e(n,o){if(1&n&&(t.TgZ(0,"tr",27)(1,"td",28),t._uU(2),t.qZA()()),2&n){t.oxw();const e=t.MAs(9);t.xp6(2),t.hij('No data matching the filter "',e.value,'" ')}}const Be=function(){return[5,10,25,100]};function je(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5),t._uU(4," Visit History Details"),t.qZA(),t.TgZ(5,"mat-form-field",6)(6,"mat-label"),t._uU(7,"Search"),t.qZA(),t.TgZ(8,"input",7,8),t.NdJ("keyup",function(l){return t.CHM(e),t.oxw().applyFilter(l)}),t.qZA()(),t.TgZ(10,"div",9)(11,"table",10),t.ynx(12,11),t.YNc(13,Me,2,0,"th",12),t.YNc(14,ke,2,1,"td",13),t.BQk(),t.ynx(15,14),t.YNc(16,Oe,2,0,"th",12),t.YNc(17,Fe,2,1,"td",13),t.BQk(),t.ynx(18,15),t.YNc(19,Qe,2,0,"th",12),t.YNc(20,Ye,2,1,"td",13),t.BQk(),t.ynx(21,16),t.YNc(22,Ee,2,0,"th",12),t.YNc(23,Se,2,1,"td",13),t.BQk(),t.ynx(24,17),t.YNc(25,Ve,2,0,"th",12),t.YNc(26,He,3,0,"td",13),t.BQk(),t.YNc(27,Re,1,0,"tr",18),t.YNc(28,Ge,1,3,"tr",19),t.YNc(29,$e,3,1,"tr",20),t.qZA(),t._UZ(30,"mat-paginator",21),t.qZA()()()()}if(2&n){const e=t.oxw();t.xp6(11),t.Q6J("dataSource",e.dataSource),t.xp6(16),t.Q6J("matHeaderRowDef",e.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",e.displayedColumns),t.xp6(2),t.Q6J("pageSizeOptions",t.DdM(4,Be))}}function ze(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"visit-report",29),t.NdJ("buttonClick",function(){return t.CHM(e),t.oxw().showReport=!1}),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("reportData",e.report)}}let We=(()=>{class n{constructor(e,i,l,r,m){this.router=e,this.datePipe=i,this.appointmentService=l,this.patientVisitService=r,this.utilityService=m,this.displayedColumns=["title","employeeName","date","time","action"],this.todaysAppointment="todaysAppointment",this.report=new Ue.w,this.allPastAppointments=[],this.allEmployeeNames=[],this.user=JSON.parse(sessionStorage.getItem("user")),this.date=this.datePipe.transform(new Date,"yyyy-MM-dd")}ngOnInit(){(null==this.user.demographics||null==this.user.nominee)&&setTimeout(()=>{alert("Please complete your profile first !"),this.router.navigate(["patient","dashboard","profile"])},500),this.appointmentService.getPastAppointmentByUserId(this.user.patientId).subscribe(e=>{this.allPastAppointments=e,this.utilityService.getAllPhysicians().subscribe(i=>{this.allEmployeeNames=i,this.loadDataSource()})})}loadDataSource(){let e=this.allPastAppointments.map(i=>{var l;return{appointment:i,title:i.title,date:i.date,time:i.time,employeeName:null===(l=this.allEmployeeNames.find(r=>r.employeeId==i.employeeId))||void 0===l?void 0:l.name}});this.dataSource=new d.by(e),null!=this.dataSource&&(this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort)}viewDetails(e){this.showReport=!0,this.patientVisitService.getVisitReportDetails(e).subscribe(i=>{this.report=i})}applyFilter(e){this.dataSource.filter=e.target.value.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}logout(){sessionStorage.clear(),this.router.navigate(["/login"])}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(f.F0),t.Y36(p.uU),t.Y36(T.H),t.Y36(Pe.A),t.Y36(b.t))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-patient-visit-history"]],viewQuery:function(e,i){if(1&e&&(t.Gf(C.NW,5),t.Gf(P.YE,5)),2&e){let l;t.iGM(l=t.CRH())&&(i.paginator=l.first),t.iGM(l=t.CRH())&&(i.sort=l.first)}},decls:2,vars:2,consts:[["class","content mat-elevation-z8",4,"ngIf"],[3,"reportData","buttonClick",4,"ngIf"],[1,"content","mat-elevation-z8"],[1,"card-wrapper"],[1,"row"],[1,"text-dark","col-sm-6",2,"font-size","20px","margin-top","2%","margin-bottom","2%"],["appearance","standard"],["matInput","","placeholder","Ex. Patient Name",3,"keyup"],["input",""],[1,"mat-elevation-z8"],["mat-table","","matSort","",1,"table","table-striped",3,"dataSource"],["matColumnDef","title"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","employeeName"],["matColumnDef","date"],["matColumnDef","time"],["matColumnDef","action"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"ngClass",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["aria-label","Select page of users",3,"pageSizeOptions"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[1,"btn","btn-success",3,"click"],["mat-header-row",""],["mat-row","",3,"ngClass"],[1,"mat-row"],["colspan","4",1,"mat-cell"],[3,"reportData","buttonClick"]],template:function(e,i){1&e&&(t.YNc(0,je,31,5,"div",0),t.YNc(1,ze,1,1,"visit-report",1)),2&e&&(t.Q6J("ngIf",!i.showReport),t.xp6(1),t.Q6J("ngIf",i.showReport))},directives:[p.O5,N.KE,N.hX,J.Nt,d.BZ,d.w1,d.fO,d.ge,d.Dz,d.ev,d.as,d.XQ,d.nj,d.Gk,p.mk,d.Ee,C.NW,Je.Y],styles:["h1[_ngcontent-%COMP%]{margin:100px;text-align:center;font-family:Verdana,Geneva,Tahoma,sans-serif}mat-toolbar[_ngcontent-%COMP%]{background:#004a9f;color:#fff}table[_ngcontent-%COMP%]{width:100%}mat-paginator[_ngcontent-%COMP%]{font-size:11.5pt}mat-sidenav[_ngcontent-%COMP%]{margin:16px;width:200px;border-right:none;background:#002b5c;color:#fff;border-radius:10px;padding:16px;text-align:center}.content[_ngcontent-%COMP%]{height:calc(100vh - 130px);border-radius:10px;margin:16px 16px 16px 32px;padding:16px;overflow:auto}mat-sidenav-container[_ngcontent-%COMP%]{height:calc(100vh - 100px)}.menu-button[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;justify-content:flex-start;font-size:1rem}.avatar[_ngcontent-%COMP%]{margin-top:16px;width:100px;height:100px;border-radius:50%}.name[_ngcontent-%COMP%]{margin-top:8px;font-weight:400}.designation[_ngcontent-%COMP%]{margin-top:2px;font-size:.9rem;color:#d3d3d3}mat-divider[_ngcontent-%COMP%]{margin-top:16px;margin-bottom:16px;background-color:#ffffff80}.logout[_ngcontent-%COMP%]{font-size:medium}.flexExpand[_ngcontent-%COMP%]{flex:1 1 auto}.todaysAppointment[_ngcontent-%COMP%]{background-color:#f0f088}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{font-size:11pt;vertical-align:middle;-webkit-user-select:none;user-select:none}th[_ngcontent-%COMP%]{font-weight:700}"]}),n})();var Xe=s(9179);function Ke(n,o){if(1&n&&(t.TgZ(0,"option",11),t._uU(1),t.ALo(2,"titlecase"),t.qZA()),2&n){const e=o.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",t.lcZ(2,2,e)," ")}}function tn(n,o){1&n&&(t.TgZ(0,"small",28),t._uU(1," Allergy Type is required"),t.qZA())}function en(n,o){if(1&n&&(t.TgZ(0,"option",11),t._uU(1),t.ALo(2,"titlecase"),t.qZA()),2&n){const e=o.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",t.lcZ(2,2,e)," ")}}function nn(n,o){1&n&&(t.TgZ(0,"small",28),t._uU(1," Allergy Type is required"),t.qZA())}function on(n,o){1&n&&(t.TgZ(0,"tr",28)(1,"td",29),t._uU(2,"No Allergies Selected !"),t.qZA()())}function an(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td")(8,"button",30),t.NdJ("click",function(){const r=t.CHM(e).index,m=t.oxw();return m.allergies.splice(r,1),m.changesMade=!0}),t._uU(9,"Remove"),t.qZA()()()}if(2&n){const e=o.$implicit;t.xp6(2),t.Oqu(e.allergyType),t.xp6(2),t.Oqu(e.allergyName),t.xp6(2),t.Oqu(e.isFatal?"Yes":"No")}}const ln=function(){return[]};let M=(()=>{class n{constructor(e){this.allergyService=e,this.allergyUpdatedEvent=new t.vpe,this.allergies=[],this.changesMade=!1}ngOnInit(){this.allergyService.getAllergyNamesAndTypes().subscribe(e=>{this.allergyTypesAndNames=e,this.allergyTypes=Object.keys(e)}),null!=this.user.allergies&&(this.allergies=this.user.allergies.map(e=>{let i=e.split(",");return{allergyType:i[0],allergyName:i[1],isFatal:JSON.parse(i[2])}})),this.form=new a.cw({patientId:new a.NI(this.user.patientId,[]),allergyType:new a.NI("",[a.kI.required]),allergyName:new a.NI({value:"",disabled:!0},[a.kI.required]),isFatal:new a.NI(!1,[])})}f(e){return this.form.controls[e]}addAllergy(){let e={allergyType:this.form.value.allergyType,allergyName:this.form.value.allergyName,isFatal:this.form.value.isFatal};null==this.allergies.find(i=>i.allergyType+i.allergyName===e.allergyType+e.allergyName)?(this.allergies.push(e),this.changesMade=!0):alert("Allergy is already selected !")}emitAllergiesUpdateEvent(){this.allergyUpdatedEvent.emit(this.allergies),this.changesMade=!1}enableOrDisableNames(){this.f("allergyName").setValue(""),""==this.f("allergyType").value?this.f("allergyName").disable():this.f("allergyName").enable()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Xe.R))},n.\u0275cmp=t.Xpm({type:n,selectors:[["patient-allergy-details"]],inputs:{user:"user"},outputs:{allergyUpdatedEvent:"update"},decls:53,vars:12,consts:[[1,"container-fluid","mt-4"],[1,"row"],[1,"col","col-md-12","col-sm-12"],[1,"card","shadow"],[1,"card-body"],[3,"formGroup"],[1,"form-group","col","col-md-4","col-sm-12"],[1,"col-form-label"],["formControlName","patientId","type","text","readonly","",1,"form-control"],[1,"form-group","col","col-md-6","col-sm-12"],["formControlName","allergyType",1,"dropdown-toggle",3,"change"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["class","text-danger",4,"ngIf"],["formControlName","allergyName",1,"dropdown-toggle"],[1,"row","form-group","mt-3","align-items-center"],[1,"col","col-md-6","col-sm-12","text-left"],["type","checkbox","formControlName","isFatal","id","isFatal"],["for","isFatal",1,"col-form-label",2,"font-size","11.5pt","margin","0px"],[1,"col","col-md-6","col-sm-12","text-center"],[1,"btn","btn-primary",3,"disabled","click"],[1,"row","mt-4","text-center"],[1,"col-md-12","col-sm-12","text-center"],[1,"table"],["scope","col"],[4,"ngFor","ngForOf"],[1,"col","col-md-12","col-sm-12","text-center","mb-3"],[1,"btn","btn-success",3,"disabled","click"],[1,"text-danger"],["colspan","4"],[1,"del-btn",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"form",5)(6,"div",1)(7,"div",6)(8,"label",7),t._uU(9,"Patient ID:"),t.qZA(),t._UZ(10,"input",8),t.qZA()(),t.TgZ(11,"div",1)(12,"div",9)(13,"label",7),t._uU(14,"Allergy Type:"),t.qZA(),t.TgZ(15,"select",10),t.NdJ("change",function(){return i.enableOrDisableNames()}),t._UZ(16,"option",11),t.YNc(17,Ke,3,4,"option",12),t.qZA(),t.YNc(18,tn,2,0,"small",13),t.qZA(),t.TgZ(19,"div",9)(20,"label",7),t._uU(21,"Allergy Names:"),t.qZA(),t.TgZ(22,"select",14),t._UZ(23,"option",11),t.YNc(24,en,3,4,"option",12),t.qZA(),t.YNc(25,nn,2,0,"small",13),t.qZA()(),t.TgZ(26,"div",15)(27,"div",16),t._UZ(28,"input",17),t.TgZ(29,"label",18),t._uU(30," Is the allergy fatal? "),t.qZA()(),t.TgZ(31,"div",19)(32,"button",20),t.NdJ("click",function(){return i.addAllergy()}),t._uU(33,"Add Allergy"),t.qZA()()(),t.TgZ(34,"div",21)(35,"div",22)(36,"table",23)(37,"thead")(38,"tr")(39,"th",24),t._uU(40,"Allergy Type"),t.qZA(),t.TgZ(41,"th",24),t._uU(42,"Allergy Name"),t.qZA(),t.TgZ(43,"th",24),t._uU(44,"Is Allergy Fatal"),t.qZA(),t.TgZ(45,"th",24),t._uU(46,"Actions"),t.qZA()()(),t.TgZ(47,"tbody"),t.YNc(48,on,3,0,"tr",13),t.YNc(49,an,10,3,"tr",25),t.qZA()()()(),t.TgZ(50,"div",26)(51,"button",27),t.NdJ("click",function(){return i.emitAllergiesUpdateEvent()}),t._uU(52," Save Changes "),t.qZA()()()()()()()()),2&e&&(t.xp6(5),t.Q6J("formGroup",i.form),t.xp6(11),t.Q6J("value",""),t.xp6(1),t.Q6J("ngForOf",i.allergyTypes),t.xp6(1),t.Q6J("ngIf",i.f("allergyType").touched&&(null==i.f("allergyType").errors?null:i.f("allergyType").errors.required)),t.xp6(5),t.Q6J("value",""),t.xp6(1),t.Q6J("ngForOf",""!=i.f("allergyType").value?i.allergyTypesAndNames[i.f("allergyType").value]:t.DdM(11,ln)),t.xp6(1),t.Q6J("ngIf",i.f("allergyType").touched&&(null==i.f("allergyType").errors?null:i.f("allergyType").errors.required)),t.xp6(7),t.Q6J("disabled",i.form.invalid),t.xp6(16),t.Q6J("ngIf",0==i.allergies.length),t.xp6(1),t.Q6J("ngForOf",i.allergies),t.xp6(2),t.Q6J("disabled",!i.changesMade))},directives:[a._Y,a.JL,a.sg,a.Fj,a.JJ,a.u,a.EJ,a.YN,a.Kr,p.sg,p.O5,a.Wl],pipes:[p.rS],styles:[".container-fluid[_ngcontent-%COMP%]{width:70%}.row[_ngcontent-%COMP%]{margin:.1em}input[disabled][_ngcontent-%COMP%], input[readonly][_ngcontent-%COMP%], select[disabled][_ngcontent-%COMP%], textarea[disabled][_ngcontent-%COMP%]{background-color:#f5f5f5;color:#000}input[type=checkbox][_ngcontent-%COMP%]{transform:scale(1.6);margin:2.5em 1em 0 .5em}label.col-form-label[_ngcontent-%COMP%]{margin-top:1em;margin-right:1em}select.dropdown-toggle[_ngcontent-%COMP%]{padding:.55em .2em;margin-right:1em;width:100%}button[_ngcontent-%COMP%]{margin-top:1.25em}.del-btn[_ngcontent-%COMP%]{background-color:orange;color:#fff;padding:.5em .75em;margin:0;font-family:Verdana,Geneva,Tahoma,sans-serif;border:none;border-radius:5px}h3[_ngcontent-%COMP%]{margin-bottom:1em}th[_ngcontent-%COMP%]{font-weight:400;font-family:Verdana,Geneva,Tahoma,sans-serif}td[_ngcontent-%COMP%]{padding:.75em .5em;margin:0;font-family:Verdana,Geneva,Tahoma,sans-serif;vertical-align:middle}"]}),n})();function rn(n,o){if(1&n&&(t.TgZ(0,"option",25),t._uU(1),t.ALo(2,"titlecase"),t.qZA()),2&n){const e=o.$implicit;t.s9C("value",e),t.xp6(1),t.hij(" ",t.lcZ(2,2,e)," ")}}function sn(n,o){1&n&&(t.TgZ(0,"small",26),t._uU(1,"Please select title"),t.qZA())}function pn(n,o){1&n&&(t.TgZ(0,"small",26),t._uU(1,"First name is required"),t.qZA())}function mn(n,o){1&n&&(t.TgZ(0,"small",26),t._uU(1,"Last name is required"),t.qZA())}function dn(n,o){1&n&&(t.TgZ(0,"small",26),t._uU(1,"Phone number is required"),t.qZA())}function cn(n,o){1&n&&(t.TgZ(0,"small",26),t._uU(1,"Not a valid phone number"),t.qZA())}function un(n,o){if(1&n&&(t.TgZ(0,"div"),t.YNc(1,dn,2,0,"small",13),t.YNc(2,cn,2,0,"small",13),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",null==e.f("phone").errors?null:e.f("phone").errors.required),t.xp6(1),t.Q6J("ngIf",null==e.f("phone").errors?null:e.f("phone").errors.pattern)}}function fn(n,o){1&n&&(t.TgZ(0,"small",26),t._uU(1,"Phone number is already used"),t.qZA())}function gn(n,o){1&n&&(t.TgZ(0,"small",26),t._uU(1,"Date of Birth is required"),t.qZA())}function _n(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",1)(1,"div",27)(2,"button",28),t.NdJ("click",function(){return t.CHM(e),t.oxw().setEditMode(!0)}),t._uU(3," Edit Details "),t.qZA()()()}}function hn(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",1)(1,"div",27)(2,"button",29),t.NdJ("click",function(){return t.CHM(e),t.oxw().emitUserUpdateEvent()}),t._uU(3,"Update"),t.qZA(),t.TgZ(4,"button",30),t.NdJ("click",function(){return t.CHM(e),t.oxw().setEditMode(!1)}),t._uU(5,"Cancel"),t.qZA()()()}if(2&n){const e=t.oxw();t.xp6(2),t.Q6J("disabled",e.form.invalid||e.phoneExists)}}let vn=(()=>{class n{constructor(e,i){this.utilityService=e,this.locale=i,this.userUpdatedEvent=new t.vpe,this.titles="Mr Ms Mrs Dr".split(" "),this.phoneExists=!1,this.editMode=!1}get today(){let e=Math.ceil(5680368e5),i=new Date(Date.now().valueOf()-e);return(0,p.p6)(i,"yyyy-MM-dd",this.locale)}ngOnInit(){this.form=new a.cw({patientId:new a.NI(this.user.patientId,[]),title:new a.NI(this.user.title,[a.kI.required]),firstName:new a.NI(this.user.firstName,[a.kI.required,c.O]),lastName:new a.NI(this.user.lastName,[a.kI.required,c.O]),email:new a.NI(this.user.email,[a.kI.required,a.kI.email]),phone:new a.NI(this.user.phone,[a.kI.required,a.kI.pattern(/^\+\d+\s?\d{10}$/)]),birthdate:new a.NI(this.user.birthdate,[a.kI.required])}),this.setEditMode(!1)}f(e){return this.form.controls[e]}onPhoneEntered(){this.user.phone==this.form.value.phone?this.phoneExists=!1:this.form.controls.phone.valid&&this.utilityService.phoneExists(this.form.value.phone).subscribe(e=>this.phoneExists=e)}emitUserUpdateEvent(){let e=this.form.getRawValue();this.userUpdatedEvent.emit(e),this.setEditMode(!1)}setEditMode(e){this.editMode=e;for(let i of"title firstName lastName phone birthdate".split(" "))e?this.form.controls[i].enable():this.form.controls[i].disable()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(b.t),t.Y36(t.soG))},n.\u0275cmp=t.Xpm({type:n,selectors:[["patient-profile-details"]],inputs:{user:"user"},outputs:{userUpdatedEvent:"update"},decls:49,vars:11,consts:[[1,"container-fluid","mt-4"],[1,"row"],[1,"col","col-md-12","col-sm-12"],[1,"card","shadow"],[1,"card-body"],[3,"formGroup"],[1,"form-group","col","col-md-4","col-sm-12"],[1,"col-form-label"],["formControlName","patientId","type","text","readonly","",1,"form-control"],[1,"form-group","col","col-md-2","col-sm-12"],["formControlName","title",1,"dropdown-toggle"],["value","''"],[3,"value",4,"ngFor","ngForOf"],["class","text-danger",4,"ngIf"],[1,"form-group","col","col-md-5","col-sm-12"],["formControlName","firstName","type","text",1,"form-control"],["formControlName","lastName","type","text",1,"form-control"],[1,"form-group","col","col-md-12"],["for","email",1,"col-form-label"],["type","text","formControlName","email","id","email","readonly","",1,"form-control"],[1,"form-group","col","col-md-6","col-sm-12"],["formControlName","phone","type","text",1,"form-control",3,"blur"],[4,"ngIf"],["formControlName","birthdate","type","date",1,"form-control",3,"max"],["class","row",4,"ngIf"],[3,"value"],[1,"text-danger"],[1,"col-md-12","col-sm-12","text-center"],[1,"btn","btn-primary",3,"click"],[1,"btn","btn-success",3,"disabled","click"],[1,"btn","btn-danger",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"form",5)(6,"div",1)(7,"div",6)(8,"label",7),t._uU(9,"Patient ID:"),t.qZA(),t._UZ(10,"input",8),t.qZA()(),t.TgZ(11,"div",1)(12,"div",9)(13,"label",7),t._uU(14,"Title:"),t.qZA(),t._UZ(15,"br"),t.TgZ(16,"select",10),t._UZ(17,"option",11),t.YNc(18,rn,3,4,"option",12),t.qZA(),t.YNc(19,sn,2,0,"small",13),t.qZA(),t.TgZ(20,"div",14)(21,"label",7),t._uU(22,"First Name:"),t.qZA(),t._UZ(23,"input",15),t.YNc(24,pn,2,0,"small",13),t.qZA(),t.TgZ(25,"div",14)(26,"label",7),t._uU(27,"Last Name:"),t.qZA(),t._UZ(28,"input",16),t.YNc(29,mn,2,0,"small",13),t.qZA()(),t.TgZ(30,"div",1)(31,"div",17)(32,"label",18),t._uU(33,"Email ID:"),t.qZA(),t._UZ(34,"input",19),t.qZA()(),t.TgZ(35,"div",1)(36,"div",20)(37,"label",7),t._uU(38,"Phone Number:"),t.qZA(),t.TgZ(39,"input",21),t.NdJ("blur",function(){return i.onPhoneEntered()}),t.qZA(),t.YNc(40,un,3,2,"div",22),t.YNc(41,fn,2,0,"small",13),t.qZA(),t.TgZ(42,"div",20)(43,"label",7),t._uU(44,"Date of Birth:"),t.qZA(),t._UZ(45,"input",23),t.YNc(46,gn,2,0,"small",13),t.qZA()(),t.YNc(47,_n,4,0,"div",24),t.YNc(48,hn,6,1,"div",24),t.qZA()()()()()()),2&e&&(t.xp6(5),t.Q6J("formGroup",i.form),t.xp6(13),t.Q6J("ngForOf",i.titles),t.xp6(1),t.Q6J("ngIf",i.f("title").touched&&""==i.f("title").value),t.xp6(5),t.Q6J("ngIf",i.f("firstName").touched&&(null==i.f("firstName").errors?null:i.f("firstName").errors.required)),t.xp6(5),t.Q6J("ngIf",i.f("lastName").touched&&(null==i.f("lastName").errors?null:i.f("lastName").errors.required)),t.xp6(11),t.Q6J("ngIf",i.f("phone").touched&&i.f("phone").errors),t.xp6(1),t.Q6J("ngIf",i.f("phone").dirty&&!i.f("phone").errors&&i.user.phone!=i.form.value.phone&&i.phoneExists),t.xp6(4),t.s9C("max",i.today),t.xp6(1),t.Q6J("ngIf",i.f("birthdate").touched&&(null==i.f("birthdate").errors?null:i.f("birthdate").errors.required)),t.xp6(1),t.Q6J("ngIf",!i.editMode),t.xp6(1),t.Q6J("ngIf",i.editMode))},directives:[a._Y,a.JL,a.sg,a.Fj,a.JJ,a.u,a.EJ,a.YN,a.Kr,p.sg,p.O5],pipes:[p.rS],styles:[".container-fluid[_ngcontent-%COMP%]{width:70%}.row[_ngcontent-%COMP%]{margin:.1em}input[disabled][_ngcontent-%COMP%], input[readonly][_ngcontent-%COMP%], select[disabled][_ngcontent-%COMP%]{background-color:#f5f5f5;color:#000}label.col-form-label[_ngcontent-%COMP%]{margin-top:1em;margin-right:1em}select.dropdown-toggle[_ngcontent-%COMP%]{padding:.55em .2em;margin-right:1em;width:100%}button[_ngcontent-%COMP%]{margin:2em .8em}h3[_ngcontent-%COMP%]{margin-bottom:1em}"]}),n})();function Zn(n,o){1&n&&(t.TgZ(0,"small",27),t._uU(1,"Please select Gender"),t.qZA())}function An(n,o){if(1&n&&(t.TgZ(0,"option",11),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e.replace("_"," ")," ")}}function bn(n,o){1&n&&(t.TgZ(0,"small",27),t._uU(1,"Please select Language"),t.qZA())}function Tn(n,o){1&n&&(t.TgZ(0,"small",27),t._uU(1,"Race is required"),t.qZA())}function yn(n,o){1&n&&(t.TgZ(0,"small",27),t._uU(1,"Ethnicity is required"),t.qZA())}function Cn(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",1)(1,"div",28)(2,"button",29),t.NdJ("click",function(){return t.CHM(e),t.oxw().setEditMode(!0)}),t._uU(3),t.qZA()()()}if(2&n){const e=t.oxw();t.xp6(3),t.hij(" ",null==e.user.demographics?"Add":"Edit"," Details ")}}function xn(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",1)(1,"div",28)(2,"button",30),t.NdJ("click",function(){return t.CHM(e),t.oxw().emitDemographicsUpdateEvent()}),t._uU(3,"Update"),t.qZA(),t.TgZ(4,"button",31),t.NdJ("click",function(){return t.CHM(e),t.oxw().setEditMode(!1)}),t._uU(5,"Cancel"),t.qZA()()()}if(2&n){const e=t.oxw();t.xp6(2),t.Q6J("disabled",e.form.invalid||e.addressForm.invalid)}}let Nn=(()=>{class n{constructor(e){this.utilityService=e,this.demographicsUpdatedEvent=new t.vpe,this.languages=[],this.editMode=!1}ngOnInit(){if(this.utilityService.getLanguages().subscribe(e=>this.languages=e),null!=this.user.demographics){this.demographics=this.user.demographics;let e=this.demographics.address.split("$$");this.address={street:e[0],landmark:e[1],city:e[2],state:e[3],pincode:e[4]}}else this.demographics={age:this.calcAge(),gender:this.guessGender(),race:"",ethnicity:"",language:null},this.address={street:"",landmark:"",city:"",state:"",pincode:""};this.form=new a.cw({patientId:new a.NI(this.user.patientId,[]),age:new a.NI(this.demographics.age,[a.kI.required]),gender:new a.NI(this.demographics.gender,[a.kI.required]),race:new a.NI(this.demographics.race,[a.kI.required,c.O]),ethnicity:new a.NI(this.demographics.ethnicity,[a.kI.required,c.O]),language:new a.NI(this.demographics.language,[a.kI.required])}),this.addressForm=new a.cw({street:new a.NI(this.address.street,[a.kI.required,c.O]),landmark:new a.NI(this.address.landmark,[a.kI.required,c.O]),city:new a.NI(this.address.city,[a.kI.required,c.O]),state:new a.NI(this.address.state,[a.kI.required,c.O]),pincode:new a.NI(this.address.pincode,[a.kI.required,a.kI.pattern(/^\d{6}$/)])}),this.setEditMode(!1)}f(e){return this.form.controls[e]}calcAge(){let e=Date.now().valueOf()-new Date(this.user.birthdate).valueOf();return Math.floor(e/1e3/60/60/24/365.25)}guessGender(){return"Mr"===this.user.title?"MALE":"Ms Mrs".split(" ").includes(this.user.title)?"FEMALE":""}emitDemographicsUpdateEvent(){let e=this.form.getRawValue();for(let i of"age gender race ethnicity language".split(" "))this.demographics[i]=e[i];this.address=this.addressForm.getRawValue(),this.demographics.address=Object.values(this.address).join("$$"),this.demographicsUpdatedEvent.emit(this.demographics),this.setEditMode(!1)}setEditMode(e){this.editMode=e;for(let i of"age gender race ethnicity language".split(" "))this.form.controls[i].setValue(this.demographics[i]),e?this.form.controls[i].enable():this.form.controls[i].disable();for(let i of"street landmark city state pincode".split(" "))this.addressForm.controls[i].setValue(this.address[i]),e?this.addressForm.controls[i].enable():this.addressForm.controls[i].disable()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(b.t))},n.\u0275cmp=t.Xpm({type:n,selectors:[["patient-demographic-details"]],inputs:{user:"user"},outputs:{demographicsUpdatedEvent:"update"},decls:60,vars:13,consts:[[1,"container-fluid","mt-4"],[1,"row"],[1,"col","col-md-12","col-sm-12"],[1,"card","shadow"],[1,"card-body"],[3,"formGroup"],[1,"form-group","col","col-md-4","col-sm-12"],[1,"col-form-label"],["formControlName","patientId","type","text","readonly","",1,"form-control"],["formControlName","age","type","text","readonly","",1,"form-control"],["formControlName","gender",1,"dropdown-toggle"],[3,"value"],["class","text-danger",4,"ngIf"],["formControlName","language",1,"dropdown-toggle"],[3,"value",4,"ngFor","ngForOf"],[1,"form-group","col","col-md-6","col-sm-12"],["formControlName","race","type","text",1,"form-control"],["formControlName","ethnicity","type","text",1,"form-control"],[1,"form-group",3,"formGroup"],[1,"form-group","col","col-md-12","col-sm-12"],["formControlName","street","type","text","placeholder","Street",1,"form-control"],[1,"form-group","col","col-md-12","col-sm-12","mt-3"],["formControlName","landmark","type","text","placeholder","Landmark",1,"form-control"],["formControlName","city","type","text","placeholder","City",1,"form-control"],["formControlName","state","type","text","placeholder","State",1,"form-control"],["formControlName","pincode","type","text","placeholder","Pincode",1,"form-control"],["class","row",4,"ngIf"],[1,"text-danger"],[1,"col-md-12","col-sm-12","text-center"],[1,"btn","btn-primary",3,"click"],[1,"btn","btn-success",3,"disabled","click"],[1,"btn","btn-danger",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"form",5)(6,"div",1)(7,"div",6)(8,"label",7),t._uU(9,"Patient ID:"),t.qZA(),t._UZ(10,"input",8),t.qZA()(),t.TgZ(11,"div",1)(12,"div",6)(13,"label",7),t._uU(14,"Age (Years):"),t.qZA(),t._UZ(15,"input",9),t.qZA(),t.TgZ(16,"div",6)(17,"label",7),t._uU(18,"Gender:"),t.qZA(),t.TgZ(19,"select",10),t._UZ(20,"option",11),t.TgZ(21,"option",11),t._uU(22,"Male"),t.qZA(),t.TgZ(23,"option",11),t._uU(24,"Female"),t.qZA()(),t.YNc(25,Zn,2,0,"small",12),t.qZA(),t.TgZ(26,"div",6)(27,"label",7),t._uU(28,"Language:"),t.qZA(),t.TgZ(29,"select",13),t._UZ(30,"option",11),t.YNc(31,An,2,2,"option",14),t.qZA(),t.YNc(32,bn,2,0,"small",12),t.qZA()(),t.TgZ(33,"div",1)(34,"div",15)(35,"label",7),t._uU(36,"Race:"),t.qZA(),t._UZ(37,"input",16),t.YNc(38,Tn,2,0,"small",12),t.qZA(),t.TgZ(39,"div",15)(40,"label",7),t._uU(41,"Ethnicity:"),t.qZA(),t._UZ(42,"input",17),t.YNc(43,yn,2,0,"small",12),t.qZA()(),t.TgZ(44,"div",1)(45,"label",7),t._uU(46,"Address:"),t.qZA(),t.TgZ(47,"form",18)(48,"div",19),t._UZ(49,"input",20),t.qZA(),t.TgZ(50,"div",21),t._UZ(51,"input",22),t.qZA(),t.TgZ(52,"div",21),t._UZ(53,"input",23),t.qZA(),t.TgZ(54,"div",21),t._UZ(55,"input",24),t.qZA(),t.TgZ(56,"div",21),t._UZ(57,"input",25),t.qZA()()(),t.YNc(58,Cn,4,1,"div",26),t.YNc(59,xn,6,1,"div",26),t.qZA()()()()()()),2&e&&(t.xp6(5),t.Q6J("formGroup",i.form),t.xp6(15),t.Q6J("value",""),t.xp6(1),t.Q6J("value","MALE"),t.xp6(2),t.Q6J("value","FEMALE"),t.xp6(2),t.Q6J("ngIf",i.f("gender").touched&&""===i.f("gender").value),t.xp6(5),t.Q6J("value",null),t.xp6(1),t.Q6J("ngForOf",i.languages),t.xp6(1),t.Q6J("ngIf",i.f("language").enabled&&i.f("language").touched&&null==i.f("language").value),t.xp6(6),t.Q6J("ngIf",i.f("race").touched&&(null==i.f("race").errors?null:i.f("race").errors.required)),t.xp6(5),t.Q6J("ngIf",i.f("ethnicity").touched&&(null==i.f("ethnicity").errors?null:i.f("ethnicity").errors.required)),t.xp6(4),t.Q6J("formGroup",i.addressForm),t.xp6(11),t.Q6J("ngIf",!i.editMode),t.xp6(1),t.Q6J("ngIf",i.editMode))},directives:[a._Y,a.JL,a.sg,a.Fj,a.JJ,a.u,a.EJ,a.YN,a.Kr,p.O5,p.sg],styles:[".container-fluid[_ngcontent-%COMP%]{width:70%}.row[_ngcontent-%COMP%]{margin:.1em}input[disabled][_ngcontent-%COMP%], input[readonly][_ngcontent-%COMP%], select[disabled][_ngcontent-%COMP%], textarea[disabled][_ngcontent-%COMP%]{background-color:#f5f5f5;color:#000}label.col-form-label[_ngcontent-%COMP%]{margin-top:1em;margin-right:1em}select.dropdown-toggle[_ngcontent-%COMP%]{padding:.55em .2em;margin-right:1em;width:100%}button[_ngcontent-%COMP%]{margin:2em .8em}h3[_ngcontent-%COMP%]{margin-bottom:1em}"]}),n})();function wn(n,o){if(1&n&&(t.TgZ(0,"option",36),t._uU(1),t.ALo(2,"titlecase"),t.qZA()),2&n){const e=o.$implicit;t.s9C("value",e),t.xp6(1),t.hij(" ",t.lcZ(2,2,e)," ")}}function qn(n,o){1&n&&(t.TgZ(0,"small",37),t._uU(1,"Please select title"),t.qZA())}function In(n,o){1&n&&(t.TgZ(0,"small",37),t._uU(1,"First name is required"),t.qZA())}function Dn(n,o){1&n&&(t.TgZ(0,"small",37),t._uU(1,"Last name is required"),t.qZA())}function Un(n,o){if(1&n&&(t.TgZ(0,"option",36),t._uU(1),t.ALo(2,"titlecase"),t.qZA()),2&n){const e=o.$implicit;t.s9C("value",e),t.xp6(1),t.hij(" ",t.lcZ(2,2,e)," ")}}function Pn(n,o){1&n&&(t.TgZ(0,"small",37),t._uU(1,"Please select title"),t.qZA())}function Jn(n,o){1&n&&(t.TgZ(0,"small",37),t._uU(1,"Email is required"),t.qZA())}function Mn(n,o){1&n&&(t.TgZ(0,"small",37),t._uU(1,"Not a valid email id"),t.qZA())}function kn(n,o){if(1&n&&(t.TgZ(0,"div"),t.YNc(1,Jn,2,0,"small",13),t.YNc(2,Mn,2,0,"small",13),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",null==e.f("email").errors?null:e.f("email").errors.required),t.xp6(1),t.Q6J("ngIf",null==e.f("email").errors?null:e.f("email").errors.email)}}function On(n,o){1&n&&(t.TgZ(0,"small",37),t._uU(1,"Phone number is required"),t.qZA())}function Fn(n,o){1&n&&(t.TgZ(0,"small",37),t._uU(1,"Not a valid phone number"),t.qZA())}function Qn(n,o){if(1&n&&(t.TgZ(0,"div"),t.YNc(1,On,2,0,"small",13),t.YNc(2,Fn,2,0,"small",13),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",null==e.f("phone").errors?null:e.f("phone").errors.required),t.xp6(1),t.Q6J("ngIf",null==e.f("phone").errors?null:e.f("phone").errors.pattern)}}function Yn(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",1)(1,"div",38)(2,"button",39),t.NdJ("click",function(){return t.CHM(e),t.oxw().setEditMode(!0)}),t._uU(3),t.qZA()()()}if(2&n){const e=t.oxw();t.xp6(3),t.hij(" ",null==e.user.nominee?"Add":"Edit"," Details ")}}function En(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",1)(1,"div",38)(2,"button",40),t.NdJ("click",function(){return t.CHM(e),t.oxw().emitNomineeUpdateEvent()}),t._uU(3,"Update"),t.qZA(),t.TgZ(4,"button",41),t.NdJ("click",function(){return t.CHM(e),t.oxw().setEditMode(!1)}),t._uU(5,"Cancel"),t.qZA()()()}if(2&n){const e=t.oxw();t.xp6(2),t.Q6J("disabled",e.form.invalid||e.addressForm.invalid)}}let Sn=(()=>{class n{constructor(e){this.utilityService=e,this.nomineeUpdatedEvent=new t.vpe,this.titles="Mr Ms Mrs Dr".split(" "),this.relations=[],this.editMode=!1}ngOnInit(){if(this.utilityService.getRelations().subscribe(e=>this.relations=e),null!=this.user.nominee){this.nominee=this.user.nominee;let e=this.nominee.address.split("$$");this.address={street:e[0],landmark:e[1],city:e[2],state:e[3],pincode:e[4]}}else this.nominee={title:null,firstName:"",lastName:"",email:"",phone:"+91 ",relation:null,isAccessAllowed:!0},this.address={street:"",landmark:"",city:"",state:"",pincode:""};this.form=new a.cw({patientId:new a.NI(this.user.patientId,[]),title:new a.NI(this.nominee.title,[a.kI.required]),firstName:new a.NI(this.nominee.firstName,[a.kI.required,c.O]),lastName:new a.NI(this.nominee.lastName,[a.kI.required,c.O]),relation:new a.NI(this.nominee.relation,[a.kI.required]),email:new a.NI(this.nominee.email,[a.kI.required,a.kI.email]),phone:new a.NI(this.nominee.phone,[a.kI.required,a.kI.pattern(/^\+\d+\s?\d{10}$/)]),isAccessAllowed:new a.NI(this.nominee.isAccessAllowed,[])}),this.addressForm=new a.cw({street:new a.NI(this.address.street,[a.kI.required,c.O]),landmark:new a.NI(this.address.landmark,[a.kI.required,c.O]),city:new a.NI(this.address.city,[a.kI.required,c.O]),state:new a.NI(this.address.state,[a.kI.required,c.O]),pincode:new a.NI(this.address.pincode,[a.kI.required,a.kI.pattern(/^\d{6}$/)])}),this.setEditMode(!1)}f(e){return this.form.controls[e]}emitNomineeUpdateEvent(){let e=this.form.getRawValue();for(let i of"title firstName lastName phone email relation isAccessAllowed".split(" "))this.nominee[i]=e[i];this.address=this.addressForm.getRawValue(),this.nominee.address=Object.values(this.address).join("$$"),this.nomineeUpdatedEvent.emit(this.nominee),this.setEditMode(!1)}setEditMode(e){this.editMode=e;for(let i of"title firstName lastName phone email relation isAccessAllowed".split(" "))this.form.controls[i].setValue(this.nominee[i]),e?this.form.controls[i].enable():this.form.controls[i].disable();for(let i of"street landmark city state pincode".split(" "))this.addressForm.controls[i].setValue(this.address[i]),e?this.addressForm.controls[i].enable():this.addressForm.controls[i].disable()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(b.t))},n.\u0275cmp=t.Xpm({type:n,selectors:[["patient-nominee-details"]],inputs:{user:"user"},outputs:{nomineeUpdatedEvent:"update"},decls:72,vars:12,consts:[[1,"container-fluid","mt-4"],[1,"row"],[1,"col","col-md-12","col-sm-12"],[1,"card","shadow"],[1,"card-body"],[3,"formGroup"],[1,"form-group","col","col-md-4","col-sm-12"],[1,"col-form-label"],["formControlName","patientId","type","text","readonly","",1,"form-control"],[1,"form-group","col","col-md-2","col-sm-12"],["formControlName","title",1,"dropdown-toggle"],["value","null"],[3,"value",4,"ngFor","ngForOf"],["class","text-danger",4,"ngIf"],[1,"form-group","col","col-md-5","col-sm-12"],["formControlName","firstName","type","text",1,"form-control"],["formControlName","lastName","type","text",1,"form-control"],[1,"form-group","col","col-md-12","col-sm-12"],["formControlName","relation",1,"dropdown-toggle"],[1,"form-group","col","col-md-6","col-sm-12"],["for","email",1,"col-form-label"],["type","text","formControlName","email","id","email",1,"form-control"],[4,"ngIf"],["for","phone",1,"col-form-label"],["formControlName","phone","type","text",1,"form-control"],[1,"form-group",3,"formGroup"],["formControlName","street","type","text","placeholder","Street",1,"form-control"],[1,"form-group","col","col-md-12","col-sm-12","mt-3"],["formControlName","landmark","type","text","placeholder","Landmark",1,"form-control"],["formControlName","city","type","text","placeholder","City",1,"form-control"],["formControlName","state","type","text","placeholder","State",1,"form-control"],["formControlName","pincode","type","text","placeholder","Pincode",1,"form-control"],[1,"form-group","col","col-md-12","col-sm-12","text-center"],["type","checkbox","formControlName","isAccessAllowed","id","isAccessAllowed"],["for","isAccessAllowed",1,"col-form-label"],["class","row",4,"ngIf"],[3,"value"],[1,"text-danger"],[1,"col-md-12","col-sm-12","text-center"],[1,"btn","btn-primary",3,"click"],[1,"btn","btn-success",3,"disabled","click"],[1,"btn","btn-danger",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"form",5)(6,"div",1)(7,"div",6)(8,"label",7),t._uU(9,"Patient ID:"),t.qZA(),t._UZ(10,"input",8),t.qZA()(),t.TgZ(11,"div",1)(12,"div",9)(13,"label",7),t._uU(14,"Title:"),t.qZA(),t._UZ(15,"br"),t.TgZ(16,"select",10),t._UZ(17,"option",11),t.YNc(18,wn,3,4,"option",12),t.qZA(),t.YNc(19,qn,2,0,"small",13),t.qZA(),t.TgZ(20,"div",14)(21,"label",7),t._uU(22,"First Name:"),t.qZA(),t._UZ(23,"input",15),t.YNc(24,In,2,0,"small",13),t.qZA(),t.TgZ(25,"div",14)(26,"label",7),t._uU(27,"Last Name:"),t.qZA(),t._UZ(28,"input",16),t.YNc(29,Dn,2,0,"small",13),t.qZA()(),t.TgZ(30,"div",1)(31,"div",17)(32,"label",7),t._uU(33,"Relation (from Patient's perspective):"),t.qZA(),t._UZ(34,"br"),t.TgZ(35,"select",18),t._UZ(36,"option",11),t.YNc(37,Un,3,4,"option",12),t.qZA(),t.YNc(38,Pn,2,0,"small",13),t.qZA()(),t.TgZ(39,"div",1)(40,"div",19)(41,"label",20),t._uU(42,"Email ID:"),t.qZA(),t._UZ(43,"input",21),t.YNc(44,kn,3,2,"div",22),t.qZA(),t.TgZ(45,"div",19)(46,"label",23),t._uU(47,"Phone Number:"),t.qZA(),t._UZ(48,"input",24),t.YNc(49,Qn,3,2,"div",22),t.qZA()(),t.TgZ(50,"div",1)(51,"label",7),t._uU(52,"Address:"),t.qZA(),t.TgZ(53,"form",25)(54,"div",17),t._UZ(55,"input",26),t.qZA(),t.TgZ(56,"div",27),t._UZ(57,"input",28),t.qZA(),t.TgZ(58,"div",27),t._UZ(59,"input",29),t.qZA(),t.TgZ(60,"div",27),t._UZ(61,"input",30),t.qZA(),t.TgZ(62,"div",27),t._UZ(63,"input",31),t.qZA()()(),t.TgZ(64,"div",1)(65,"div",32),t._UZ(66,"input",33),t.TgZ(67,"label",34)(68,"i"),t._uU(69,"Allow this person to access your account in the case of emergency?"),t.qZA()()()(),t.YNc(70,Yn,4,1,"div",35),t.YNc(71,En,6,1,"div",35),t.qZA()()()()()()),2&e&&(t.xp6(5),t.Q6J("formGroup",i.form),t.xp6(13),t.Q6J("ngForOf",i.titles),t.xp6(1),t.Q6J("ngIf",i.f("title").enabled&&i.f("title").touched&&null==i.f("title").value),t.xp6(5),t.Q6J("ngIf",i.f("firstName").touched&&(null==i.f("firstName").errors?null:i.f("firstName").errors.required)),t.xp6(5),t.Q6J("ngIf",i.f("lastName").touched&&(null==i.f("lastName").errors?null:i.f("lastName").errors.required)),t.xp6(8),t.Q6J("ngForOf",i.relations),t.xp6(1),t.Q6J("ngIf",i.f("relation").enabled&&i.f("relation").touched&&null==i.f("relation").value),t.xp6(6),t.Q6J("ngIf",i.f("email").touched&&i.f("email").errors),t.xp6(5),t.Q6J("ngIf",i.f("phone").touched&&i.f("phone").errors),t.xp6(4),t.Q6J("formGroup",i.addressForm),t.xp6(17),t.Q6J("ngIf",!i.editMode),t.xp6(1),t.Q6J("ngIf",i.editMode))},directives:[a._Y,a.JL,a.sg,a.Fj,a.JJ,a.u,a.EJ,a.YN,a.Kr,p.sg,p.O5,a.Wl],pipes:[p.rS],styles:[".container-fluid[_ngcontent-%COMP%]{width:70%}.row[_ngcontent-%COMP%]{margin:.1em}input[disabled][_ngcontent-%COMP%], input[readonly][_ngcontent-%COMP%], select[disabled][_ngcontent-%COMP%], textarea[disabled][_ngcontent-%COMP%]{background-color:#f5f5f5;color:#000}input[type=checkbox][_ngcontent-%COMP%]{transform:scale(1.6);margin:2.5em 1em 0 0}i[_ngcontent-%COMP%]{font-family:Verdana,Geneva,Tahoma,sans-serif;font-size:10.5pt;-webkit-user-select:none;user-select:none}label.col-form-label[_ngcontent-%COMP%]{margin-top:1em;margin-right:1em}select.dropdown-toggle[_ngcontent-%COMP%]{padding:.55em .2em;margin-right:1em;width:100%}button[_ngcontent-%COMP%]{margin:2em .8em}h3[_ngcontent-%COMP%]{margin-bottom:1em}"]}),n})();var Vn=s(192);const Hn=[{path:"",redirectTo:"dashboard",pathMatch:"full"},{path:"dashboard",component:v,children:[{path:"",redirectTo:"appointment",pathMatch:"full"},{path:"appointment",component:Ce},{path:"visit-history",component:We},{path:"profile",component:(()=>{class n{constructor(e){this.utilityService=e,this.user=JSON.parse(sessionStorage.getItem("user"))}updateNomineeDetails(e){this.user.nominee&&(e.nomineeId=this.user.nominee.nomineeId),this.user.nominee=e,this.updateUserProfile()}updateAllergyDetails(e){this.user.allergies=e.map(i=>`${i.allergyType},${i.allergyName},${i.isFatal}`),this.updateUserProfile()}updateDemographicDetails(e){this.user.demographics&&(e.demographicsId=this.user.demographics.demographicsId),this.user.demographics=e,this.updateUserProfile()}updatePatientDetails(e){if(e)for(let i of"patientId demographics nominee allergy password".split(" "))e[i]=this.user[i];this.user=e,this.updateUserProfile()}updateUserProfile(){this.utilityService.updatePatientDetails(this.user).subscribe(e=>{this.user=e,sessionStorage.setItem("user",JSON.stringify(this.user)),alert("Information Successfully Updated !")})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(b.t))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-profile"]],decls:14,vars:5,consts:[[1,"content","mat-elevation-z8"],[1,"card-wrapper"],[1,"row"],["label","Profile Details"],[3,"user","update"],["label","Demographic Details"],["label","Nominee Details"],["label","Allergy Details"],["label","Change Password"],[3,"user"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t._UZ(2,"div",2),t.TgZ(3,"mat-tab-group")(4,"mat-tab",3)(5,"patient-profile-details",4),t.NdJ("update",function(r){return i.updatePatientDetails(r)}),t.qZA()(),t.TgZ(6,"mat-tab",5)(7,"patient-demographic-details",4),t.NdJ("update",function(r){return i.updateDemographicDetails(r)}),t.qZA()(),t.TgZ(8,"mat-tab",6)(9,"patient-nominee-details",4),t.NdJ("update",function(r){return i.updateNomineeDetails(r)}),t.qZA()(),t.TgZ(10,"mat-tab",7)(11,"patient-allergy-details",4),t.NdJ("update",function(r){return i.updateAllergyDetails(r)}),t.qZA()(),t.TgZ(12,"mat-tab",8),t._UZ(13,"change-password",9),t.qZA()()()()),2&e&&(t.xp6(5),t.Q6J("user",i.user),t.xp6(2),t.Q6J("user",i.user),t.xp6(2),t.Q6J("user",i.user),t.xp6(2),t.Q6J("user",i.user),t.xp6(2),t.Q6J("user",i.user))},directives:[A.SP,A.uX,vn,Nn,Sn,M,Vn.p],styles:["mat-toolbar[_ngcontent-%COMP%]{background:#004a9f;color:#fff}mat-sidenav[_ngcontent-%COMP%]{margin:16px;width:200px;border-right:none;background:#002b5c;color:#fff;border-radius:10px;padding:16px;text-align:center}.content[_ngcontent-%COMP%]{height:calc(100vh - 130px);border-radius:10px;margin:16px 16px 16px 32px;padding:16px;overflow:auto}mat-sidenav-container[_ngcontent-%COMP%]{height:calc(100vh - 65px)}.menu-button[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;justify-content:flex-start;font-size:1rem}.avatar[_ngcontent-%COMP%]{margin-top:16px;width:100px;height:100px;border-radius:50%}.name[_ngcontent-%COMP%]{margin-top:8px;font-weight:400}.designation[_ngcontent-%COMP%]{margin-top:2px;font-size:.9rem;color:#d3d3d3}mat-divider[_ngcontent-%COMP%]{margin-top:16px;margin-bottom:16px;background-color:#ffffff80}.logout[_ngcontent-%COMP%]{font-size:medium}.flexExpand[_ngcontent-%COMP%]{flex:1 1 auto}.container-fluid[_ngcontent-%COMP%]{margin-bottom:4%}.text-dark[_ngcontent-%COMP%]{text-align:center}.form-label[_ngcontent-%COMP%]{font-weight:600}.otp[_ngcontent-%COMP%]{margin:10px 0}.login[_ngcontent-%COMP%]{text-decoration:none;padding:0;margin:5px 0}.errorMessage[_ngcontent-%COMP%]{margin:3%;font-weight:600;text-align:center;font-weight:700}label.col-form-label[_ngcontent-%COMP%]{margin-top:1em;margin-right:1em}select.dropdown-toggle[_ngcontent-%COMP%]{padding:.55em .4em;margin-right:1em;width:99%}button[_ngcontent-%COMP%]{margin:2em 1em 2em 0}h2[_ngcontent-%COMP%]{margin:1em 1em 0}input[_ngcontent-%COMP%]{border:1px solid gray}.emp-register-form[_ngcontent-%COMP%]{background-color:#fafafa}"]}),n})()}]},{path:"allergy",component:M},{path:"visit-details",component:De}];let Rn=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[f.Bz.forChild(Hn)],f.Bz]}),n})();var Ln=s(520),Gn=s(3559),$n=s(4130),Bn=s(2782),jn=s(1178),zn=s(6652),Wn=s(4065);I.z1U.registerPlugins([Gn.ZP,jn.ZP,$n.ZP]);let Xn=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[p.ez,Ln.JF,Rn,a.UX,zn.q,I.z1U,Bn.K7,Wn.m]]}),n})()}}]);