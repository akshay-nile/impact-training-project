"use strict";(self.webpackChunkct_hospital=self.webpackChunkct_hospital||[]).push([[562],{8562:(Ao,O,l)=>{l.r(O),l.d(O,{DoctorModule:()=>bo});var d=l(9808),r=l(3075),U=l(4566),H=l(3559),B=l(4130),b=l(2782),V=l(1178),_=l(1083),L=l(5758),m=l(8966),j=l(5973),c=l(4999),N=l(9062),F=l(4847),t=l(5e3),C=l(706),x=l(8487),v=l(7261),y=l(349);function G(o,i){1&o&&(t.TgZ(0,"small",35),t._uU(1,"Meeting Title cannot be blank"),t.qZA())}function z(o,i){if(1&o&&(t.TgZ(0,"div"),t.YNc(1,G,2,0,"small",21),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",null==e.f("meetingTitle").errors?null:e.f("meetingTitle").errors.required)}}function $(o,i){1&o&&(t.TgZ(0,"small",35),t._uU(1,"Description cannot be blank"),t.qZA())}function W(o,i){if(1&o&&(t.TgZ(0,"div"),t.YNc(1,$,2,0,"small",21),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",null==e.f("description").errors?null:e.f("description").errors.required)}}function X(o,i){if(1&o&&(t.TgZ(0,"option",14),t._uU(1),t.qZA()),2&o){const e=i.$implicit;t.Q6J("value",e.patientId),t.xp6(1),t.Oqu(e.name)}}function K(o,i){1&o&&(t.TgZ(0,"small",35),t._uU(1,"Patient cannot be empty"),t.qZA())}function tt(o,i){1&o&&(t.TgZ(0,"option",14),t._uU(1,"No Window Available"),t.qZA()),2&o&&t.Q6J("value",-1)}function et(o,i){1&o&&(t.TgZ(0,"option",14),t._uU(1,"Select Window"),t.qZA()),2&o&&t.Q6J("value",-1)}function ot(o,i){if(1&o&&(t.TgZ(0,"option",14),t._uU(1),t.qZA()),2&o){const e=i.$implicit;t.Q6J("value",i.index),t.xp6(1),t.Oqu(e.label)}}function nt(o,i){1&o&&(t.TgZ(0,"small",35),t._uU(1," Please select availability window"),t.qZA())}function it(o,i){1&o&&(t.TgZ(0,"option",14),t._uU(1,"Select Start Time"),t.qZA()),2&o&&t.Q6J("value",-1)}function at(o,i){if(1&o&&(t.TgZ(0,"option",14),t._uU(1),t.ALo(2,"uppercase"),t.qZA()),2&o){const e=i.$implicit;t.Q6J("value",i.index),t.xp6(1),t.Oqu(t.lcZ(2,2,e))}}function st(o,i){1&o&&(t.TgZ(0,"option",14),t._uU(1,"Select End Time"),t.qZA()),2&o&&t.Q6J("value",-1)}function rt(o,i){if(1&o&&(t.TgZ(0,"option",14),t._uU(1),t.ALo(2,"uppercase"),t.qZA()),2&o){const e=i.$implicit;t.Q6J("value",i.index),t.xp6(1),t.Oqu(t.lcZ(2,2,e))}}function lt(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"div",10)(1,"div",36)(2,"label",37),t._uU(3,"Start Time"),t.qZA(),t.TgZ(4,"select",38),t.NdJ("change",function(){return t.CHM(e),t.oxw().updateEndTimes()}),t.YNc(5,it,2,1,"option",27),t.YNc(6,at,3,4,"option",20),t.qZA()(),t.TgZ(7,"div",36)(8,"label",39),t._uU(9,"End Time"),t.qZA(),t.TgZ(10,"select",40),t.YNc(11,st,2,1,"option",27),t.YNc(12,rt,3,4,"option",20),t.qZA()()()}if(2&o){const e=t.oxw();t.xp6(5),t.Q6J("ngIf",e.startTimes.length>0),t.xp6(1),t.Q6J("ngForOf",e.startTimes),t.xp6(5),t.Q6J("ngIf",0==e.endTimes.length),t.xp6(1),t.Q6J("ngForOf",e.endTimes)}}let pt=(()=>{class o{constructor(e,n,a,s,p,g,u){this.snackbar=e,this.datePipe=n,this.apptService=a,this.dialogRef=s,this.data=p,this.locale=g,this.formBuilder=u,this.windows=[],this.startTimes=[],this.endTimes=[],this.date=this.datePipe.transform(new Date,"yyyy-MM-dd");let f=new Date;this.next3months=this.datePipe.transform(new Date(f.setMonth(f.getMonth()+3)),"yyyy-MM-dd"),this.employeeName=this.data.user.title+". "+this.data.user.firstName+" "+this.data.user.lastName,this.appointmentForm=this.formBuilder.group({meetingTitle:["",[r.kI.required,x.O]],description:["",[r.kI.required,x.O]],aptDate:[this.date,[r.kI.required]],physician:[{value:this.data.user.employeeId,disabled:!0}],employeeId:[{value:this.data.user.employeeId,disabled:!0}],patient:["",[r.kI.required]],patientId:[""],window:[{value:-1,disabled:!0},[r.kI.required,C.q]],startsAt:[-1,[r.kI.required,C.q]],endsAt:[{value:-1,disabled:!0},[r.kI.required,C.q]],editHistory:["Not Applicable"]})}get today(){return(0,d.p6)(new Date,"yyyy-MM-dd",this.locale)}ngOnInit(){this.getAvailabilityWindows()}f(e){return this.appointmentForm.controls[e]}getAvailabilityWindows(){let e=this.appointmentForm.getRawValue();const n={date:e.aptDate,patientId:e.physician,employeeId:this.data.user.employeeId};""===n.employeeId?(this.windows=[],this.appointmentForm.controls.window.setValue(-1),this.appointmentForm.controls.window.disable()):this.apptService.getAvailabilityWindows(n).subscribe(a=>{this.appointmentForm.controls.window.enable(),this.windows=a}),this.populateTimes()}showPatientId(){this.appointmentForm.controls.patientId.setValue(this.appointmentForm.value.patient)}populateTimes(){let e=this.appointmentForm.controls.window.value;e>=0?(this.startTimes=this.windows[e].startTimes,this.endTimes=this.windows[e].endTimes):(this.startTimes=[],this.endTimes=[])}updateEndTimes(){let e=this.appointmentForm.controls.window.value,n=this.appointmentForm.controls.startsAt.value;e>=0&&n>=0?(this.appointmentForm.controls.endsAt.enable(),this.endTimes=this.windows[e].endTimes.slice(n),this.appointmentForm.controls.endsAt.setValue(0)):(this.endTimes=[],this.appointmentForm.controls.endsAt.setValue(-1),this.appointmentForm.controls.endsAt.disable())}getAppointmentReady(){const e=this.appointmentForm.getRawValue();let n={time:this.startTimes[e.startsAt]+" to "+this.endTimes[e.endsAt],editedBy:this.data.user.employeeId};for(let a of"title=meetingTitle patientId=patientId description=description employeeId=physician date=aptDate".split(" ")){let s=a.split("=");n[s[0]]=e[s[1]]}return n}bookAppointment(){let e=this.getAppointmentReady();e.editHistory="Booked by "+this.employeeName+" (Doctor) on "+this.appointmentForm.getRawValue().aptDate,e.status="ACCEPTED",this.apptService.addAppointment(e).subscribe(n=>{this.snackbar.open("Appointment Successfully Booked !","",{duration:3e3}),this.dialogRef.close()})}close(){this.dialogRef.close()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(v.ux),t.Y36(d.uU),t.Y36(y.H),t.Y36(m.so),t.Y36(m.WI),t.Y36(t.soG),t.Y36(r.qu))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-appointment-dialog"]],decls:62,vars:16,consts:[[1,"card","mb-4",2,"padding","1em","border","none"],[1,"text-center"],[1,"text-dark","text-muted","mb-4"],["autofocus","off",3,"formGroup"],[1,"mb-4"],["for","meetingTitle",1,"form-label"],["type","text","formControlName","meetingTitle","id","meetingTitle",1,"form-control"],[4,"ngIf"],["for","description",1,"form-label"],["type","text","formControlName","description","id","description",1,"form-control"],[1,"row","mb-4"],[1,"col","col-md-8"],["for","physician",1,"form-label"],["formControlName","physician",1,"form-control"],[3,"value"],[1,"col","col-md-4"],["for","employeeId",1,"form-label"],["type","text","formControlName","employeeId","readonly","",1,"form-control"],["for","patient",1,"form-label"],["formControlName","patient",1,"form-control",3,"change"],[3,"value",4,"ngFor","ngForOf"],["class","text-danger",4,"ngIf"],["type","text","formControlName","patientId","readonly","",1,"form-control"],["for","aptDate",1,"form-label"],["type","date","formControlName","aptDate",1,"form-control",3,"min","max","change"],["for","window",1,"form-label"],["formControlName","window",1,"form-control",3,"change"],[3,"value",4,"ngIf"],["class","row mb-4",4,"ngIf"],["for","editHistory",1,"form-label"],["type","text","id","editHistory","readonly","readonly","value","Not Applicable",1,"form-control"],[1,"row","mt-4","mb-2"],[1,"col","col-md-12","text-center"],[1,"btn","btn-success","me-3",3,"disabled","click"],[1,"btn","btn-warning","ms-3",3,"click"],[1,"text-danger"],[1,"col","col-md-6"],["for","startsAt",1,"form-label"],["formControlName","startsAt",1,"form-control",3,"change"],["for","endsAt",1,"form-label"],["formControlName","endsAt",1,"form-control"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h1",2),t._uU(3,"Book Appointment"),t.qZA()(),t.TgZ(4,"form",3)(5,"div",4)(6,"label",5),t._uU(7,"Meeting Title"),t.qZA(),t._UZ(8,"input",6),t.YNc(9,z,2,1,"div",7),t.qZA(),t.TgZ(10,"div",4)(11,"label",8),t._uU(12,"Description"),t.qZA(),t._UZ(13,"textarea",9),t.YNc(14,W,2,1,"div",7),t.qZA(),t.TgZ(15,"div",10)(16,"div",11)(17,"label",12),t._uU(18,"Physician Name"),t.qZA(),t.TgZ(19,"select",13)(20,"option",14),t._uU(21),t.qZA()()(),t.TgZ(22,"div",15)(23,"label",16),t._uU(24,"Physician ID"),t.qZA(),t._UZ(25,"input",17),t.qZA()(),t.TgZ(26,"div",10)(27,"div",11)(28,"label",18),t._uU(29,"Patient Name"),t.qZA(),t.TgZ(30,"select",19),t.NdJ("change",function(){return n.getAvailabilityWindows(),n.showPatientId()}),t.TgZ(31,"option",14),t._uU(32,"Select Patient"),t.qZA(),t.YNc(33,X,2,2,"option",20),t.qZA(),t.YNc(34,K,2,0,"small",21),t.qZA(),t.TgZ(35,"div",15)(36,"label",16),t._uU(37,"Patient ID"),t.qZA(),t._UZ(38,"input",22),t.qZA()(),t.TgZ(39,"div",4)(40,"label",23),t._uU(41,"Date of Appointment"),t.qZA(),t.TgZ(42,"input",24),t.NdJ("change",function(){return n.getAvailabilityWindows()}),t.qZA()(),t.TgZ(43,"div",4)(44,"label",25),t._uU(45,"Availability Window"),t.qZA(),t.TgZ(46,"select",26),t.NdJ("change",function(){return n.populateTimes()}),t.YNc(47,tt,2,1,"option",27),t.YNc(48,et,2,1,"option",27),t.YNc(49,ot,2,2,"option",20),t.qZA(),t.YNc(50,nt,2,0,"small",21),t.qZA(),t.YNc(51,lt,13,4,"div",28),t.TgZ(52,"div",4)(53,"label",29),t._uU(54,"Edit History"),t.qZA(),t._UZ(55,"input",30),t.qZA(),t.TgZ(56,"div",31)(57,"div",32)(58,"button",33),t.NdJ("click",function(){return n.bookAppointment()}),t._uU(59,"Book"),t.qZA(),t.TgZ(60,"button",34),t.NdJ("click",function(){return n.close()}),t._uU(61,"Close"),t.qZA()()()()()),2&e&&(t.xp6(4),t.Q6J("formGroup",n.appointmentForm),t.xp6(5),t.Q6J("ngIf",n.f("meetingTitle").touched&&n.f("meetingTitle").invalid),t.xp6(5),t.Q6J("ngIf",n.f("description").touched&&n.f("description").invalid),t.xp6(6),t.Q6J("value",n.data.user.employeeId),t.xp6(1),t.Oqu(n.employeeName),t.xp6(10),t.Q6J("value",""),t.xp6(2),t.Q6J("ngForOf",n.data.patientNames),t.xp6(1),t.Q6J("ngIf",n.f("patient").touched&&n.f("patient").invalid),t.xp6(8),t.Q6J("min",n.today)("max",n.next3months),t.xp6(5),t.Q6J("ngIf",0==n.windows.length),t.xp6(1),t.Q6J("ngIf",n.windows.length>0),t.xp6(1),t.Q6J("ngForOf",n.windows),t.xp6(1),t.Q6J("ngIf",n.f("window").touched&&-1==n.f("window").value),t.xp6(1),t.Q6J("ngIf",n.windows.length>0&&-1!=n.f("window").value),t.xp6(7),t.Q6J("disabled",n.appointmentForm.invalid))},directives:[r._Y,r.JL,r.sg,r.Fj,r.JJ,r.u,d.O5,r.EJ,r.YN,r.Kr,d.sg],pipes:[d.gd],styles:[""]}),o})();var dt=l(9203);function ct(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"ask-reason",2),t.NdJ("reason",function(a){return t.CHM(e),t.oxw().cancelAppointment(a)}),t.qZA()}2&o&&t.Q6J("type","cancel")}function mt(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"ask-reason",2),t.NdJ("reason",function(a){return t.CHM(e),t.oxw().editAppointment(a)}),t.qZA()}2&o&&t.Q6J("type","edit")}function ut(o,i){1&o&&(t.TgZ(0,"small",35),t._uU(1,"Meeting Title cannot be blank"),t.qZA())}function gt(o,i){if(1&o&&(t.TgZ(0,"div"),t.YNc(1,ut,2,0,"small",34),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",null==e.appointmentForm.controls.meetingTitle.errors?null:e.appointmentForm.controls.meetingTitle.errors.required)}}function ft(o,i){1&o&&(t.TgZ(0,"small",35),t._uU(1,"Description cannot be blank"),t.qZA())}function _t(o,i){if(1&o&&(t.TgZ(0,"div"),t.YNc(1,ft,2,0,"small",34),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",null==e.appointmentForm.controls.description.errors?null:e.appointmentForm.controls.description.errors.required)}}function ht(o,i){1&o&&(t.TgZ(0,"option",14),t._uU(1,"No Window Available"),t.qZA()),2&o&&t.Q6J("value",-1)}function bt(o,i){1&o&&(t.TgZ(0,"option",14),t._uU(1,"Select Window"),t.qZA()),2&o&&t.Q6J("value",-1)}function At(o,i){if(1&o&&(t.TgZ(0,"option",14),t._uU(1),t.qZA()),2&o){const e=i.$implicit;t.Q6J("value",i.index),t.xp6(1),t.Oqu(e.label)}}function vt(o,i){1&o&&(t.TgZ(0,"small",35),t._uU(1," Availability window is required"),t.qZA())}function Zt(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"div",4)(1,"label",36),t._uU(2,"Availability Window"),t.qZA(),t.TgZ(3,"select",37),t.NdJ("change",function(){return t.CHM(e),t.oxw(2).populateTimes()}),t.YNc(4,ht,2,1,"option",38),t.YNc(5,bt,2,1,"option",38),t.YNc(6,At,2,2,"option",39),t.qZA(),t.YNc(7,vt,2,0,"small",34),t.qZA()}if(2&o){const e=t.oxw(2);t.xp6(4),t.Q6J("ngIf",0==e.windows.length),t.xp6(1),t.Q6J("ngIf",e.windows.length>0),t.xp6(1),t.Q6J("ngForOf",e.windows),t.xp6(1),t.Q6J("ngIf",e.appointmentForm.controls.window.touched&&-1==e.appointmentForm.controls.window.value)}}function Tt(o,i){1&o&&(t.TgZ(0,"option",14),t._uU(1,"Select Start Time"),t.qZA()),2&o&&t.Q6J("value",-1)}function Ct(o,i){if(1&o&&(t.TgZ(0,"option",14),t._uU(1),t.ALo(2,"uppercase"),t.qZA()),2&o){const e=i.$implicit;t.Q6J("value",i.index),t.xp6(1),t.Oqu(t.lcZ(2,2,e))}}function xt(o,i){1&o&&(t.TgZ(0,"option",14),t._uU(1,"Select End Time"),t.qZA()),2&o&&t.Q6J("value",-1)}function yt(o,i){if(1&o&&(t.TgZ(0,"option",14),t._uU(1),t.ALo(2,"uppercase"),t.qZA()),2&o){const e=i.$implicit;t.Q6J("value",i.index),t.xp6(1),t.Oqu(t.lcZ(2,2,e))}}function Nt(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"div",40)(1,"div",41)(2,"label",42),t._uU(3,"Start Time"),t.qZA(),t.TgZ(4,"select",43),t.NdJ("change",function(){return t.CHM(e),t.oxw(2).updateEndTimes()}),t.YNc(5,Tt,2,1,"option",38),t.YNc(6,Ct,3,4,"option",39),t.qZA()(),t.TgZ(7,"div",41)(8,"label",44),t._uU(9,"End Time"),t.qZA(),t.TgZ(10,"select",45),t.YNc(11,xt,2,1,"option",38),t.YNc(12,yt,3,4,"option",39),t.qZA()()()}if(2&o){const e=t.oxw(2);t.xp6(5),t.Q6J("ngIf",e.startTimes.length>0),t.xp6(1),t.Q6J("ngForOf",e.startTimes),t.xp6(5),t.Q6J("ngIf",0==e.endTimes.length),t.xp6(1),t.Q6J("ngForOf",e.endTimes)}}function Dt(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"button",46),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).acceptAppointment()}),t._uU(1,"Accept"),t.qZA()}}function wt(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"button",47),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).mode="edit"}),t._uU(1,"Update"),t.qZA()}}function qt(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"button",48),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).mode="cancel"}),t._uU(1,"Cancel"),t.qZA()}}const Ut=function(){return["ACCEPTED","PENDING"]};function It(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"form",3)(1,"div",4)(2,"label",5),t._uU(3,"Meeting Title"),t.qZA(),t._UZ(4,"input",6),t.YNc(5,gt,2,1,"div",7),t.qZA(),t.TgZ(6,"div",4)(7,"label",8),t._uU(8,"Description"),t.qZA(),t._UZ(9,"textarea",9),t.YNc(10,_t,2,1,"div",7),t.qZA(),t.TgZ(11,"div",10)(12,"div",11)(13,"label",12),t._uU(14,"Physician Name"),t.qZA(),t.TgZ(15,"select",13)(16,"option",14),t._uU(17),t.qZA()()(),t.TgZ(18,"div",15)(19,"label",16),t._uU(20,"Physician ID"),t.qZA(),t._UZ(21,"input",17),t.qZA()(),t.TgZ(22,"div",10)(23,"div",11)(24,"label",18),t._uU(25,"Patient Name"),t.qZA(),t.TgZ(26,"select",19)(27,"option",14),t._uU(28),t.qZA()()(),t.TgZ(29,"div",15)(30,"label",20),t._uU(31,"Patient ID"),t.qZA(),t._UZ(32,"input",21),t.qZA()(),t.TgZ(33,"div",4)(34,"label",22),t._uU(35,"Date of Appointment"),t.qZA(),t.TgZ(36,"input",23),t.NdJ("change",function(){return t.CHM(e),t.oxw().getAvailabilityWindows()}),t.qZA()(),t.YNc(37,Zt,8,4,"div",24),t.YNc(38,Nt,13,4,"div",25),t.TgZ(39,"div",4)(40,"label",26),t._uU(41,"Edit History"),t.qZA(),t._UZ(42,"input",27),t.qZA(),t.TgZ(43,"div",28)(44,"div",29),t.YNc(45,Dt,2,0,"button",30),t.YNc(46,wt,2,0,"button",31),t.YNc(47,qt,2,0,"button",32),t.TgZ(48,"button",33),t.NdJ("click",function(){return t.CHM(e),t.oxw().close()}),t._uU(49,"Close"),t.qZA()()()()}if(2&o){const e=t.oxw();t.Q6J("formGroup",e.appointmentForm),t.xp6(5),t.Q6J("ngIf",e.appointmentForm.controls.meetingTitle.touched&&e.appointmentForm.controls.meetingTitle.invalid),t.xp6(5),t.Q6J("ngIf",e.appointmentForm.controls.description.touched&&e.appointmentForm.controls.description.invalid),t.xp6(6),t.Q6J("value",e.data.appointment.employeeId),t.xp6(1),t.Oqu(e.doctorName),t.xp6(10),t.Q6J("value",e.data.appointment.patientId),t.xp6(1),t.Oqu(e.data.patientName),t.xp6(8),t.Q6J("min",e.today)("max",e.next3months),t.xp6(1),t.Q6J("ngIf",!e.editable),t.xp6(1),t.Q6J("ngIf",e.windows.length>0||e.editable),t.xp6(7),t.Q6J("ngIf","PENDING"===e.data.appointment.status),t.xp6(1),t.Q6J("ngIf","PENDING"===e.data.appointment.status),t.xp6(1),t.Q6J("ngIf",t.DdM(14,Ut).includes(e.data.appointment.status))}}let Pt=(()=>{class o{constructor(e,n,a,s,p,g,u){this.snackbar=e,this.datePipe=n,this.apptService=a,this.dialogRef=s,this.data=p,this.locale=g,this.formBuilder=u,this.windows=[],this.startTimes=[],this.endTimes=[],this.mode="",this.date=this.datePipe.transform(new Date,"yyyy-MM-dd");let f=new Date;this.next3months=this.datePipe.transform(new Date(f.setMonth(f.getMonth()+3)),"yyyy-MM-dd"),this.doctorName=this.data.user.title+". "+this.data.user.firstName+" "+this.data.user.lastName,this.editable="PENDING"!==this.data.appointment.status}get today(){return(0,d.p6)(new Date,"yyyy-MM-dd",this.locale)}ngOnInit(){if(this.appointmentForm=this.formBuilder.group({meetingTitle:[{value:this.data.appointment.title,disabled:this.editable},[r.kI.required,x.O]],description:[{value:this.data.appointment.description,disabled:this.editable},[r.kI.required,x.O]],aptDate:[{value:this.data.appointment.date,disabled:this.editable},[r.kI.required]],physician:[{value:this.data.appointment.employeeId,disabled:!0},[r.kI.required]],employeeId:[{value:this.data.appointment.employeeId,disabled:!0}],patient:[{value:this.data.appointment.patientId,disabled:!0}],patientId:[{value:this.data.appointment.patientId,disabled:!0}],window:[{value:-1,disabled:!0},[r.kI.required,C.q]],startsAt:[{value:-1,disabled:this.editable},[r.kI.required,C.q]],endsAt:[{value:-1,disabled:!0},[r.kI.required,C.q]],editHistory:[this.data.appointment.editHistory||"Not Applicable"]}),this.editable){let e=this.data.appointment.time.split(" to ");this.startTimes=[e[0]],this.f("startsAt").setValue(0),this.endTimes=[e[1]],this.f("endsAt").setValue(0)}else this.getAvailabilityWindows(this.data.appointment)}f(e){return this.appointmentForm.controls[e]}showPhysicianId(){this.appointmentForm.controls.employeeId.setValue(this.appointmentForm.value.physician)}getAvailabilityWindows(e){const n={};if(e)n.date=e.date,n.employeeId=e.employeeId,n.patientId=e.patientId,n.skip=e.appointmentId;else{let a=this.appointmentForm.getRawValue();n.date=a.aptDate,n.employeeId=a.employeeId,n.patientId=a.patientId,n.skip=this.data.appointment.appointmentId}if(""===n.employeeId||""===n.patientId)return this.windows=[],this.appointmentForm.controls.window.setValue(-1),void this.appointmentForm.controls.window.disable();this.apptService.getAvailabilityWindows(n).subscribe(a=>{this.windows=a,this.windows.length>0&&!this.editable&&this.appointmentForm.controls.window.enable();let s=this.data.appointment.time.split(" to "),p=this.windows.indexOf(this.windows.find(f=>f.startTimes.includes(s[0].trim())));this.appointmentForm.controls.window.setValue(p),this.populateTimes();let g=this.startTimes.indexOf(this.startTimes.find(f=>f==s[0].trim()));this.appointmentForm.controls.startsAt.setValue(g);let u=this.endTimes.indexOf(this.endTimes.find(f=>f==s[1].trim()));this.appointmentForm.controls.endsAt.setValue(u)})}populateTimes(){let e=this.appointmentForm.controls.window.value;e>=0?(this.startTimes=this.windows[e].startTimes,this.endTimes=this.windows[e].endTimes):(this.startTimes=[],this.endTimes=[])}updateEndTimes(){let e=this.appointmentForm.controls.window.value,n=this.appointmentForm.controls.startsAt.value;e>=0&&n>=0?(this.appointmentForm.controls.endsAt.enable(),this.endTimes=this.windows[e].endTimes.slice(n),this.appointmentForm.controls.endsAt.setValue(0)):(this.endTimes=[],this.appointmentForm.controls.endsAt.setValue(-1),this.appointmentForm.controls.endsAt.disable())}getAppointmentReady(){const e=this.appointmentForm.getRawValue();let n={appointmentId:this.data.appointment.appointmentId,time:this.startTimes[e.startsAt]+" to "+this.endTimes[e.endsAt]};for(let a of"title=meetingTitle patientId=patientId description=description employeeId=physician date=aptDate editedBy=patientId".split(" ")){let s=a.split("=");n[s[0]]=e[s[1]]}return n}acceptAppointment(){let e=this.data.appointment;e.editHistory="Accepted by "+this.doctorName+" (Doctor) on "+this.appointmentForm.getRawValue().aptDate,e.status="ACCEPTED",this.apptService.updateAppointment(e).subscribe(n=>{this.snackbar.open("Appointment Successfully Accepted !","",{duration:3e3}),this.dialogRef.close()})}editAppointment(e){if(this.mode="",""==e)return;let n=this.getAppointmentReady();n.editHistory="Edited by "+this.doctorName+" (Doctor) on "+this.appointmentForm.getRawValue().aptDate+" for reason '"+e+"'",n.status="ACCEPTED",this.apptService.updateAppointment(n).subscribe(a=>{this.snackbar.open("Appointment Successfully Updated !","",{duration:3e3}),this.dialogRef.close()})}cancelAppointment(e){if(this.mode="",""==e)return;let n=this.data.appointment;n.editHistory="Cancelled by "+this.doctorName+" (Doctor) on "+this.appointmentForm.getRawValue().aptDate+" for reason '"+e+"'",n.status="CANCELLED",this.apptService.updateAppointment(n).subscribe(a=>{this.snackbar.open("Appointment Successfully Cancelled !","",{duration:3e3}),this.dialogRef.close()})}close(){this.dialogRef.close()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(v.ux),t.Y36(d.uU),t.Y36(y.H),t.Y36(m.so),t.Y36(m.WI),t.Y36(t.soG),t.Y36(r.qu))},o.\u0275cmp=t.Xpm({type:o,selectors:[["appointment-details"]],decls:3,vars:3,consts:[[3,"type","reason",4,"ngIf"],[3,"formGroup",4,"ngIf"],[3,"type","reason"],[3,"formGroup"],[1,"mb-4"],["for","meetingTitle",1,"form-label"],["type","text","formControlName","meetingTitle","id","meetingTitle",1,"form-control"],[4,"ngIf"],["for","description",1,"form-label"],["type","text","formControlName","description","id","description",1,"form-control"],[1,"row","mb-4"],[1,"col","col-md-8"],["for","physician",1,"form-label"],["formControlName","physician",1,"form-control"],[3,"value"],[1,"col","col-md-4"],["for","employeeId",1,"form-label"],["type","text","formControlName","employeeId","readonly","",1,"form-control"],["for","patient",1,"form-label"],["formControlName","patient",1,"form-control"],["for","patientId",1,"form-label"],["type","text","formControlName","patientId","readonly","",1,"form-control"],["for","aptDate",1,"form-label"],["type","date","formControlName","aptDate",1,"form-control",3,"min","max","change"],["class","mb-4",4,"ngIf"],["class","row mb-4 form-group",4,"ngIf"],["for","editHistory",1,"form-label"],["type","text","formControlName","editHistory","id","editHistory","readonly","readonly",1,"form-control"],[1,"row","text-center","form-group","mt-4"],[1,"col","col-md-12","col-sm-12"],["class","btn btn-success mb-2 me-3",3,"click",4,"ngIf"],["class","btn btn-primary mb-2 ms-3 me-3",3,"click",4,"ngIf"],["class","btn btn-danger mb-2 ms-3 me-3",3,"click",4,"ngIf"],[1,"btn","btn-warning","mb-2","ms-3",3,"click"],["class","text-danger",4,"ngIf"],[1,"text-danger"],["for","window",1,"form-label"],["formControlName","window",1,"form-control",3,"change"],[3,"value",4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],[1,"row","mb-4","form-group"],[1,"col","col-md-6","col-sm-12"],["for","startsAt",1,"form-label"],["formControlName","startsAt",1,"form-control",3,"change"],["for","endsAt",1,"form-label"],["formControlName","endsAt",1,"form-control"],[1,"btn","btn-success","mb-2","me-3",3,"click"],[1,"btn","btn-primary","mb-2","ms-3","me-3",3,"click"],[1,"btn","btn-danger","mb-2","ms-3","me-3",3,"click"]],template:function(e,n){1&e&&(t.YNc(0,ct,1,1,"ask-reason",0),t.YNc(1,mt,1,1,"ask-reason",0),t.YNc(2,It,50,15,"form",1)),2&e&&(t.Q6J("ngIf","cancel"===n.mode),t.xp6(1),t.Q6J("ngIf","edit"===n.mode),t.xp6(1),t.Q6J("ngIf",""===n.mode))},directives:[d.O5,dt.p,r._Y,r.JL,r.sg,r.Fj,r.JJ,r.u,r.EJ,r.YN,r.Kr,d.sg],pipes:[d.gd],styles:[""]}),o})();var D=l(7278),kt=l(8503),Z=l(3251),A=l(9224);function Mt(o,i){1&o&&(t.TgZ(0,"tr",49)(1,"td",50),t._uU(2,"No Allergies Available !"),t.qZA()())}function Jt(o,i){if(1&o&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA()()),2&o){const e=i.$implicit,n=i.index;t.ekj("bg-warn",e.isFatal),t.xp6(2),t.Oqu(n+1),t.xp6(2),t.Oqu(e.allergyType),t.xp6(2),t.Oqu(e.allergyName),t.xp6(2),t.Oqu(e.isFatal?"Yes":"No")}}let Ot=(()=>{class o{constructor(e,n,a,s,p){this.utilityService=e,this.vitalService=n,this.dialogRef=a,this.data=s,this.formBuilder=p,this.patientDetailsForm=new r.cw({}),this.isVitalDetailsAvailable=!1,this.allergies=[],this.patientDetailsForm=this.formBuilder.group({title:[""],firstName:[""],lastName:[""],email:[""],phone:[""],birthdate:[""],age:[""],gender:[""],race:[""],ethnicity:[""],language:[""],address:[""]}),this.vitalDetailsForm=this.formBuilder.group({height:[""],weight:[""],bloodPressure:[""],bodyTemperature:[""],respirationRate:[""]}),this.utilityService.getPatientById(this.data.appointment.patientId).subscribe(g=>{for(let u of"title firstName lastName email phone birthdate".split(" "))this.pf(u).setValue(g[u]);for(let u of"age gender race ethnicity language".split(" "))this.pf(u).setValue(g.demographics[u]);this.pf("address").setValue(g.demographics.address.replaceAll("$$","\n")),this.patientDetailsForm.disable(),this.allergies=g.allergies.map(u=>{let f=u.split(",");return{allergyType:f[0],allergyName:f[1],isFatal:JSON.parse(f[2])}})}),this.vitalService.getVitalByApptId(this.data.appointment.appointmentId).subscribe(g=>{if(g)for(let u of"height weight bloodPressure bodyTemperature respirationRate".split(" "))this.vf(u).setValue(g[u]);else this.isVitalDetailsAvailable=!0;this.vitalDetailsForm.disable()})}vf(e){return this.vitalDetailsForm.controls[e]}pf(e){return this.patientDetailsForm.controls[e]}close(){this.dialogRef.close()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(D.t),t.Y36(kt.V),t.Y36(m.so),t.Y36(m.WI),t.Y36(r.qu))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-patient-details-dialog"]],decls:102,vars:5,consts:[["label","Patient Details"],[1,"example-card"],["autofocus","off",3,"formGroup"],[1,"row","form-group"],[1,"col","col-md-2","col-sm-12"],["for","title",1,"form-label"],["type","text","formControlName","title","id","title",1,"form-control"],[1,"col","col-md-5","col-sm-12"],["for","firstName",1,"form-label"],["type","text","formControlName","firstName","id","firstName",1,"form-control"],["for","lastName",1,"form-label"],["type","text","formControlName","lastName","id","lastName",1,"form-control"],[1,"col","col-md-4","col-sm-12"],["for","gender",1,"form-label"],["type","text","formControlName","gender","id","gender",1,"form-control"],["for","race",1,"form-label"],["type","text","formControlName","race","id","race",1,"form-control"],["for","ethnicity",1,"form-label"],["type","text","formControlName","ethnicity","id","ethnicity",1,"form-control"],["for","birthdate",1,"form-label"],["type","text","formControlName","birthdate","id","birthdate",1,"form-control"],["for","age",1,"form-label"],["type","text","formControlName","age","id","age",1,"form-control"],["for","language",1,"form-label"],["type","text","formControlName","language","id","language",1,"form-control"],[1,"col","col-md-12","col-sm-12"],["for","address",1,"form-label"],["formControlName","address","id","address","rows","5",1,"form-control"],[1,"row","form-group","text-center","mt-4","mb-2"],[1,"col","col-md-12","text-center"],[1,"btn","btn-warning",3,"click"],["label","Allergy Details"],[1,"col-md-12","col-sm-12","text-center"],[1,"table"],["scope","col"],["class","text-danger",4,"ngIf"],[3,"bg-warn",4,"ngFor","ngForOf"],["label","Vital Details",3,"disabled"],[1,"col","col-md-6","col-sm-12"],["for","height",1,"form-label"],["type","text","formControlName","height","id","height",1,"form-control"],["for","weight",1,"form-label"],["type","text","formControlName","weight","id","weight",1,"form-control"],["for","bloodPressure",1,"form-label"],["type","text","formControlName","bloodPressure","id","bloodPressure",1,"form-control"],["for","bodyTemperature",1,"form-label"],["type","text","formControlName","bodyTemperature","id","bodyTemperature",1,"form-control"],["for","respirationRate",1,"form-label"],["type","text","formControlName","respirationRate","id","respirationRate",1,"form-control"],[1,"text-danger"],["colspan","4"]],template:function(e,n){1&e&&(t.TgZ(0,"mat-tab-group")(1,"mat-tab",0)(2,"mat-card",1)(3,"mat-card-content")(4,"form",2)(5,"div",3)(6,"div",4)(7,"label",5),t._uU(8,"Title:"),t.qZA(),t._UZ(9,"input",6),t.qZA(),t.TgZ(10,"div",7)(11,"label",8),t._uU(12,"First Name:"),t.qZA(),t._UZ(13,"input",9),t.qZA(),t.TgZ(14,"div",7)(15,"label",10),t._uU(16,"Last Name:"),t.qZA(),t._UZ(17,"input",11),t.qZA()(),t.TgZ(18,"div",3)(19,"div",12)(20,"label",13),t._uU(21,"Gender:"),t.qZA(),t._UZ(22,"input",14),t.qZA(),t.TgZ(23,"div",12)(24,"label",15),t._uU(25,"Race:"),t.qZA(),t._UZ(26,"input",16),t.qZA(),t.TgZ(27,"div",12)(28,"label",17),t._uU(29,"Ethnicity:"),t.qZA(),t._UZ(30,"input",18),t.qZA()(),t.TgZ(31,"div",3)(32,"div",12)(33,"label",19),t._uU(34,"Date of Birth:"),t.qZA(),t._UZ(35,"input",20),t.qZA(),t.TgZ(36,"div",12)(37,"label",21),t._uU(38,"Age: (Years)"),t.qZA(),t._UZ(39,"input",22),t.qZA(),t.TgZ(40,"div",12)(41,"label",23),t._uU(42,"Language:"),t.qZA(),t._UZ(43,"input",24),t.qZA()(),t.TgZ(44,"div",3)(45,"div",25)(46,"label",26),t._uU(47,"Address:"),t.qZA(),t._UZ(48,"textarea",27),t.qZA()(),t.TgZ(49,"div",28)(50,"div",29)(51,"button",30),t.NdJ("click",function(){return n.close()}),t._uU(52,"Close"),t.qZA()()()()()()(),t.TgZ(53,"mat-tab",31)(54,"mat-card",1)(55,"div",3)(56,"div",32)(57,"table",33)(58,"thead")(59,"tr")(60,"th",34),t._uU(61,"SN."),t.qZA(),t.TgZ(62,"th",34),t._uU(63,"Allergy Type"),t.qZA(),t.TgZ(64,"th",34),t._uU(65,"Allergy Name"),t.qZA(),t.TgZ(66,"th",34),t._uU(67,"Is Allergy Fatal"),t.qZA()()(),t.TgZ(68,"tbody"),t.YNc(69,Mt,3,0,"tr",35),t.YNc(70,Jt,9,6,"tr",36),t.qZA()()()()()(),t.TgZ(71,"mat-tab",37)(72,"mat-card",1)(73,"form",2)(74,"div",3)(75,"div",38)(76,"label",39),t._uU(77,"Height: (cm)"),t.qZA(),t._UZ(78,"input",40),t.qZA(),t.TgZ(79,"div",38)(80,"label",41),t._uU(81,"Weight: (Kg)"),t.qZA(),t._UZ(82,"input",42),t.qZA()(),t.TgZ(83,"div",3)(84,"div",25)(85,"label",43),t._uU(86,"Blood Pressure: (mm/Hg)"),t.qZA(),t._UZ(87,"input",44),t.qZA()(),t.TgZ(88,"div",3)(89,"div",25)(90,"label",45),t._uU(91,"Body Temperature: (Fahrenheit)"),t.qZA(),t._UZ(92,"input",46),t.qZA()(),t.TgZ(93,"div",3)(94,"div",25)(95,"label",47),t._uU(96,"Respiration Rate: (BPM)"),t.qZA(),t._UZ(97,"input",48),t.qZA()(),t.TgZ(98,"div",28)(99,"div",29)(100,"button",30),t.NdJ("click",function(){return n.close()}),t._uU(101,"Close"),t.qZA()()()()()()()),2&e&&(t.xp6(4),t.Q6J("formGroup",n.patientDetailsForm),t.xp6(65),t.Q6J("ngIf",0==n.allergies.length),t.xp6(1),t.Q6J("ngForOf",n.allergies),t.xp6(1),t.Q6J("disabled",n.isVitalDetailsAvailable),t.xp6(2),t.Q6J("formGroup",n.vitalDetailsForm))},directives:[Z.SP,Z.uX,A.a8,A.dn,r._Y,r.JL,r.sg,r.Fj,r.JJ,r.u,d.O5,d.sg],styles:[".row[_ngcontent-%COMP%]{margin-top:2em}.row[_ngcontent-%COMP%]:first-child{margin-top:1em}input[disabled][_ngcontent-%COMP%], textarea[disabled][_ngcontent-%COMP%]{background-color:#f2f2f2}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{margin:0;padding:1em;font-weight:400;font-family:Verdana,Geneva,Tahoma,sans-serif;vertical-align:middle}thead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%]:first-child{background-color:#fafafa;border:1px solid lightgray}.bg-warn[_ngcontent-%COMP%]{background-color:#fff0f0}"]}),o})(),Y=(()=>{class o{constructor(e,n,a){this.snackbar=e,this.appointmentService=n,this.data=a}setAppointmentDataCollectionStatus(){if(this.data.appointment.dataCollectionStatus)return;let e=this.data.appointment;e.dataCollectionStatus=!0,this.appointmentService.updateAppointment(e).subscribe(n=>{n?this.data.appointment=n:alert("Failed to update appointment data collection status !")})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(v.ux),t.Y36(y.H),t.Y36(m.WI))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-visit-details"]],decls:7,vars:3,consts:[["label","Add Medication"],[3,"appointmentId","update"],["label","Add Procedure"],["label","Add Diagnosis"]],template:function(e,n){1&e&&(t.TgZ(0,"mat-tab-group")(1,"mat-tab",0)(2,"add-medications",1),t.NdJ("update",function(){return n.setAppointmentDataCollectionStatus()}),t.qZA()(),t.TgZ(3,"mat-tab",2)(4,"add-procedures",1),t.NdJ("update",function(){return n.setAppointmentDataCollectionStatus()}),t.qZA()(),t.TgZ(5,"mat-tab",3)(6,"add-diagnosis",1),t.NdJ("update",function(){return n.setAppointmentDataCollectionStatus()}),t.qZA()()()),2&e&&(t.xp6(2),t.Q6J("appointmentId",n.data.appointment.appointmentId),t.xp6(2),t.Q6J("appointmentId",n.data.appointment.appointmentId),t.xp6(2),t.Q6J("appointmentId",n.data.appointment.appointmentId))},styles:["h3[_ngcontent-%COMP%]{position:relative;margin:0;background-color:#673ab7;color:#fff;padding:0;text-align:center}.container-fluid[_ngcontent-%COMP%]{width:70%}.row[_ngcontent-%COMP%]{margin:.1em}input[disabled][_ngcontent-%COMP%], input[readonly][_ngcontent-%COMP%], select[disabled][_ngcontent-%COMP%], textarea[disabled][_ngcontent-%COMP%]{background-color:#f5f5f5;color:#000}input[type=checkbox][_ngcontent-%COMP%]{transform:scale(1.6);margin:2.5em 1em 0 .5em}label.col-form-label[_ngcontent-%COMP%]{margin-top:1em;margin-right:1em}select.dropdown-toggle[_ngcontent-%COMP%]{padding:.55em .2em;margin-right:1em;width:100%}button[_ngcontent-%COMP%]{margin-top:1.25em}.del-btn[_ngcontent-%COMP%]{background-color:red;color:#fff;padding:.5em .75em;margin:0;font-family:Verdana,Geneva,Tahoma,sans-serif;border:none;border-radius:5px}td[_ngcontent-%COMP%]{padding:.75em .5em;margin:0;font-family:Verdana,Geneva,Tahoma,sans-serif;vertical-align:middle}"]}),o})();var I=l(7423),h=l(7322),Q=l(7531),P=l(2181),S=l(5245);function Ft(o,i){if(1&o&&t._UZ(0,"full-calendar",28),2&o){const e=t.oxw();t.Q6J("options",e.calendarOptions)}}function Yt(o,i){1&o&&(t.TgZ(0,"th",29),t._uU(1," Title "),t.qZA())}function Qt(o,i){if(1&o&&(t.TgZ(0,"td",30),t._uU(1),t.qZA()),2&o){const e=i.$implicit;t.xp6(1),t.hij(" ",e.title," ")}}function St(o,i){1&o&&(t.TgZ(0,"th",29),t._uU(1," Patient "),t.qZA())}function Et(o,i){if(1&o&&(t.TgZ(0,"td",30),t._uU(1),t.qZA()),2&o){const e=i.$implicit;t.xp6(1),t.hij(" ",e.patientName," \xa0\xa0")}}function Rt(o,i){1&o&&(t.TgZ(0,"th",29),t._uU(1," Date "),t.qZA())}function Ht(o,i){if(1&o&&(t.TgZ(0,"td",30),t._uU(1),t.qZA()),2&o){const e=i.$implicit;t.xp6(1),t.hij("",e.date," ")}}function Bt(o,i){1&o&&(t.TgZ(0,"th",29),t._uU(1," Time "),t.qZA())}function Vt(o,i){if(1&o&&(t.TgZ(0,"td",30),t._uU(1),t.qZA()),2&o){const e=i.$implicit;t.xp6(1),t.hij("",e.time," ")}}function Lt(o,i){1&o&&(t.TgZ(0,"th",29),t._uU(1," Status "),t.qZA())}function jt(o,i){if(1&o&&(t.TgZ(0,"td",31),t._uU(1),t.ALo(2,"titlecase"),t.qZA()),2&o){const e=i.$implicit,n=t.oxw();t.Q6J("ngClass",n.getColor(e.status)),t.xp6(1),t.hij(" ",t.lcZ(2,2,e.status.replace("_"," "))," ")}}function Gt(o,i){1&o&&(t.TgZ(0,"th",29),t._uU(1," Action "),t.qZA())}function zt(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"td",30)(1,"button",32)(2,"mat-icon"),t._uU(3,"more_vert"),t.qZA()(),t.TgZ(4,"mat-menu",null,33)(6,"button",34),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().openAppointmentDetailsDialog(s)}),t.TgZ(7,"span"),t._uU(8,"Appointment Details"),t.qZA()(),t.TgZ(9,"button",34),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().openPatientDetailsDialog(s)}),t.TgZ(10,"span"),t._uU(11,"Patient Vital Details"),t.qZA()(),t.TgZ(12,"button",35),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().openAddPrescriptionDialog(s)}),t.TgZ(13,"span"),t._uU(14,"Add Prescription Info"),t.qZA()()()()}if(2&o){const e=i.$implicit,n=t.MAs(5);t.xp6(1),t.Q6J("matMenuTriggerFor",n),t.xp6(11),t.Q6J("disabled","ATTENDED"!=e.status)}}function $t(o,i){1&o&&t._UZ(0,"tr",36)}const Wt=function(o){return{todaysAppointment:o}};function Xt(o,i){if(1&o&&t._UZ(0,"tr",37),2&o){const e=i.$implicit,n=t.oxw();t.Q6J("ngClass",t.VKq(1,Wt,e.date==n.date))}}function Kt(o,i){if(1&o&&(t.TgZ(0,"tr",38)(1,"td",39),t._uU(2),t.qZA()()),2&o){t.oxw();const e=t.MAs(17);t.xp6(2),t.hij(' No data matching the filter "',e.value,'" ')}}const te=function(){return[5,10,25,100]};let ee=(()=>{class o{constructor(e,n,a,s){this.datePipe=e,this.appointmentService=n,this.utilityService=a,this.dialog=s,this.displayedColumns=["title","patientName","date","time","status","action"],this.todaysAppointment="todaysAppointment",this.appointment=new j.u,this.appointments=[],this.calendarAppointments=[],this.allPatientNames=[],this.user=JSON.parse(sessionStorage.getItem("user")),this.date=this.datePipe.transform(new Date,"yyyy-MM-dd")}ngOnInit(){this.getCalendarAppointments(),this.getAppointmentsByEmployeeId()}createCalender(){this.calendarOptions={headerToolbar:{left:"prev,next today",center:"title",right:"dayGrid,dayGridMonth,timeGridWeek"},height:1100,initialView:"timeGridWeek",hiddenDays:[0],allDaySlot:!1,eventTimeFormat:{hour:"2-digit",minute:"2-digit",hour12:!1},eventSources:[{events:[],color:"indigo",textColor:"white",borderColor:"black"}]}}getCalendarAppointments(){this.appointmentService.getCalendarAppointmentsById(this.user.employeeId).subscribe(e=>{this.calendarAppointments=null!==e?e:[],this.createCalender(),this.calendarOptions.eventSources[0].events=this.calendarAppointments,this.initialise=!0})}getAppointmentsByEmployeeId(){this.appointmentService.getAppointmentsById(this.user.employeeId).subscribe(e=>{this.utilityService.getAllPatientNames().subscribe(n=>{this.allPatientNames=n;for(let a of e)a.patientName=this.allPatientNames.find(s=>s.patientId==a.patientId).name;this.dataSource=new c.by(e),null!=this.dataSource&&(this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort)})})}openAppointmentDetailsDialog(e){let n=this.allPatientNames.find(p=>p.patientId===e.patientId).name;const a=new m.vA;a.disableClose=!0,a.autoFocus=!0,this.dialog.open(Pt,{minWidth:"60vw",minHeight:"70vh",data:{appointment:e,user:this.user,patientName:n}}).afterClosed().subscribe(p=>{this.getAppointmentsByEmployeeId(),this.getCalendarAppointments()})}openPatientDetailsDialog(e){const n=new m.vA;n.disableClose=!0,n.autoFocus=!0,this.dialog.open(Ot,{minWidth:"60vw",minHeight:"70vh",data:{appointment:e}}).afterClosed().subscribe(s=>{this.getAppointmentsByEmployeeId(),this.getCalendarAppointments()})}openAddPrescriptionDialog(e){const n=new m.vA;n.disableClose=!0,n.autoFocus=!0,this.dialog.open(Y,{minWidth:"60vw",minHeight:"70vh",data:{appointment:e,user:this.user}}).afterClosed().subscribe(s=>{this.getAppointmentsByEmployeeId(),this.getCalendarAppointments()})}openBookAppointmentDialog(){const e=new m.vA;e.disableClose=!0,e.autoFocus=!0,this.dialog.open(pt,{minWidth:"60vw",minHeight:"70vh",data:{user:this.user,patientNames:this.allPatientNames}}).afterClosed().subscribe(a=>{this.getAppointmentsByEmployeeId(),this.getCalendarAppointments()})}applyFilter(e){this.dataSource.filter=e.target.value.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}getColor(e){return{"text-warning":"PENDING"===e,"text-danger":"CANCELLED"===e,"text-success":"ACCEPTED"===e,"text-primary":"ATTENDED"===e,"text-secondary":"EXPIRED"===e||"NOT_ATTENDED"===e}}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(d.uU),t.Y36(y.H),t.Y36(D.t),t.Y36(m.uw))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-appointment"]],viewQuery:function(e,n){if(1&e&&(t.Gf(N.NW,5),t.Gf(F.YE,5)),2&e){let a;t.iGM(a=t.CRH())&&(n.paginator=a.first),t.iGM(a=t.CRH())&&(n.sort=a.first)}},decls:42,vars:6,consts:[[1,"content","mat-elevation-z8"],[1,"card-wrapper"],[1,"row"],[2,"display","flex","margin","0.5em 0em","align-items","center","justify-items","flex-start","gap","1em"],[1,"text-dark","d-inline-block",2,"flex","8","margin","0","padding","0","font-size","20px"],[2,"flex","1","margin","0","padding","0em 0.5em"],["mat-raised-button","","color","primary",3,"click"],["label","Calender"],["style","padding: 1em 0.5em;",3,"options",4,"ngIf"],["label","Appointments"],["appearance","standard"],["matInput","","placeholder","Ex. Patient Name",3,"keyup"],["input",""],[1,"mat-elevation-z8"],["mat-table","","matSort","",1,"table",3,"dataSource"],["matColumnDef","title"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","patientName"],["matColumnDef","date"],["matColumnDef","time"],["matColumnDef","status"],["mat-cell","",3,"ngClass",4,"matCellDef"],["matColumnDef","action"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"ngClass",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["aria-label","Select page of users",3,"pageSizeOptions"],[2,"padding","1em 0.5em",3,"options"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-cell","",3,"ngClass"],["mat-icon-button","","aria-label","Example icon-button with a menu",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","",3,"click"],["mat-menu-item","",3,"disabled","click"],["mat-header-row",""],["mat-row","",3,"ngClass"],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),t._uU(5," Appointments "),t.qZA(),t.TgZ(6,"div",5)(7,"button",6),t.NdJ("click",function(){return n.openBookAppointmentDialog()}),t._uU(8,"Book an Appointment"),t.qZA()()(),t.TgZ(9,"mat-tab-group")(10,"mat-tab",7),t.YNc(11,Ft,1,1,"full-calendar",8),t.qZA(),t.TgZ(12,"mat-tab",9)(13,"mat-form-field",10)(14,"mat-label"),t._uU(15,"Search"),t.qZA(),t.TgZ(16,"input",11,12),t.NdJ("keyup",function(s){return n.applyFilter(s)}),t.qZA()(),t.TgZ(18,"div",13)(19,"table",14),t.ynx(20,15),t.YNc(21,Yt,2,0,"th",16),t.YNc(22,Qt,2,1,"td",17),t.BQk(),t.ynx(23,18),t.YNc(24,St,2,0,"th",16),t.YNc(25,Et,2,1,"td",17),t.BQk(),t.ynx(26,19),t.YNc(27,Rt,2,0,"th",16),t.YNc(28,Ht,2,1,"td",17),t.BQk(),t.ynx(29,20),t.YNc(30,Bt,2,0,"th",16),t.YNc(31,Vt,2,1,"td",17),t.BQk(),t.ynx(32,21),t.YNc(33,Lt,2,0,"th",16),t.YNc(34,jt,3,4,"td",22),t.BQk(),t.ynx(35,23),t.YNc(36,Gt,2,0,"th",16),t.YNc(37,zt,15,2,"td",17),t.BQk(),t.YNc(38,$t,1,0,"tr",24),t.YNc(39,Xt,1,3,"tr",25),t.YNc(40,Kt,3,1,"tr",26),t.qZA(),t._UZ(41,"mat-paginator",27),t.qZA()()()()()()),2&e&&(t.xp6(11),t.Q6J("ngIf",n.initialise),t.xp6(8),t.Q6J("dataSource",n.dataSource),t.xp6(19),t.Q6J("matHeaderRowDef",n.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",n.displayedColumns),t.xp6(2),t.Q6J("pageSizeOptions",t.DdM(5,te)))},directives:[I.lW,Z.SP,Z.uX,d.O5,U.woE,h.KE,h.hX,Q.Nt,c.BZ,c.w1,c.fO,c.ge,c.Dz,c.ev,d.mk,P.p6,S.Hw,P.VK,P.OP,c.as,c.XQ,c.nj,c.Gk,c.Ee,N.NW],pipes:[d.rS],styles:["mat-toolbar[_ngcontent-%COMP%]{background:#004a9f;color:#fff}table[_ngcontent-%COMP%]{width:98%;margin:1%;padding:0}mat-sidenav[_ngcontent-%COMP%]{margin:16px;width:200px;border-right:none;background:#002b5c;color:#fff;border-radius:10px;padding:16px;text-align:center}.content[_ngcontent-%COMP%]{height:calc(100vh - 130px);border-radius:10px;margin:16px 16px 16px 32px;padding:16px;overflow:auto}mat-paginator[_ngcontent-%COMP%]{font-size:11.5pt}mat-sidenav-container[_ngcontent-%COMP%]{height:calc(100vh - 100px)}.menu-button[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;justify-content:flex-start;font-size:1rem}.avatar[_ngcontent-%COMP%]{margin-top:16px;width:100px;height:100px;border-radius:50%}.name[_ngcontent-%COMP%]{margin-top:8px;font-weight:400}.designation[_ngcontent-%COMP%]{margin-top:2px;font-size:.9rem;color:#d3d3d3}mat-divider[_ngcontent-%COMP%]{margin-top:16px;margin-bottom:16px;background-color:#ffffff80}.logout[_ngcontent-%COMP%]{font-size:medium}.flexExpand[_ngcontent-%COMP%]{flex:1 1 auto}.todaysAppointment[_ngcontent-%COMP%]{background-color:#fafad2}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{font-size:11pt;vertical-align:middle;-webkit-user-select:none;user-select:none}th[_ngcontent-%COMP%]{font-weight:700}  .mat-tab-label .mat-tab-label-content{font-size:medium}"]}),o})();var oe=l(655),w=l(2638),ne=l(1005),ie=l(9300),k=l(4987),ae=l(5113),se=l(4594),re=l(4834);function le(o,i){1&o&&(t.TgZ(0,"mat-icon"),t._uU(1," Menu "),t.qZA())}function pe(o,i){1&o&&(t.TgZ(0,"mat-icon"),t._uU(1," close "),t.qZA())}function de(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"button",18),t.NdJ("click",function(){return t.CHM(e),t.oxw(),t.MAs(12).toggle()}),t.YNc(1,le,2,0,"mat-icon",19),t.YNc(2,pe,2,0,"mat-icon",19),t.qZA()}if(2&o){t.oxw();const e=t.MAs(12);t.xp6(1),t.Q6J("ngIf",!e.opened),t.xp6(1),t.Q6J("ngIf",e.opened)}}const q=function(){return{exact:!0}};function ce(o,i){1&o&&(t.TgZ(0,"a",20),t._uU(1,"Appointments"),t.qZA()),2&o&&t.Q6J("routerLinkActiveOptions",t.DdM(1,q))}function me(o,i){1&o&&(t.TgZ(0,"a",21),t._uU(1,"Notes"),t.qZA()),2&o&&t.Q6J("routerLinkActiveOptions",t.DdM(1,q))}function ue(o,i){1&o&&(t.TgZ(0,"a",22),t._uU(1,"Visit Report"),t.qZA()),2&o&&t.Q6J("routerLinkActiveOptions",t.DdM(1,q))}function ge(o,i){1&o&&(t.TgZ(0,"a",23),t._uU(1,"Profile"),t.qZA()),2&o&&t.Q6J("routerLinkActiveOptions",t.DdM(1,q))}function fe(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"button",24),t.NdJ("click",function(){return t.CHM(e),t.oxw().updateProfile()}),t.TgZ(1,"mat-icon",17),t._uU(2,"account_circle"),t.qZA(),t.TgZ(3,"span"),t._uU(4,"Profile"),t.qZA()()}}function _e(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"button",25),t.NdJ("click",function(){return t.CHM(e),t.oxw().updateProfile()}),t.TgZ(1,"mat-icon",17),t._uU(2,"home"),t.qZA(),t.TgZ(3,"span"),t._uU(4,"Home"),t.qZA()()}}function he(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"button",26),t.NdJ("click",function(){return t.CHM(e),t.oxw().updateProfile()}),t.TgZ(1,"mat-icon",17),t._uU(2,"note"),t.qZA(),t.TgZ(3,"span"),t._uU(4,"Notes"),t.qZA()()}}function be(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"button",27),t.NdJ("click",function(){return t.CHM(e),t.oxw().updateProfile()}),t.TgZ(1,"mat-icon",17),t._uU(2,"file_copy"),t.qZA(),t.TgZ(3,"span"),t._uU(4,"Report"),t.qZA()()}}let T=class{constructor(i,e){this.observer=i,this.router=e,this.todaysAppointment="todaysAppointment",this.activeRouting="activeRouting",this.showProfile=!0,this.user=JSON.parse(sessionStorage.getItem("user"))}ngOnInit(){730734381===this.user.password&&setTimeout(()=>{alert("Please update your password !")},500),this.observer.observe(["(max-width: 800px)"]).pipe((0,ne.g)(1),(0,k.t)(this)).subscribe(i=>{i.matches?(this.sidenav.mode="over",this.sidenav.close()):(this.sidenav.mode="side",this.sidenav.open())}),this.router.events.pipe((0,k.t)(this),(0,ie.h)(i=>i instanceof _.m2)).subscribe(()=>{"over"===this.sidenav.mode&&this.sidenav.close()})}updateProfile(){this.showProfile=!this.showProfile}logout(){sessionStorage.clear(),this.router.navigate(["/login"])}};function Ae(o,i){1&o&&(t.TgZ(0,"option",24),t._uU(1,"Select Physician"),t.qZA()),2&o&&t.Q6J("value","")}function ve(o,i){if(1&o&&(t.TgZ(0,"option",24),t._uU(1),t.qZA()),2&o){const e=i.$implicit;t.Q6J("value",e.email),t.xp6(1),t.hij(" ",e.title+". "+e.firstName+" "+e.lastName," ")}}function Ze(o,i){1&o&&(t.TgZ(0,"div",25),t._uU(1,"Receiver cannot be empty"),t.qZA())}function Te(o,i){1&o&&(t.TgZ(0,"small",26),t._uU(1," Message is required "),t.qZA())}T.\u0275fac=function(i){return new(i||T)(t.Y36(ae.Yg),t.Y36(_.F0))},T.\u0275cmp=t.Xpm({type:T,selectors:[["app-dashboard"]],viewQuery:function(i,e){if(1&i&&t.Gf(w.JX,5),2&i){let n;t.iGM(n=t.CRH())&&(e.sidenav=n.first)}},decls:31,vars:10,consts:[[1,"mat-elevation-z8"],["mat-icon-button","",3,"click",4,"ngIf"],["style","margin-left: 20%;text-decoration: none;","routerLink","/doctor/dashboard/appointment","routerLinkActive","activeRouting",3,"routerLinkActiveOptions",4,"ngIf"],["style","margin-left: 5%;text-decoration: none;","routerLink","/doctor/dashboard/notes","routerLinkActive","activeRouting",3,"routerLinkActiveOptions",4,"ngIf"],["style","margin-left: 5%;text-decoration: none;","routerLink","/doctor/dashboard/visit-report","routerLinkActive","activeRouting",3,"routerLinkActiveOptions",4,"ngIf"],["style","margin-left: 20%;text-decoration: none;","routerLink","/doctor/dashboard/profile","routerLinkActive","activeRouting",3,"routerLinkActiveOptions",4,"ngIf"],[1,"flexExpand"],["mat-raised-button","",1,"logout",3,"click"],["sidenav","matSidenav"],["src","assets/profileImg.png",1,"avatar","mat-elevation-z8"],[1,"name",2,"margin-bottom","0","margin-top","1em"],[1,"designation"],["mat-button","","class","menu-button","routerLink","/doctor/dashboard/profile",3,"click",4,"ngIf"],["mat-button","","class","menu-button","routerLink","/doctor/dashboard/appointment",3,"click",4,"ngIf"],["mat-button","","class","menu-button","routerLink","/doctor/dashboard/notes",3,"click",4,"ngIf"],["mat-button","","class","menu-button","routerLink","/doctor/dashboard/visit-report",3,"click",4,"ngIf"],["mat-button","","routerLink","/doctor/dashboard/help",1,"menu-button"],[2,"margin-right","0.5em"],["mat-icon-button","",3,"click"],[4,"ngIf"],["routerLink","/doctor/dashboard/appointment","routerLinkActive","activeRouting",2,"margin-left","20%","text-decoration","none",3,"routerLinkActiveOptions"],["routerLink","/doctor/dashboard/notes","routerLinkActive","activeRouting",2,"margin-left","5%","text-decoration","none",3,"routerLinkActiveOptions"],["routerLink","/doctor/dashboard/visit-report","routerLinkActive","activeRouting",2,"margin-left","5%","text-decoration","none",3,"routerLinkActiveOptions"],["routerLink","/doctor/dashboard/profile","routerLinkActive","activeRouting",2,"margin-left","20%","text-decoration","none",3,"routerLinkActiveOptions"],["mat-button","","routerLink","/doctor/dashboard/profile",1,"menu-button",3,"click"],["mat-button","","routerLink","/doctor/dashboard/appointment",1,"menu-button",3,"click"],["mat-button","","routerLink","/doctor/dashboard/notes",1,"menu-button",3,"click"],["mat-button","","routerLink","/doctor/dashboard/visit-report",1,"menu-button",3,"click"]],template:function(i,e){if(1&i&&(t.TgZ(0,"mat-toolbar",0),t.YNc(1,de,3,2,"button",1),t.YNc(2,ce,2,2,"a",2),t.YNc(3,me,2,2,"a",3),t.YNc(4,ue,2,2,"a",4),t.YNc(5,ge,2,2,"a",5),t._UZ(6,"span",6),t.TgZ(7,"div")(8,"button",7),t.NdJ("click",function(){return e.logout()}),t._uU(9,"Logout"),t.qZA()()(),t.TgZ(10,"mat-sidenav-container")(11,"mat-sidenav",0,8),t._UZ(13,"img",9),t.TgZ(14,"h4",10),t._uU(15),t.qZA(),t.TgZ(16,"p",11),t._uU(17,"(Doctor)"),t.qZA(),t._UZ(18,"mat-divider"),t.YNc(19,fe,5,0,"button",12),t.YNc(20,_e,5,0,"button",13),t.YNc(21,he,5,0,"button",14),t.YNc(22,be,5,0,"button",15),t._UZ(23,"mat-divider"),t.TgZ(24,"button",16)(25,"mat-icon",17),t._uU(26,"help"),t.qZA(),t.TgZ(27,"span"),t._uU(28,"Help"),t.qZA()()(),t.TgZ(29,"mat-sidenav-content"),t._UZ(30,"router-outlet"),t.qZA()()),2&i){const n=t.MAs(12);t.xp6(1),t.Q6J("ngIf","over"===n.mode),t.xp6(1),t.Q6J("ngIf",e.showProfile),t.xp6(1),t.Q6J("ngIf",e.showProfile),t.xp6(1),t.Q6J("ngIf",e.showProfile),t.xp6(1),t.Q6J("ngIf",!e.showProfile),t.xp6(10),t.Oqu(e.user.title+". "+e.user.firstName+" "+e.user.lastName),t.xp6(4),t.Q6J("ngIf",e.showProfile),t.xp6(1),t.Q6J("ngIf",!e.showProfile),t.xp6(1),t.Q6J("ngIf",!e.showProfile),t.xp6(1),t.Q6J("ngIf",!e.showProfile)}},directives:[se.Ye,d.O5,I.lW,S.Hw,_.yS,_.Od,w.TM,w.JX,re.d,_.rH,w.Rh,_.lC],styles:["mat-toolbar[_ngcontent-%COMP%]{background:#004a9f;color:#fff}table[_ngcontent-%COMP%]{width:100%}mat-sidenav[_ngcontent-%COMP%]{margin:16px;width:200px;border-right:none;background:#002b5c;color:#fff;border-radius:10px;padding:16px;text-align:center}.content[_ngcontent-%COMP%]{height:calc(100vh - 130px);border-radius:10px;margin:16px 16px 16px 32px;padding:16px;overflow:auto}mat-sidenav-container[_ngcontent-%COMP%]{height:calc(100vh - 100px)}.menu-button[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;justify-content:flex-start;font-size:1rem}.avatar[_ngcontent-%COMP%]{margin-top:16px;width:100px;height:100px;border-radius:50%}.name[_ngcontent-%COMP%]{margin-top:8px;font-weight:400}.designation[_ngcontent-%COMP%]{margin-top:2px;font-size:.9rem;color:#d3d3d3}mat-divider[_ngcontent-%COMP%]{margin-top:16px;margin-bottom:16px;background-color:#ffffff80}.logout[_ngcontent-%COMP%]{font-size:medium}.flexExpand[_ngcontent-%COMP%]{flex:1 1 auto}.todaysAppointment[_ngcontent-%COMP%]{background-color:#f0f088}.activeRouting[_ngcontent-%COMP%]{color:azure}"]}),T=(0,oe.gn)([(0,k.c)()],T);let E=(()=>{class o{constructor(e,n,a,s,p,g){this.snackbar=e,this.datePipe=n,this.dialogRef=a,this.data=s,this.router=p,this.formBuilder=g,this.submitted=!1,this.date=this.datePipe.transform(new Date,"yyyy-MM-dd");let u=1==this.data.employees.length?this.data.employees[0].email:"";this.noteForm=this.formBuilder.group({urgencyLevel:["Non-Urgent",[]],date:[this.date,[r.kI.required]],message:["",[r.kI.required,x.O]],sendTo:[{value:u,disabled:""!==u},[r.kI.required]],employeeId:[this.data.user.employeeId,[]],status:["ACTIVE",[]]})}get urgencyLevel(){return this.noteForm.controls.urgencyLevel}get message(){return this.noteForm.controls.message}get sendTo(){return this.noteForm.controls.sendTo}sendNote(){this.snackbar.open("Note is successfully sent","",{duration:3e3})}close(){this.dialogRef.close()}ngOnInit(){}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(v.ux),t.Y36(d.uU),t.Y36(m.so),t.Y36(m.WI),t.Y36(_.F0),t.Y36(r.qu))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-note-dialog"]],decls:38,vars:8,consts:[[1,"card","mb-4",2,"width","600px"],[1,"text-center"],[1,"text-dark","text-muted","mb-4"],[3,"formGroup","ngSubmit"],[1,"mb-3"],["for","date",1,"form-label"],["type","date","formControlName","date","id","date",1,"form-control",3,"min"],["for","sendTo",1,"form-label"],["formControlName","sendTo",1,"form-control"],[3,"value",4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],["class","alert text-danger",4,"ngIf"],[1,"col-form-label"],["formControlName","message",1,"form-control"],["class","text-danger",4,"ngIf"],[1,"mb-3","radioClass","mb-4"],["type","radio","name","urgencyLevel","id","flexRadioDefault1","value","Urgent","formControlName","urgencyLevel",1,"form-control-input"],["for","flexRadioDefault1",1,"form-control-label"],["type","radio","name","urgencyLevel","id","flexRadioDefault2","checked","","value","Non-Urgent","formControlName","urgencyLevel",1,"form-control-input"],["for","flexRadioDefault2",1,"form-control-label"],[1,"row","form-group","mb-3","mt-4"],[1,"col","col-md-12","text-center"],["type","submit",1,"btn","btn-success","me-3",3,"disabled","mat-dialog-close"],["type","button",1,"btn","btn-warning","ms-3",3,"click"],[3,"value"],[1,"alert","text-danger"],[1,"text-danger"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h1",2),t._uU(3,"Convey your Message"),t.qZA()(),t.TgZ(4,"form",3),t.NdJ("ngSubmit",function(){return n.sendNote()}),t.TgZ(5,"div",4)(6,"label",5),t._uU(7,"Date Time"),t.qZA(),t._UZ(8,"input",6),t.qZA(),t.TgZ(9,"div",4)(10,"label",7),t._uU(11,"Send To"),t.qZA(),t.TgZ(12,"select",8),t.YNc(13,Ae,2,1,"option",9),t.YNc(14,ve,2,2,"option",10),t.qZA(),t.YNc(15,Ze,2,0,"div",11),t.qZA(),t.TgZ(16,"div",4)(17,"label",12),t._uU(18,"Message:"),t.qZA(),t._UZ(19,"textarea",13),t.YNc(20,Te,2,0,"small",14),t.qZA(),t.TgZ(21,"div",15)(22,"label"),t._uU(23,"Urgency Level"),t.qZA(),t._uU(24," \xa0\xa0 "),t._UZ(25,"input",16),t.TgZ(26,"label",17),t._uU(27," Urgent"),t.qZA(),t._uU(28,"\xa0 "),t._UZ(29,"input",18),t.TgZ(30,"label",19),t._uU(31," Non-Urgent"),t.qZA()(),t.TgZ(32,"div",20)(33,"div",21)(34,"button",22),t._uU(35,"Send"),t.qZA(),t.TgZ(36,"button",23),t.NdJ("click",function(){return n.close()}),t._uU(37,"Close"),t.qZA()()()()()),2&e&&(t.xp6(4),t.Q6J("formGroup",n.noteForm),t.xp6(4),t.Q6J("min",n.date),t.xp6(5),t.Q6J("ngIf",1!==n.data.employees.length),t.xp6(1),t.Q6J("ngForOf",n.data.employees),t.xp6(1),t.Q6J("ngIf",n.sendTo.touched&&n.sendTo.invalid),t.xp6(5),t.Q6J("ngIf",n.message.touched&&((null==n.message.errors?null:n.message.errors.required)||(null==n.message.errors?null:n.message.errors.isEmpty))),t.xp6(14),t.Q6J("disabled",!n.noteForm.valid)("mat-dialog-close",n.noteForm.value))},directives:[r._Y,r.JL,r.sg,r.Fj,r.JJ,r.u,r.EJ,d.O5,r.YN,r.Kr,d.sg,r._,m.ZT],styles:[""]}),o})();var R=l(4339);let Ce=(()=>{class o{constructor(e,n,a){this.dialogRef=e,this.noteService=n,this.data=a}ngOnInit(){}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(m.so),t.Y36(R.Y),t.Y36(m.WI))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-note-view"]],decls:21,vars:4,consts:[[1,"card","mb-4","mt-4",2,"width","600px"],[1,"text-center"],[1,"text-dark","text-muted","mb-3","mt-4"],[1,"example-card"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h1",2),t._uU(3," Note Details"),t.qZA()(),t.TgZ(4,"mat-card",3)(5,"mat-card-title-group")(6,"mat-card-title"),t._uU(7),t.qZA()(),t.TgZ(8,"mat-card-content"),t._UZ(9,"br"),t._uU(10),t._UZ(11,"br")(12,"br"),t._uU(13),t._UZ(14,"br")(15,"br"),t._uU(16," Urgency Level : "),t.TgZ(17,"b"),t._uU(18),t.qZA(),t._UZ(19,"br")(20,"br"),t.qZA()()()),2&e&&(t.xp6(7),t.Oqu(n.data.nameToOrFrom),t.xp6(3),t.hij(" Message : ",n.data.note.message," "),t.xp6(3),t.hij(" Sent On : ",n.data.note.date," "),t.xp6(5),t.Oqu(n.data.note.urgencyLevel))},directives:[A.a8,A.C1,A.n5,A.dn],styles:[""]}),o})();function xe(o,i){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"mat-card",10)(2,"mat-card-content")(3,"p",11),t._uU(4),t.qZA(),t.TgZ(5,"p"),t._uU(6," Message : "),t._UZ(7,"br"),t._uU(8),t.qZA(),t.TgZ(9,"p"),t._uU(10),t.qZA(),t.TgZ(11,"p"),t._uU(12," Note Status : "),t.TgZ(13,"span",12),t._uU(14),t.qZA()()(),t.TgZ(15,"mat-card-actions")(16,"button",13),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().viewNote(s)}),t._uU(17,"View"),t.qZA()()(),t.BQk()}if(2&o){const e=i.$implicit,n=t.oxw();t.xp6(4),t.hij(" ",n.getSentToNameByEmail(e)," "),t.xp6(4),t.hij("",e.message," "),t.xp6(2),t.hij(" Urgency Level : ",e.urgencyLevel," "),t.xp6(3),t.Q6J("ngClass",n.getNoteColor(e.status)),t.xp6(1),t.Oqu(e.status)}}function ye(o,i){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"mat-card",10)(2,"mat-card-content")(3,"p",11),t._uU(4),t.qZA(),t.TgZ(5,"p"),t._uU(6," Message : "),t._UZ(7,"br"),t._uU(8),t.qZA(),t.TgZ(9,"p"),t._uU(10),t.qZA(),t.TgZ(11,"p"),t._uU(12," Note Status : "),t.TgZ(13,"span",12),t._uU(14),t.qZA()()(),t.TgZ(15,"mat-card-actions")(16,"button",13),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().viewNote(s)}),t._uU(17,"View"),t.qZA()()(),t.BQk()}if(2&o){const e=i.$implicit,n=t.oxw();t.xp6(4),t.hij(" ",n.getSentToNameByEmail(e)," "),t.xp6(4),t.hij("",e.message," "),t.xp6(2),t.hij(" Urgency Level : ",e.urgencyLevel," "),t.xp6(3),t.Q6J("ngClass",n.getNoteColor(e.status)),t.xp6(1),t.Oqu(e.status)}}function Ne(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"button",16),t.NdJ("click",function(){t.CHM(e);const a=t.oxw().$implicit;return t.oxw().showNoteDialog(a.employeeId)}),t._uU(1,"Reply"),t.qZA()}}function De(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"button",17),t.NdJ("click",function(){t.CHM(e);const a=t.oxw().$implicit;return t.oxw().changeStatus(a.noteId)}),t._uU(1,"Close"),t.qZA()}}function we(o,i){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"mat-card",10)(2,"mat-card-content")(3,"p",11),t._uU(4),t.qZA(),t.TgZ(5,"p"),t._uU(6," Message : "),t._UZ(7,"br"),t._uU(8),t.qZA(),t.TgZ(9,"p"),t._uU(10),t.qZA(),t.TgZ(11,"p"),t._uU(12," Note Status : "),t.TgZ(13,"span",12),t._uU(14),t.qZA()()(),t.TgZ(15,"mat-card-actions")(16,"button",13),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().viewNote(s)}),t._uU(17,"View"),t.qZA(),t.YNc(18,Ne,2,0,"button",14),t.YNc(19,De,2,0,"button",15),t.qZA()(),t.BQk()}if(2&o){const e=i.$implicit,n=t.oxw();t.xp6(4),t.hij(" ",n.getSentToNameByEmail(e)," "),t.xp6(4),t.hij("",e.message," "),t.xp6(2),t.hij(" Urgency Level : ",e.urgencyLevel," "),t.xp6(3),t.Q6J("ngClass",n.getNoteColor(e.status)),t.xp6(1),t.Oqu(e.status),t.xp6(4),t.Q6J("ngIf","ACTIVE"===e.status),t.xp6(1),t.Q6J("ngIf","ACTIVE"===e.status)}}let qe=(()=>{class o{constructor(e,n,a,s,p){this.router=e,this.snackbar=n,this.dialog=a,this.noteService=s,this.utilityService=p,this.allEmployees=[],this.notes=[],this.sentNotes=[],this.receivedNotes=[],this.user=JSON.parse(sessionStorage.getItem("user"))}ngOnInit(){this.getAllNotes(),this.getAllEmployees()}getSentToNameByEmail(e){let n=this.allEmployees.find(a=>a.employeeId===e.employeeId);return n?"From: "+n.title+". "+n.firstName+" "+n.lastName:(n=this.allEmployees.find(a=>a.email===e.sendTo),n?"To: "+n.title+". "+n.firstName+" "+n.lastName:"")}getAllEmployees(){this.utilityService.getAllEmployees().subscribe(e=>{this.allEmployees=e.filter(n=>n.employeeId!==this.user.employeeId&&"ADMIN"!==n.role)})}viewNote(e){const n=new m.vA;n.disableClose=!0,n.autoFocus=!0,this.dialog.open(Ce,{width:"50%",data:{note:e,nameToOrFrom:this.getSentToNameByEmail(e)}}).afterClosed().subscribe(s=>{null!=s&&this.notes.push(s)})}getAllNotes(){this.noteService.getNotes().subscribe(e=>{null!=e?(this.notes=e.filter(n=>n.employeeId===this.user.employeeId||n.sendTo===this.user.email),this.sentNotes=this.notes.filter(n=>n.employeeId===this.user.employeeId),this.receivedNotes=this.notes.filter(n=>n.sendTo===this.user.email)):alert("Notes Not Available !")})}getNoteColor(e){return{"bg-secondary":"CLOSED"===e,"bg-success":"ACTIVE"===e}}changeStatus(e){this.noteService.getNoteById(e).subscribe(n=>{n.status="CLOSED",this.notes.find(a=>a.noteId===e).status="CLOSED",this.noteService.updateNote(n).subscribe()}),this.snackbar.open("Note thread is closed successfully !","",{duration:3e3})}showNoteDialog(e){let n=e?this.allEmployees.filter(p=>p.employeeId===e):this.allEmployees;const a=new m.vA;a.disableClose=!0,a.autoFocus=!0,this.dialog.open(E,{width:"50%",data:{user:this.user,employees:n}}).afterClosed().subscribe(p=>{null!=p&&this.noteService.addNote(p).subscribe(g=>this.getAllNotes())})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(_.F0),t.Y36(v.ux),t.Y36(m.uw),t.Y36(R.Y),t.Y36(D.t))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-notes"]],decls:15,vars:3,consts:[[1,"content","mat-elevation-z8"],[1,"card-wrapper"],[1,"row"],[1,"text-dark","col-md-10",2,"font-size","20px","margin-top","2%","margin-bottom","2%"],[1,"col-md-2",2,"margin-right","0%","padding-right","0%"],["mat-raised-button","","color","primary",3,"click"],["label","All"],[4,"ngFor","ngForOf"],["label","Sent"],["label","Received"],[1,"example-card","mb-5"],[2,"font-weight","600"],[1,"text-white","d-inline-block","p-1",3,"ngClass"],["mat-raised-button","",1,"btn-success",3,"click"],["mat-raised-button","","class","btn-primary",3,"click",4,"ngIf"],["mat-raised-button","","class","btn-secondary",3,"click",4,"ngIf"],["mat-raised-button","",1,"btn-primary",3,"click"],["mat-raised-button","",1,"btn-secondary",3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),t._uU(4," Notes"),t.qZA(),t.TgZ(5,"div",4)(6,"button",5),t.NdJ("click",function(){return n.showNoteDialog()}),t._uU(7,"Send Note"),t.qZA()()(),t.TgZ(8,"mat-tab-group")(9,"mat-tab",6),t.YNc(10,xe,18,5,"ng-container",7),t.qZA(),t.TgZ(11,"mat-tab",8),t.YNc(12,ye,18,5,"ng-container",7),t.qZA(),t.TgZ(13,"mat-tab",9),t.YNc(14,we,20,7,"ng-container",7),t.qZA()()()()),2&e&&(t.xp6(10),t.Q6J("ngForOf",n.notes.reverse()),t.xp6(2),t.Q6J("ngForOf",n.sentNotes.reverse()),t.xp6(2),t.Q6J("ngForOf",n.receivedNotes.reverse()))},directives:[I.lW,Z.SP,Z.uX,d.sg,A.a8,A.dn,d.mk,A.hq,d.O5],styles:["mat-toolbar[_ngcontent-%COMP%]{background:#004a9f;color:#fff}mat-sidenav[_ngcontent-%COMP%]{margin:16px;width:200px;border-right:none;background:#002b5c;color:#fff;border-radius:10px;padding:16px;text-align:center}.content[_ngcontent-%COMP%]{height:calc(100vh - 130px);border-radius:10px;margin:16px 16px 16px 32px;padding:16px;overflow:auto}mat-sidenav-container[_ngcontent-%COMP%]{height:calc(100vh - 65px)}.menu-button[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;justify-content:flex-start;font-size:1rem}.avatar[_ngcontent-%COMP%]{margin-top:16px;width:100px;height:100px;border-radius:50%}.name[_ngcontent-%COMP%]{margin-top:8px;font-weight:400}.designation[_ngcontent-%COMP%]{margin-top:2px;font-size:.9rem;color:#d3d3d3}mat-divider[_ngcontent-%COMP%]{margin-top:16px;margin-bottom:16px;background-color:#ffffff80}.logout[_ngcontent-%COMP%]{font-size:medium}.flexExpand[_ngcontent-%COMP%]{flex:1 1 auto}"]}),o})();var Ue=l(2222),Ie=l(341),Pe=l(3737);function ke(o,i){1&o&&(t.TgZ(0,"th",22),t._uU(1," Title "),t.qZA())}function Me(o,i){if(1&o&&(t.TgZ(0,"td",23),t._uU(1),t.qZA()),2&o){const e=i.$implicit;t.xp6(1),t.hij(" ",e.title," ")}}function Je(o,i){1&o&&(t.TgZ(0,"th",22),t._uU(1," Patient "),t.qZA())}function Oe(o,i){if(1&o&&(t.TgZ(0,"td",23),t._uU(1),t.qZA()),2&o){const e=i.$implicit;t.xp6(1),t.hij(" ",e.patientName," ")}}function Fe(o,i){1&o&&(t.TgZ(0,"th",22),t._uU(1," Date "),t.qZA())}function Ye(o,i){if(1&o&&(t.TgZ(0,"td",23),t._uU(1),t.qZA()),2&o){const e=i.$implicit;t.xp6(1),t.hij("",e.date," ")}}function Qe(o,i){1&o&&(t.TgZ(0,"th",22),t._uU(1," Time "),t.qZA())}function Se(o,i){if(1&o&&(t.TgZ(0,"td",23),t._uU(1),t.qZA()),2&o){const e=i.$implicit;t.xp6(1),t.hij("",e.time," ")}}function Ee(o,i){1&o&&(t.TgZ(0,"th",22),t._uU(1," Action "),t.qZA())}function Re(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"td",23)(1,"button",24),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw(2).viewDetails(s.appointment)}),t._uU(2,"View"),t.qZA()()}}function He(o,i){1&o&&t._UZ(0,"tr",25)}const Be=function(o){return{todaysAppointment:o}};function Ve(o,i){if(1&o&&t._UZ(0,"tr",26),2&o){const e=i.$implicit,n=t.oxw(2);t.Q6J("ngClass",t.VKq(1,Be,e.aptDate==n.date))}}function Le(o,i){if(1&o&&(t.TgZ(0,"tr",27)(1,"td",28),t._uU(2),t.qZA()()),2&o){t.oxw();const e=t.MAs(9);t.xp6(2),t.hij('No data matching the filter "',e.value,'" ')}}const je=function(){return[5,10,25,100]};function Ge(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5),t._uU(4," Visit History Details"),t.qZA(),t.TgZ(5,"mat-form-field",6)(6,"mat-label"),t._uU(7,"Search"),t.qZA(),t.TgZ(8,"input",7,8),t.NdJ("keyup",function(a){return t.CHM(e),t.oxw().applyFilter(a)}),t.qZA()(),t.TgZ(10,"div",9)(11,"table",10),t.ynx(12,11),t.YNc(13,ke,2,0,"th",12),t.YNc(14,Me,2,1,"td",13),t.BQk(),t.ynx(15,14),t.YNc(16,Je,2,0,"th",12),t.YNc(17,Oe,2,1,"td",13),t.BQk(),t.ynx(18,15),t.YNc(19,Fe,2,0,"th",12),t.YNc(20,Ye,2,1,"td",13),t.BQk(),t.ynx(21,16),t.YNc(22,Qe,2,0,"th",12),t.YNc(23,Se,2,1,"td",13),t.BQk(),t.ynx(24,17),t.YNc(25,Ee,2,0,"th",12),t.YNc(26,Re,3,0,"td",13),t.BQk(),t.YNc(27,He,1,0,"tr",18),t.YNc(28,Ve,1,3,"tr",19),t.YNc(29,Le,3,1,"tr",20),t.qZA(),t._UZ(30,"mat-paginator",21),t.qZA()()()()}if(2&o){const e=t.oxw();t.xp6(11),t.Q6J("dataSource",e.dataSource),t.xp6(16),t.Q6J("matHeaderRowDef",e.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",e.displayedColumns),t.xp6(2),t.Q6J("pageSizeOptions",t.DdM(4,je))}}function ze(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"visit-report",29),t.NdJ("buttonClick",function(){return t.CHM(e),t.oxw().showReport=!1}),t.qZA()}if(2&o){const e=t.oxw();t.Q6J("reportData",e.report)}}const We=[{path:"",redirectTo:"dashboard",pathMatch:"full"},{path:"dashboard",component:T,children:[{path:"",redirectTo:"appointment",pathMatch:"full"},{path:"appointment",component:ee},{path:"notes",component:qe},{path:"profile",component:L.d},{path:"visit-report",component:(()=>{class o{constructor(e,n,a,s,p){this.datePipe=e,this.appointmentService=n,this.patientVisitService=a,this.router=s,this.utilityService=p,this.displayedColumns=["title","patientName","date","time","action"],this.todaysAppointment="todaysAppointment",this.report=new Ue.w,this.allPatientNames=[],this.allPastAppointments=[],this.user=JSON.parse(sessionStorage.getItem("user")),this.date=this.datePipe.transform(new Date,"yyyy-MM-dd")}ngOnInit(){this.appointmentService.getPastAppointmentByUserId(this.user.employeeId).subscribe(e=>{this.allPastAppointments=e,this.utilityService.getAllPatientNames().subscribe(n=>{this.allPatientNames=n,this.loadDataSource()})})}loadDataSource(){let e=this.allPastAppointments.map(n=>{var a;return{appointment:n,title:n.title,date:n.date,time:n.time,patientName:null===(a=this.allPatientNames.find(s=>s.patientId===n.patientId))||void 0===a?void 0:a.name}});this.dataSource=new c.by(e),null!=this.dataSource&&(this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort)}viewDetails(e){this.showReport=!0,this.patientVisitService.getVisitReportDetails(e).subscribe(n=>{this.report=n})}applyFilter(e){this.dataSource.filter=e.target.value.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}logout(){sessionStorage.clear(),this.router.navigate(["login"])}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(d.uU),t.Y36(y.H),t.Y36(Ie.A),t.Y36(_.F0),t.Y36(D.t))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-patient-visit-history"]],viewQuery:function(e,n){if(1&e&&(t.Gf(N.NW,5),t.Gf(F.YE,5)),2&e){let a;t.iGM(a=t.CRH())&&(n.paginator=a.first),t.iGM(a=t.CRH())&&(n.sort=a.first)}},decls:2,vars:2,consts:[["class","content mat-elevation-z8",4,"ngIf"],[3,"reportData","buttonClick",4,"ngIf"],[1,"content","mat-elevation-z8"],[1,"card-wrapper"],[1,"row"],[1,"text-dark","col-sm-6",2,"font-size","20px","margin-top","2%","margin-bottom","2%"],["appearance","standard"],["matInput","","placeholder","Ex. Patient Name",3,"keyup"],["input",""],[1,"mat-elevation-z8"],["mat-table","","matSort","",1,"table","table-striped",3,"dataSource"],["matColumnDef","title"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","patientName"],["matColumnDef","date"],["matColumnDef","time"],["matColumnDef","action"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"ngClass",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["aria-label","Select page of users",3,"pageSizeOptions"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[1,"btn","btn-success",3,"click"],["mat-header-row",""],["mat-row","",3,"ngClass"],[1,"mat-row"],["colspan","4",1,"mat-cell"],[3,"reportData","buttonClick"]],template:function(e,n){1&e&&(t.YNc(0,Ge,31,5,"div",0),t.YNc(1,ze,1,1,"visit-report",1)),2&e&&(t.Q6J("ngIf",!n.showReport),t.xp6(1),t.Q6J("ngIf",n.showReport))},directives:[d.O5,h.KE,h.hX,Q.Nt,c.BZ,c.w1,c.fO,c.ge,c.Dz,c.ev,c.as,c.XQ,c.nj,c.Gk,d.mk,c.Ee,N.NW,Pe.Y],styles:["h1[_ngcontent-%COMP%]{margin:100px;text-align:center;font-family:Verdana,Geneva,Tahoma,sans-serif}mat-toolbar[_ngcontent-%COMP%]{background:#004a9f;color:#fff}table[_ngcontent-%COMP%]{width:100%}mat-paginator[_ngcontent-%COMP%]{font-size:11.5pt}mat-sidenav[_ngcontent-%COMP%]{margin:16px;width:200px;border-right:none;background:#002b5c;color:#fff;border-radius:10px;padding:16px;text-align:center}.content[_ngcontent-%COMP%]{height:calc(100vh - 130px);border-radius:10px;margin:16px 16px 16px 32px;padding:16px;overflow:auto}mat-sidenav-container[_ngcontent-%COMP%]{height:calc(100vh - 100px)}.menu-button[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;justify-content:flex-start;font-size:1rem}.avatar[_ngcontent-%COMP%]{margin-top:16px;width:100px;height:100px;border-radius:50%}.name[_ngcontent-%COMP%]{margin-top:8px;font-weight:400}.designation[_ngcontent-%COMP%]{margin-top:2px;font-size:.9rem;color:#d3d3d3}mat-divider[_ngcontent-%COMP%]{margin-top:16px;margin-bottom:16px;background-color:#ffffff80}.logout[_ngcontent-%COMP%]{font-size:medium}.flexExpand[_ngcontent-%COMP%]{flex:1 1 auto}.todaysAppointment[_ngcontent-%COMP%]{background-color:#f0f088}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{font-size:11pt;vertical-align:middle;-webkit-user-select:none;user-select:none}th[_ngcontent-%COMP%]{font-weight:700}"]}),o})()}]},{path:"notes-dialog",component:E}];let Xe=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[_.Bz.forChild(We)],_.Bz]}),o})();var Ke=l(646),M=l(4107),J=l(508);function to(o,i){if(1&o&&(t.TgZ(0,"mat-option",7),t._uU(1),t.qZA()),2&o){const e=i.$implicit;t.Q6J("value",e.procedureId),t.xp6(1),t.hij(" ",e.procedureName," ")}}function eo(o,i){1&o&&(t.TgZ(0,"tr")(1,"td",22),t._uU(2," No Procedures Available ! "),t.qZA()())}function oo(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td",23)(8,"button",24),t.NdJ("click",function(){const s=t.CHM(e).index;return t.oxw().removeProcedure(s)}),t._uU(9,"Remove "),t.qZA()()()}if(2&o){const e=i.$implicit;t.xp6(2),t.Oqu(e.procedureId),t.xp6(2),t.Oqu(e.procedureName),t.xp6(2),t.Oqu(e.description)}}let no=(()=>{class o{constructor(e,n,a,s){this.snackbar=e,this.dialogRef=n,this.procedureService=a,this.formBuilder=s,this.updateEvent=new t.vpe,this.proceduresData=[],this.selectedProcedures=[],this.hasAnythingChanged=!1,this.form=this.formBuilder.group({procedureName:[-1],description:[{value:"",disabled:!0}]})}ngOnInit(){this.procedureService.getAllProcedures().subscribe(e=>this.proceduresData=e),this.procedureService.getProcedureByAptId(this.appointmentId).subscribe(e=>this.selectedProcedures=e)}showDescription(e){if(-1==e)this.form.controls.description.setValue("");else{let n=this.proceduresData.find(a=>a.procedureId===e);this.form.controls.description.setValue(null==n?void 0:n.description)}}addSelectedProcedure(e){let n=this.proceduresData.find(a=>a.procedureId===e);this.selectedProcedures.map(a=>a.procedureId).includes(e)?alert("Procedure Already Added !"):(this.selectedProcedures.push(n),this.hasAnythingChanged=!0,this.form.reset())}removeProcedure(e){this.selectedProcedures.splice(e,1),this.hasAnythingChanged=!0}emitProcedureUpdateEvent(){let e={appointmentId:this.appointmentId,procedureIds:this.selectedProcedures.map(n=>n.procedureId)};this.procedureService.addProcedureByAptId(e).subscribe(n=>{n?(this.updateEvent.emit(),this.snackbar.open("Changes Succesfully Saved !","",{duration:3e3}),this.hasAnythingChanged=!1):alert(n)})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(v.ux),t.Y36(m.so),t.Y36(Ke.d),t.Y36(r.qu))},o.\u0275cmp=t.Xpm({type:o,selectors:[["add-procedures"]],inputs:{appointmentId:"appointmentId"},outputs:{updateEvent:"update"},decls:39,vars:7,consts:[[3,"formGroup"],[1,"row","form-group","mt-4"],[1,"col","col-md-12","col-sm-12"],[1,"w-100"],[1,"mb-1"],["formControlName","procedureName","name","procedureName",3,"valueChange"],["selectProcedure",""],[3,"value"],[3,"value",4,"ngFor","ngForOf"],[1,"row","form-group","mt-2","mb-2"],["formControlName","description","readonly","",1,"form-control"],[2,"display","flex","width","100%","justify-content","end","margin-top","1em"],[1,"btn","btn-primary",2,"justify-self","flex-end","margin-right","1.65em",3,"disabled","click"],[1,"table","table-hover","mt-4"],["scope","col"],["scope","col",1,"text-center"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"row","form-group","text-center","mt-4","mb-4"],[1,"col","col-md-12","text-center"],[1,"btn","btn-success","me-3",3,"disabled","click"],[1,"btn","btn-warning","ms-3",3,"click"],["colspan","4",1,"text-danger","text-center"],[1,"text-center"],[1,"btn","btn-danger",2,"font-size","10pt","padding","0.5em","margin","0",3,"click"]],template:function(e,n){if(1&e){const a=t.EpF();t.TgZ(0,"form",0)(1,"div",1)(2,"div",2)(3,"mat-form-field",3)(4,"mat-label",4),t._uU(5,"Procedure"),t.qZA(),t.TgZ(6,"mat-select",5,6),t.NdJ("valueChange",function(){t.CHM(a);const p=t.MAs(7);return n.showDescription(p.value)}),t.TgZ(8,"mat-option",7),t._uU(9,"Select Procedure"),t.qZA(),t.YNc(10,to,2,2,"mat-option",8),t.qZA()()()(),t.TgZ(11,"div",9)(12,"div",2)(13,"mat-label",4),t._uU(14,"Description"),t.qZA(),t._UZ(15,"input",10),t.qZA()()(),t.TgZ(16,"div",11)(17,"button",12),t.NdJ("click",function(){t.CHM(a);const p=t.MAs(7);return n.addSelectedProcedure(p.value)}),t._uU(18,"Add"),t.qZA()(),t.TgZ(19,"table",13)(20,"thead")(21,"tr")(22,"th",14),t._uU(23,"ID"),t.qZA(),t.TgZ(24,"th",14),t._uU(25,"Procedure Name"),t.qZA(),t.TgZ(26,"th",14),t._uU(27,"Description"),t.qZA(),t.TgZ(28,"th",15),t._uU(29,"Action"),t.qZA()()(),t.TgZ(30,"tbody"),t.YNc(31,eo,3,0,"tr",16),t.YNc(32,oo,10,3,"tr",17),t.qZA()(),t.TgZ(33,"div",18)(34,"div",19)(35,"button",20),t.NdJ("click",function(){return n.emitProcedureUpdateEvent()}),t._uU(36,"Save"),t.qZA(),t.TgZ(37,"button",21),t.NdJ("click",function(){return n.dialogRef.close()}),t._uU(38,"Close"),t.qZA()()()}if(2&e){const a=t.MAs(7);t.Q6J("formGroup",n.form),t.xp6(8),t.Q6J("value",-1),t.xp6(2),t.Q6J("ngForOf",n.proceduresData),t.xp6(7),t.Q6J("disabled",-1===a.value),t.xp6(14),t.Q6J("ngIf",0==n.selectedProcedures.length),t.xp6(1),t.Q6J("ngForOf",n.selectedProcedures),t.xp6(3),t.Q6J("disabled",!n.hasAnythingChanged)}},directives:[r._Y,r.JL,r.sg,h.KE,h.hX,M.gD,r.JJ,r.u,J.ey,d.sg,r.Fj,d.O5],styles:["th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{margin:0;padding:1em;font-weight:400;font-family:Verdana,Geneva,Tahoma,sans-serif;vertical-align:middle}thead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%]:first-child{background-color:#fafafa;border:1px solid lightgray}"]}),o})();var io=l(8345);function ao(o,i){if(1&o&&(t.TgZ(0,"mat-option",7),t._uU(1),t.qZA()),2&o){const e=i.$implicit;t.Q6J("value",e.medicationName),t.xp6(1),t.hij(" ",e.medicationName," ")}}function so(o,i){if(1&o&&(t.TgZ(0,"mat-option",7),t._uU(1),t.qZA()),2&o){const e=i.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e," ")}}function ro(o,i){1&o&&(t.TgZ(0,"tr")(1,"td",26),t._uU(2," No Medications Available ! "),t.qZA()())}function lo(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td",27)(10,"button",28),t.NdJ("click",function(){const s=t.CHM(e).index;return t.oxw().removeMedication(s)}),t._uU(11,"Remove "),t.qZA()()()}if(2&o){const e=i.$implicit;t.xp6(2),t.Oqu(e.medicationId),t.xp6(2),t.Oqu(e.medicationName),t.xp6(2),t.Oqu(e.dosage),t.xp6(2),t.Oqu(e.description)}}let po=(()=>{class o{constructor(e,n,a,s){this.snackbar=e,this.dialogRef=n,this.medicationService=a,this.formBuilder=s,this.updateEvent=new t.vpe,this.medicationsData=[],this.selectedMedications=[],this.selectedMedication=null,this.medicationDosages=[],this.hasAnythingChanged=!1,this.form=this.formBuilder.group({medicationName:[""],dosage:[""],description:[{value:"",disabled:!0}]})}ngOnInit(){this.medicationService.getAllMedications().subscribe(e=>this.medicationsData=e),this.medicationService.getMedicationByAptId(this.appointmentId).subscribe(e=>this.selectedMedications=e)}loadDosagesForName(e){""===e?(this.medicationDosages=[],this.form.controls.dosage.setValue(""),this.form.controls.dosage.disable()):(this.form.controls.dosage.enable(),this.medicationDosages=this.medicationsData.filter(n=>n.medicationName===e).map(n=>n.dosage),1===this.medicationDosages.length&&(this.form.controls.dosage.setValue(this.medicationDosages[0]),this.showDescription(e,this.medicationDosages[0])))}showDescription(e,n){var a;""===e||""===n?(this.form.reset(),this.selectedMedication=null):(this.selectedMedication=this.medicationsData.find(s=>s.medicationName===e&&s.dosage===n),this.form.controls.description.setValue(null===(a=this.selectedMedication)||void 0===a?void 0:a.description))}addSelectedMedication(){this.selectedMedications.map(e=>e.medicationId).includes(this.selectedMedication.medicationId)?alert("Medication Already Added !"):(this.selectedMedications.push(this.selectedMedication),this.hasAnythingChanged=!0,this.selectedMedication=null,this.medicationDosages=[],this.form.reset())}removeMedication(e){this.selectedMedications.splice(e,1),this.hasAnythingChanged=!0}emitMedicationUpdateEvent(){let e={appointmentId:this.appointmentId,medicationIds:this.selectedMedications.map(n=>n.medicationId)};this.medicationService.addMedicationByAptId(e).subscribe(n=>{n?(this.updateEvent.emit(),this.snackbar.open("Changes Succesfully Saved !","",{duration:3e3}),this.hasAnythingChanged=!1):alert(n)})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(v.ux),t.Y36(m.so),t.Y36(io.N),t.Y36(r.qu))},o.\u0275cmp=t.Xpm({type:o,selectors:[["add-medications"]],inputs:{appointmentId:"appointmentId"},outputs:{updateEvent:"update"},decls:50,vars:9,consts:[[3,"formGroup"],[1,"row","form-group","mt-4"],[1,"col","col-md-8","col-sm-12"],[1,"w-100"],[1,"mb-1"],["formControlName","medicationName","name","medicationName",3,"valueChange"],["selectName",""],[3,"value"],[3,"value",4,"ngFor","ngForOf"],[1,"col","col-md-4","col-sm-12"],["formControlName","dosage","name","dosage",3,"valueChange"],["selectDosage",""],[1,"row","form-group","mt-2","mb-2"],[1,"col","col-md-12","col-sm-12"],["formControlName","description","readonly","",1,"form-control"],[2,"display","flex","width","100%","justify-content","end","margin-top","1em"],[1,"btn","btn-primary",2,"justify-self","flex-end","margin-right","1.65em",3,"disabled","click"],[1,"table","table-hover","mt-4"],["scope","col"],["scope","col",1,"text-center"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"row","form-group","text-center","mt-4","mb-4"],[1,"col","col-md-12","text-center"],[1,"btn","btn-success","me-3",3,"disabled","click"],[1,"btn","btn-warning","ms-3",3,"click"],["colspan","5",1,"text-danger","text-center"],[1,"text-center"],[1,"btn","btn-danger",2,"font-size","10pt","padding","0.5em","margin","0",3,"click"]],template:function(e,n){if(1&e){const a=t.EpF();t.TgZ(0,"form",0)(1,"div",1)(2,"div",2)(3,"mat-form-field",3)(4,"mat-label",4),t._uU(5,"Medication"),t.qZA(),t.TgZ(6,"mat-select",5,6),t.NdJ("valueChange",function(){t.CHM(a);const p=t.MAs(7);return n.loadDosagesForName(p.value)}),t.TgZ(8,"mat-option",7),t._uU(9,"Select Medication"),t.qZA(),t.YNc(10,ao,2,2,"mat-option",8),t.qZA()()(),t.TgZ(11,"div",9)(12,"mat-form-field",3)(13,"mat-label",4),t._uU(14,"Dosage"),t.qZA(),t.TgZ(15,"mat-select",10,11),t.NdJ("valueChange",function(){t.CHM(a);const p=t.MAs(7),g=t.MAs(16);return n.showDescription(p.value,g.value)}),t.TgZ(17,"mat-option",7),t._uU(18,"Select Dosage"),t.qZA(),t.YNc(19,so,2,2,"mat-option",8),t.qZA()()()(),t.TgZ(20,"div",12)(21,"div",13)(22,"mat-label",4),t._uU(23,"Description"),t.qZA(),t._UZ(24,"input",14),t.qZA()()(),t.TgZ(25,"div",15)(26,"button",16),t.NdJ("click",function(){return n.addSelectedMedication()}),t._uU(27,"Add"),t.qZA()(),t.TgZ(28,"table",17)(29,"thead")(30,"tr")(31,"th",18),t._uU(32,"ID"),t.qZA(),t.TgZ(33,"th",18),t._uU(34,"Medication Name"),t.qZA(),t.TgZ(35,"th",18),t._uU(36,"Dosage"),t.qZA(),t.TgZ(37,"th",18),t._uU(38,"Description"),t.qZA(),t.TgZ(39,"th",19),t._uU(40,"Action"),t.qZA()()(),t.TgZ(41,"tbody"),t.YNc(42,ro,3,0,"tr",20),t.YNc(43,lo,12,4,"tr",21),t.qZA()(),t.TgZ(44,"div",22)(45,"div",23)(46,"button",24),t.NdJ("click",function(){return n.emitMedicationUpdateEvent()}),t._uU(47,"Save"),t.qZA(),t.TgZ(48,"button",25),t.NdJ("click",function(){return n.dialogRef.close()}),t._uU(49,"Close"),t.qZA()()()}2&e&&(t.Q6J("formGroup",n.form),t.xp6(8),t.Q6J("value",""),t.xp6(2),t.Q6J("ngForOf",n.medicationsData),t.xp6(7),t.Q6J("value",""),t.xp6(2),t.Q6J("ngForOf",n.medicationDosages),t.xp6(7),t.Q6J("disabled",null==n.selectedMedication),t.xp6(16),t.Q6J("ngIf",0==n.selectedMedications.length),t.xp6(1),t.Q6J("ngForOf",n.selectedMedications),t.xp6(3),t.Q6J("disabled",!n.hasAnythingChanged))},directives:[r._Y,r.JL,r.sg,h.KE,h.hX,M.gD,r.JJ,r.u,J.ey,d.sg,r.Fj,d.O5],styles:["th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{margin:0;padding:1em;font-weight:400;font-family:Verdana,Geneva,Tahoma,sans-serif;vertical-align:middle}thead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%]:first-child{background-color:#fafafa;border:1px solid lightgray}"]}),o})();var co=l(293);function mo(o,i){if(1&o&&(t.TgZ(0,"mat-option",5),t._uU(1),t.qZA()),2&o){const e=i.$implicit;t.Q6J("value",e.diagnosisId),t.xp6(1),t.hij(" ",e.title," ")}}function uo(o,i){1&o&&(t.TgZ(0,"tr")(1,"td",18),t._uU(2," No Diagnosis Available ! "),t.qZA()())}function go(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"tr")(1,"td",19),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td",19)(6,"button",20),t.NdJ("click",function(){const s=t.CHM(e).index;return t.oxw().removeDiagnosis(s)}),t._uU(7,"Remove "),t.qZA()()()}if(2&o){const e=i.$implicit;t.xp6(2),t.Oqu(e.diagnosisId),t.xp6(2),t.Oqu(e.title)}}let fo=(()=>{class o{constructor(e,n,a,s){this.snackbar=e,this.dialogRef=n,this.diagnosisService=a,this.formBuilder=s,this.updateEvent=new t.vpe,this.diagnosisData=[],this.selectedDiagnosis=[],this.hasAnythingChanged=!1,this.form=this.formBuilder.group({diagnosis:[-1]})}ngOnInit(){this.diagnosisService.getAllDiagnosis().subscribe(e=>this.diagnosisData=e),this.diagnosisService.getDiagnosisByAptId(this.appointmentId).subscribe(e=>this.selectedDiagnosis=e)}addSelectedDiagnosis(e){let n=this.diagnosisData.find(a=>a.diagnosisId===e);this.selectedDiagnosis.map(a=>a.diagnosisId).includes(e)?alert("Diagnosis Already Added !"):(this.selectedDiagnosis.push(n),this.form.controls.diagnosis.setValue(-1),this.hasAnythingChanged=!0)}removeDiagnosis(e){this.selectedDiagnosis.splice(e,1),this.hasAnythingChanged=!0}emitDiagnosisUpdateEvent(){let e={appointmentId:this.appointmentId,diagnosisIds:this.selectedDiagnosis.map(n=>n.diagnosisId)};this.diagnosisService.addDiagnosisByAptId(e).subscribe(n=>{n?(this.updateEvent.emit(),this.snackbar.open("Changes Succesfully Saved !","",{duration:3e3}),this.hasAnythingChanged=!1):alert(n)})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(v.ux),t.Y36(m.so),t.Y36(co.r),t.Y36(r.qu))},o.\u0275cmp=t.Xpm({type:o,selectors:[["add-diagnosis"]],inputs:{appointmentId:"appointmentId"},outputs:{updateEvent:"update"},decls:31,vars:7,consts:[[1,"row","form-group","mt-4"],[1,"col","col-md-12","col-sm-12"],[1,"w-100",3,"formGroup"],["formControlName","diagnosis","name","diagnosis"],["selectDiagnosis",""],[3,"value"],[3,"value",4,"ngFor","ngForOf"],[2,"display","flex","width","100%","justify-content","end","margin-top","0"],[1,"btn","btn-primary",2,"justify-self","flex-end","margin-right","1.7em",3,"disabled","click"],[1,"table","table-hover","mt-4"],["scope","col",1,"text-center"],["scope","col"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"row","form-group","text-center","mt-4","mb-4"],[1,"col","col-md-12","text-center"],[1,"btn","btn-success","me-3",3,"disabled","click"],[1,"btn","btn-warning","ms-3",3,"click"],["colspan","3",1,"text-danger","text-center"],[1,"text-center"],[1,"btn","btn-danger",2,"font-size","10pt","padding","0.5em","margin","0",3,"click"]],template:function(e,n){if(1&e){const a=t.EpF();t.TgZ(0,"div",0)(1,"div",1)(2,"mat-form-field",2)(3,"mat-label"),t._uU(4,"Diagnosis"),t.qZA(),t.TgZ(5,"mat-select",3,4)(7,"mat-option",5),t._uU(8,"Select Diagnosis"),t.qZA(),t.YNc(9,mo,2,2,"mat-option",6),t.qZA()()(),t.TgZ(10,"div",7)(11,"button",8),t.NdJ("click",function(){t.CHM(a);const p=t.MAs(6);return n.addSelectedDiagnosis(p.value)}),t._uU(12,"Add"),t.qZA()()(),t.TgZ(13,"table",9)(14,"thead")(15,"tr")(16,"th",10),t._uU(17,"ID"),t.qZA(),t.TgZ(18,"th",11),t._uU(19,"Diagnosis Title"),t.qZA(),t.TgZ(20,"th",10),t._uU(21,"Action"),t.qZA()()(),t.TgZ(22,"tbody"),t.YNc(23,uo,3,0,"tr",12),t.YNc(24,go,8,2,"tr",13),t.qZA()(),t.TgZ(25,"div",14)(26,"div",15)(27,"button",16),t.NdJ("click",function(){return n.emitDiagnosisUpdateEvent()}),t._uU(28,"Save"),t.qZA(),t.TgZ(29,"button",17),t.NdJ("click",function(){return n.dialogRef.close()}),t._uU(30,"Close"),t.qZA()()()}if(2&e){const a=t.MAs(6);t.xp6(2),t.Q6J("formGroup",n.form),t.xp6(5),t.Q6J("value",-1),t.xp6(2),t.Q6J("ngForOf",n.diagnosisData),t.xp6(2),t.Q6J("disabled",-1===a.value),t.xp6(12),t.Q6J("ngIf",0==n.selectedDiagnosis.length),t.xp6(1),t.Q6J("ngForOf",n.selectedDiagnosis),t.xp6(3),t.Q6J("disabled",!n.hasAnythingChanged)}},directives:[h.KE,r.JL,r.sg,h.hX,M.gD,r.JJ,r.u,J.ey,d.sg,d.O5],styles:["th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{margin:0;padding:1em;font-weight:400;font-family:Verdana,Geneva,Tahoma,sans-serif;vertical-align:middle}thead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%]:first-child{background-color:#fafafa;border:1px solid lightgray}"]}),o})();var _o=l(6652),ho=l(4065);U.z1U.registerPlugins([H.ZP,V.ZP,B.ZP]);let bo=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({providers:[b.Rg,b.F$,b.ZP,b.Tk,b.im,b.H1,b._Y,b.Ct],imports:[[d.ez,Xe,r.UX,_o.q,U.z1U,b.K7,ho.m]]}),o})();t.B6R(Y,[Z.SP,Z.uX,po,no,fo],[])}}]);